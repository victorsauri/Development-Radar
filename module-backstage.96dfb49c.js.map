{"version":3,"file":"static/module-backstage.96dfb49c.js","mappings":"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","sources":["webpack://app/./node_modules/@backstage/plugin-permission-common/dist/index.esm.js","webpack://app/./node_modules/@backstage/plugin-permission-react/dist/index.esm.js","webpack://app/./node_modules/@backstage/theme/dist/index.esm.js","webpack://app/./node_modules/@backstage/app-defaults/dist/index.esm.js","webpack://app/./node_modules/@backstage/config/dist/index.esm.js","webpack://app/./node_modules/@backstage/core-app-api/dist/index.esm.js","webpack://app/./node_modules/@backstage/core-components/dist/index.esm.js","webpack://app/./node_modules/@backstage/core-plugin-api/dist/esm/usePluginOptions-68e31f9f.esm.js","webpack://app/./node_modules/@backstage/core-plugin-api/dist/index.esm.js","webpack://app/./node_modules/@backstage/errors/dist/index.esm.js","webpack://app/./node_modules/@backstage/plugin-tech-radar/dist/index.esm.js","webpack://app/./node_modules/@backstage/version-bridge/dist/index.esm.js"],"sourcesContent":["import { ResponseError } from '@backstage/errors';\nimport fetch from 'cross-fetch';\nimport * as uuid from 'uuid';\nimport { z } from 'zod';\n\nvar AuthorizeResult = /* @__PURE__ */ ((AuthorizeResult2) => {\n  AuthorizeResult2[\"DENY\"] = \"DENY\";\n  AuthorizeResult2[\"ALLOW\"] = \"ALLOW\";\n  AuthorizeResult2[\"CONDITIONAL\"] = \"CONDITIONAL\";\n  return AuthorizeResult2;\n})(AuthorizeResult || {});\n\nfunction isPermission(permission, comparedPermission) {\n  return permission.name === comparedPermission.name;\n}\nfunction isResourcePermission(permission, resourceType) {\n  if (!(\"resourceType\" in permission)) {\n    return false;\n  }\n  return !resourceType || permission.resourceType === resourceType;\n}\nfunction isCreatePermission(permission) {\n  return permission.attributes.action === \"create\";\n}\nfunction isReadPermission(permission) {\n  return permission.attributes.action === \"read\";\n}\nfunction isUpdatePermission(permission) {\n  return permission.attributes.action === \"update\";\n}\nfunction isDeletePermission(permission) {\n  return permission.attributes.action === \"delete\";\n}\nfunction toPermissionEvaluator(permissionAuthorizer) {\n  return {\n    authorize: async (requests, options) => {\n      const response = await permissionAuthorizer.authorize(requests, options);\n      return response;\n    },\n    authorizeConditional(requests, options) {\n      const parsedRequests = requests;\n      return permissionAuthorizer.authorize(parsedRequests, options);\n    }\n  };\n}\n\nfunction createPermission({\n  name,\n  attributes,\n  resourceType\n}) {\n  if (resourceType) {\n    return {\n      type: \"resource\",\n      name,\n      attributes,\n      resourceType\n    };\n  }\n  return {\n    type: \"basic\",\n    name,\n    attributes\n  };\n}\n\nconst permissionCriteriaSchema = z.lazy(\n  () => z.object({\n    rule: z.string(),\n    resourceType: z.string(),\n    params: z.record(z.any()).optional()\n  }).or(z.object({ anyOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ allOf: z.array(permissionCriteriaSchema).nonempty() })).or(z.object({ not: permissionCriteriaSchema }))\n);\nconst authorizePermissionResponseSchema = z.object({\n  result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n});\nconst queryPermissionResponseSchema = z.union([\n  z.object({\n    result: z.literal(AuthorizeResult.ALLOW).or(z.literal(AuthorizeResult.DENY))\n  }),\n  z.object({\n    result: z.literal(AuthorizeResult.CONDITIONAL),\n    pluginId: z.string(),\n    resourceType: z.string(),\n    conditions: permissionCriteriaSchema\n  })\n]);\nconst responseSchema = (itemSchema, ids) => z.object({\n  items: z.array(\n    z.intersection(\n      z.object({\n        id: z.string()\n      }),\n      itemSchema\n    )\n  ).refine(\n    (items) => items.length === ids.size && items.every(({ id }) => ids.has(id)),\n    {\n      message: \"Items in response do not match request\"\n    }\n  )\n});\nclass PermissionClient {\n  constructor(options) {\n    var _a;\n    this.discovery = options.discovery;\n    this.enabled = (_a = options.config.getOptionalBoolean(\"permission.enabled\")) != null ? _a : false;\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorize}\n   */\n  async authorize(requests, options) {\n    return this.makeRequest(\n      requests,\n      authorizePermissionResponseSchema,\n      options\n    );\n  }\n  /**\n   * {@inheritdoc PermissionEvaluator.authorizeConditional}\n   */\n  async authorizeConditional(queries, options) {\n    return this.makeRequest(queries, queryPermissionResponseSchema, options);\n  }\n  async makeRequest(queries, itemSchema, options) {\n    if (!this.enabled) {\n      return queries.map((_) => ({ result: AuthorizeResult.ALLOW }));\n    }\n    const request = {\n      items: queries.map((query) => ({\n        id: uuid.v4(),\n        ...query\n      }))\n    };\n    const permissionApi = await this.discovery.getBaseUrl(\"permission\");\n    const response = await fetch(`${permissionApi}/authorize`, {\n      method: \"POST\",\n      body: JSON.stringify(request),\n      headers: {\n        ...this.getAuthorizationHeader(options == null ? void 0 : options.token),\n        \"content-type\": \"application/json\"\n      }\n    });\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    const responseBody = await response.json();\n    const parsedResponse = responseSchema(\n      itemSchema,\n      new Set(request.items.map(({ id }) => id))\n    ).parse(responseBody);\n    const responsesById = parsedResponse.items.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return request.items.map((query) => responsesById[query.id]);\n  }\n  getAuthorizationHeader(token) {\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n}\n\nexport { AuthorizeResult, PermissionClient, createPermission, isCreatePermission, isDeletePermission, isPermission, isReadPermission, isResourcePermission, isUpdatePermission, toPermissionEvaluator };\n//# sourceMappingURL=index.esm.js.map\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { createApiRef, useApi, useApp } from '@backstage/core-plugin-api';\nimport { PermissionClient, isResourcePermission, AuthorizeResult } from '@backstage/plugin-permission-common';\nimport useSWR from 'swr';\n\nconst permissionApiRef = createApiRef({\n  id: \"plugin.permission.api\"\n});\n\nclass IdentityPermissionApi {\n  constructor(permissionClient, identityApi) {\n    this.permissionClient = permissionClient;\n    this.identityApi = identityApi;\n  }\n  static create(options) {\n    const { config, discovery, identity } = options;\n    const permissionClient = new PermissionClient({ discovery, config });\n    return new IdentityPermissionApi(permissionClient, identity);\n  }\n  async authorize(request) {\n    const response = await this.permissionClient.authorize(\n      [request],\n      await this.identityApi.getCredentials()\n    );\n    return response[0];\n  }\n}\n\nfunction usePermission(input) {\n  const permissionApi = useApi(permissionApiRef);\n  const { data, error } = useSWR(input, async (args) => {\n    if (isResourcePermission(args.permission) && !args.resourceRef) {\n      return AuthorizeResult.DENY;\n    }\n    const { result } = await permissionApi.authorize(args);\n    return result;\n  });\n  if (error) {\n    return { error, loading: false, allowed: false };\n  }\n  if (data === void 0) {\n    return { loading: true, allowed: false };\n  }\n  return { loading: false, allowed: data === AuthorizeResult.ALLOW };\n}\n\nconst PermissionedRoute = (props) => {\n  const { permission, resourceRef, errorComponent, ...otherProps } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ React.createElement(NotFoundErrorPage, null) : errorComponent;\n  if (permissionResult.loading) {\n    shownElement = null;\n  } else if (permissionResult.allowed) {\n    shownElement = props.element;\n  }\n  return /* @__PURE__ */ React.createElement(Route, { ...otherProps, element: shownElement });\n};\n\nfunction RequirePermission(props) {\n  const { permission, resourceRef } = props;\n  const permissionResult = usePermission(\n    isResourcePermission(permission) ? { permission, resourceRef } : { permission }\n  );\n  const app = useApp();\n  if (permissionResult.loading) {\n    return null;\n  } else if (permissionResult.allowed) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.children);\n  }\n  if (props.errorPage) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, props.errorPage);\n  }\n  const { NotFoundErrorPage } = app.getComponents();\n  return /* @__PURE__ */ React.createElement(NotFoundErrorPage, null);\n}\n\nexport { IdentityPermissionApi, PermissionedRoute, RequirePermission, permissionApiRef, usePermission };\n//# sourceMappingURL=index.esm.js.map\n","import { createTheme as createTheme$1 } from '@material-ui/core/styles';\nimport { darken, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { yellow } from '@material-ui/core/colors';\n\nconst shapes = {\n  wave: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  wave2: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`,\n  round: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e\")`\n};\nconst colorVariants = {\n  darkGrey: [\"#171717\", \"#383838\"],\n  marineBlue: [\"#006D8F\", \"#0049A1\"],\n  veryBlue: [\"#0027AF\", \"#270094\"],\n  rubyRed: [\"#98002B\", \"#8D1134\"],\n  toastyOrange: [\"#BE2200\", \"#A41D00\"],\n  purpleSky: [\"#8912CA\", \"#3E00EA\"],\n  eveningSea: [\"#00FFF2\", \"#035355\"],\n  teal: [\"#005B4B\"],\n  pinkSea: [\"#C8077A\", \"#C2297D\"],\n  greens: [\"#4BB8A5\", \"#187656\"]\n};\nfunction genPageTheme(props) {\n  var _a;\n  const { colors, shape, options } = props;\n  const gradientColors = colors.length === 1 ? [colors[0], colors[0]] : colors;\n  const gradient = `linear-gradient(90deg, ${gradientColors.join(\", \")})`;\n  const backgroundImage = `${shape},  ${gradient}`;\n  const fontColor = (_a = options == null ? void 0 : options.fontColor) != null ? _a : \"#FFFFFF\";\n  return {\n    colors,\n    shape,\n    backgroundImage,\n    fontColor\n  };\n}\nconst pageTheme = {\n  home: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave }),\n  documentation: genPageTheme({\n    colors: colorVariants.pinkSea,\n    shape: shapes.wave2\n  }),\n  tool: genPageTheme({ colors: colorVariants.purpleSky, shape: shapes.round }),\n  service: genPageTheme({\n    colors: colorVariants.marineBlue,\n    shape: shapes.wave\n  }),\n  website: genPageTheme({ colors: colorVariants.veryBlue, shape: shapes.wave }),\n  library: genPageTheme({ colors: colorVariants.rubyRed, shape: shapes.wave }),\n  other: genPageTheme({ colors: colorVariants.darkGrey, shape: shapes.wave }),\n  app: genPageTheme({ colors: colorVariants.toastyOrange, shape: shapes.wave }),\n  apis: genPageTheme({ colors: colorVariants.teal, shape: shapes.wave2 }),\n  card: genPageTheme({ colors: colorVariants.greens, shape: shapes.wave })\n};\n\nconst DEFAULT_HTML_FONT_SIZE = 16;\nconst DEFAULT_FONT_FAMILY = '\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif';\nfunction createThemeOptions(options) {\n  const {\n    palette,\n    htmlFontSize = DEFAULT_HTML_FONT_SIZE,\n    fontFamily = DEFAULT_FONT_FAMILY,\n    defaultPageTheme,\n    pageTheme: pageTheme$1 = pageTheme\n  } = options;\n  if (!pageTheme$1[defaultPageTheme]) {\n    throw new Error(`${defaultPageTheme} is not defined in pageTheme.`);\n  }\n  return {\n    palette,\n    props: {\n      MuiGrid: {\n        spacing: 2\n      },\n      MuiSwitch: {\n        color: \"primary\"\n      }\n    },\n    typography: {\n      htmlFontSize,\n      fontFamily,\n      h6: {\n        fontWeight: 700,\n        fontSize: 20,\n        marginBottom: 2\n      },\n      h5: {\n        fontWeight: 700,\n        fontSize: 24,\n        marginBottom: 4\n      },\n      h4: {\n        fontWeight: 700,\n        fontSize: 28,\n        marginBottom: 6\n      },\n      h3: {\n        fontSize: 32,\n        fontWeight: 700,\n        marginBottom: 6\n      },\n      h2: {\n        fontSize: 40,\n        fontWeight: 700,\n        marginBottom: 8\n      },\n      h1: {\n        fontSize: 54,\n        fontWeight: 700,\n        marginBottom: 10\n      }\n    },\n    page: pageTheme$1[defaultPageTheme],\n    getPageTheme: ({ themeId }) => {\n      var _a;\n      return (_a = pageTheme$1[themeId]) != null ? _a : pageTheme$1[defaultPageTheme];\n    }\n  };\n}\nfunction createThemeOverrides(theme) {\n  return {\n    MuiCssBaseline: {\n      \"@global\": {\n        html: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily\n        },\n        body: {\n          height: \"100%\",\n          fontFamily: theme.typography.fontFamily,\n          \"overscroll-behavior-y\": \"none\"\n        },\n        a: {\n          color: \"inherit\",\n          textDecoration: \"none\"\n        }\n      }\n    },\n    MuiTableRow: {\n      // Alternating row backgrounds\n      root: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.default\n        }\n      },\n      // Use pointer for hoverable rows\n      hover: {\n        \"&:hover\": {\n          cursor: \"pointer\"\n        }\n      },\n      // Alternating head backgrounds\n      head: {\n        \"&:nth-of-type(odd)\": {\n          backgroundColor: theme.palette.background.paper\n        }\n      }\n    },\n    // Tables are more dense than default mui tables\n    MuiTableCell: {\n      root: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      sizeSmall: {\n        padding: theme.spacing(1.5, 2, 1.5, 2.5)\n      },\n      head: {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        fontWeight: \"normal\",\n        lineHeight: \"1\"\n      }\n    },\n    MuiTabs: {\n      // Tabs are smaller than default mui tab rows\n      root: {\n        minHeight: 24\n      }\n    },\n    MuiTab: {\n      // Tabs are smaller and have a hover background\n      root: {\n        color: theme.palette.link,\n        minHeight: 24,\n        textTransform: \"initial\",\n        letterSpacing: \"0.07em\",\n        \"&:hover\": {\n          color: darken(theme.palette.link, 0.3),\n          background: lighten(theme.palette.link, 0.95)\n        },\n        [theme.breakpoints.up(\"md\")]: {\n          minWidth: 120,\n          fontSize: theme.typography.pxToRem(14),\n          fontWeight: 500\n        }\n      },\n      textColorPrimary: {\n        color: theme.palette.link\n      }\n    },\n    MuiTableSortLabel: {\n      // No color change on hover, just rely on the arrow showing up instead.\n      root: {\n        color: \"inherit\",\n        \"&:hover\": {\n          color: \"inherit\"\n        }\n      },\n      // Bold font for highlighting selected column\n      active: {\n        fontWeight: \"bold\"\n      }\n    },\n    MuiListItemText: {\n      dense: {\n        // Default dense list items to adding ellipsis for really long str...\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      }\n    },\n    MuiButton: {\n      text: {\n        // Text buttons have less padding by default, but we want to keep the original padding\n        padding: void 0\n      }\n    },\n    MuiChip: {\n      root: {\n        backgroundColor: \"#D9D9D9\",\n        // By default there's no margin, but it's usually wanted, so we add some trailing margin\n        marginRight: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        color: theme.palette.grey[900]\n      },\n      outlined: {\n        color: theme.palette.text.primary\n      },\n      label: {\n        lineHeight: `${theme.spacing(2.5)}px`,\n        fontWeight: theme.typography.fontWeightMedium,\n        fontSize: `${theme.spacing(1.75)}px`\n      },\n      labelSmall: {\n        fontSize: `${theme.spacing(1.5)}px`\n      },\n      deleteIcon: {\n        color: theme.palette.grey[500],\n        width: `${theme.spacing(3)}px`,\n        height: `${theme.spacing(3)}px`,\n        margin: `0 ${theme.spacing(0.75)}px 0 -${theme.spacing(0.75)}px`\n      },\n      deleteIconSmall: {\n        width: `${theme.spacing(2)}px`,\n        height: `${theme.spacing(2)}px`,\n        margin: `0 ${theme.spacing(0.5)}px 0 -${theme.spacing(0.5)}px`\n      }\n    },\n    MuiCard: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        display: \"flex\",\n        flexDirection: \"column\"\n      }\n    },\n    MuiCardHeader: {\n      root: {\n        // Reduce padding between header and content\n        paddingBottom: 0\n      }\n    },\n    MuiCardContent: {\n      root: {\n        // When cards have a forced size, such as when they are arranged in a\n        // CSS grid, the content needs to flex such that the actions (buttons\n        // etc) end up at the bottom of the card instead of just below the body\n        // contents.\n        flexGrow: 1,\n        \"&:last-child\": {\n          paddingBottom: void 0\n        }\n      }\n    },\n    MuiCardActions: {\n      root: {\n        // We default to putting the card actions at the end\n        justifyContent: \"flex-end\"\n      }\n    }\n  };\n}\nfunction createTheme(options) {\n  const themeOptions = createThemeOptions(options);\n  const baseTheme = createTheme$1(themeOptions);\n  const overrides = createThemeOverrides(baseTheme);\n  const theme = { ...baseTheme, overrides };\n  return theme;\n}\n\nconst lightTheme = createTheme({\n  palette: {\n    type: \"light\",\n    background: {\n      default: \"#F8F8F8\"\n    },\n    status: {\n      ok: \"#1DB954\",\n      warning: \"#FF9800\",\n      error: \"#E22134\",\n      running: \"#1F5493\",\n      pending: \"#FFED51\",\n      aborted: \"#757575\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#1F5493\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#000000\",\n    textVerySubtle: \"#DDD\",\n    textSubtle: \"#6E6E6E\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#2196F3\",\n    link: \"#0A6EBE\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#171717\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#181818\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\nconst darkTheme = createTheme({\n  palette: {\n    type: \"dark\",\n    background: {\n      default: \"#333333\"\n    },\n    status: {\n      ok: \"#71CF88\",\n      warning: \"#FFB84D\",\n      error: \"#F84C55\",\n      running: \"#3488E3\",\n      pending: \"#FEF071\",\n      aborted: \"#9E9E9E\"\n    },\n    bursts: {\n      fontColor: \"#FEFEFE\",\n      slackChannelText: \"#ddd\",\n      backgroundColor: {\n        default: \"#7C3699\"\n      },\n      gradient: {\n        linear: \"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)\"\n      }\n    },\n    primary: {\n      main: \"#9CC9FF\",\n      dark: \"#82BAFD\"\n    },\n    secondary: {\n      main: \"#FF88B2\"\n    },\n    banner: {\n      info: \"#2E77D0\",\n      error: \"#E22134\",\n      text: \"#FFFFFF\",\n      link: \"#000000\",\n      closeButtonColor: \"#FFFFFF\",\n      warning: \"#FF9800\"\n    },\n    border: \"#E6E6E6\",\n    textContrast: \"#FFFFFF\",\n    textVerySubtle: \"#727272\",\n    textSubtle: \"#CCCCCC\",\n    highlight: \"#FFFBCC\",\n    errorBackground: \"#FFEBEE\",\n    warningBackground: \"#F59B23\",\n    infoBackground: \"#ebf5ff\",\n    errorText: \"#CA001B\",\n    infoText: \"#004e8a\",\n    warningText: \"#000000\",\n    linkHover: \"#82BAFD\",\n    link: \"#9CC9FF\",\n    gold: yellow.A700,\n    navigation: {\n      background: \"#424242\",\n      indicator: \"#9BF0E1\",\n      color: \"#b5b5b5\",\n      selectedColor: \"#FFF\",\n      navItem: {\n        hoverBackground: \"#404040\"\n      },\n      submenu: {\n        background: \"#404040\"\n      }\n    },\n    pinSidebarButton: {\n      icon: \"#404040\",\n      background: \"#BDBDBD\"\n    },\n    tabbar: {\n      indicator: \"#9BF0E1\"\n    }\n  },\n  defaultPageTheme: \"home\",\n  pageTheme\n});\n\nexport { colorVariants, createTheme, createThemeOptions, createThemeOverrides, darkTheme, genPageTheme, lightTheme, pageTheme, shapes };\n//# sourceMappingURL=index.esm.js.map\n","import { UrlPatternDiscovery, AlertApiForwarder, NoOpAnalyticsApi, ErrorAlerter, ErrorApiForwarder, UnhandledErrorForwarder, WebStorage, createFetchApi, FetchMiddlewares, OAuthRequestManager, GoogleAuth, MicrosoftAuth, GithubAuth, OktaAuth, GitlabAuth, OneLoginAuth, BitbucketAuth, BitbucketServerAuth, AtlassianAuth, createSpecializedApp } from '@backstage/core-app-api';\nimport { createApiFactory, discoveryApiRef, configApiRef, alertApiRef, analyticsApiRef, errorApiRef, storageApiRef, fetchApiRef, identityApiRef, oauthRequestApiRef, googleAuthApiRef, microsoftAuthApiRef, githubAuthApiRef, oktaAuthApiRef, gitlabAuthApiRef, oneloginAuthApiRef, bitbucketAuthApiRef, bitbucketServerAuthApiRef, atlassianAuthApiRef } from '@backstage/core-plugin-api';\nimport { permissionApiRef, IdentityPermissionApi } from '@backstage/plugin-permission-react';\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Progress, ErrorPage, ErrorPanel } from '@backstage/core-components';\nimport { BrowserRouter, useInRouterContext, MemoryRouter } from 'react-router-dom';\nimport MuiApartmentIcon from '@material-ui/icons/Apartment';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport MuiCategoryIcon from '@material-ui/icons/Category';\nimport MuiCreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\nimport MuiSubjectIcon from '@material-ui/icons/Subject';\nimport MuiSearchIcon from '@material-ui/icons/Search';\nimport MuiChatIcon from '@material-ui/icons/Chat';\nimport MuiDashboardIcon from '@material-ui/icons/Dashboard';\nimport MuiDocsIcon from '@material-ui/icons/Description';\nimport MuiEmailIcon from '@material-ui/icons/Email';\nimport MuiExtensionIcon from '@material-ui/icons/Extension';\nimport MuiGitHubIcon from '@material-ui/icons/GitHub';\nimport MuiHelpIcon from '@material-ui/icons/Help';\nimport MuiLocationOnIcon from '@material-ui/icons/LocationOn';\nimport MuiMemoryIcon from '@material-ui/icons/Memory';\nimport MuiMenuBookIcon from '@material-ui/icons/MenuBook';\nimport MuiPeopleIcon from '@material-ui/icons/People';\nimport MuiPersonIcon from '@material-ui/icons/Person';\nimport MuiWarningIcon from '@material-ui/icons/Warning';\nimport MuiWorkIcon from '@material-ui/icons/Work';\nimport { lightTheme, darkTheme } from '@backstage/theme';\nimport DarkIcon from '@material-ui/icons/Brightness2';\nimport LightIcon from '@material-ui/icons/WbSunny';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nconst apis = [\n  createApiFactory({\n    api: discoveryApiRef,\n    deps: { configApi: configApiRef },\n    factory: ({ configApi }) => UrlPatternDiscovery.compile(\n      `${configApi.getString(\"backend.baseUrl\")}/api/{{ pluginId }}`\n    )\n  }),\n  createApiFactory({\n    api: alertApiRef,\n    deps: {},\n    factory: () => new AlertApiForwarder()\n  }),\n  createApiFactory({\n    api: analyticsApiRef,\n    deps: {},\n    factory: () => new NoOpAnalyticsApi()\n  }),\n  createApiFactory({\n    api: errorApiRef,\n    deps: { alertApi: alertApiRef },\n    factory: ({ alertApi }) => {\n      const errorApi = new ErrorAlerter(alertApi, new ErrorApiForwarder());\n      UnhandledErrorForwarder.forward(errorApi, { hidden: false });\n      return errorApi;\n    }\n  }),\n  createApiFactory({\n    api: storageApiRef,\n    deps: { errorApi: errorApiRef },\n    factory: ({ errorApi }) => WebStorage.create({ errorApi })\n  }),\n  createApiFactory({\n    api: fetchApiRef,\n    deps: {\n      configApi: configApiRef,\n      identityApi: identityApiRef,\n      discoveryApi: discoveryApiRef\n    },\n    factory: ({ configApi, identityApi, discoveryApi }) => {\n      return createFetchApi({\n        middleware: [\n          FetchMiddlewares.resolvePluginProtocol({\n            discoveryApi\n          }),\n          FetchMiddlewares.injectIdentityAuth({\n            identityApi,\n            config: configApi\n          })\n        ]\n      });\n    }\n  }),\n  createApiFactory({\n    api: oauthRequestApiRef,\n    deps: {},\n    factory: () => new OAuthRequestManager()\n  }),\n  createApiFactory({\n    api: googleAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GoogleAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: microsoftAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => MicrosoftAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: githubAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GithubAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"read:user\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oktaAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OktaAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: gitlabAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => GitlabAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: oneloginAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => OneLoginAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"team\"],\n      environment: configApi.getOptionalString(\"auth.environment\")\n    })\n  }),\n  createApiFactory({\n    api: bitbucketServerAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => BitbucketServerAuth.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      defaultScopes: [\"REPO_READ\"]\n    })\n  }),\n  createApiFactory({\n    api: atlassianAuthApiRef,\n    deps: {\n      discoveryApi: discoveryApiRef,\n      oauthRequestApi: oauthRequestApiRef,\n      configApi: configApiRef\n    },\n    factory: ({ discoveryApi, oauthRequestApi, configApi }) => {\n      return AtlassianAuth.create({\n        configApi,\n        discoveryApi,\n        oauthRequestApi,\n        environment: configApi.getOptionalString(\"auth.environment\")\n      });\n    }\n  }),\n  createApiFactory({\n    api: permissionApiRef,\n    deps: {\n      discovery: discoveryApiRef,\n      identity: identityApiRef,\n      config: configApiRef\n    },\n    factory: ({ config, discovery, identity }) => IdentityPermissionApi.create({ config, discovery, identity })\n  })\n];\n\nfunction OptionallyWrapInRouter({ children }) {\n  if (useInRouterContext()) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(MemoryRouter, null, children);\n}\nconst DefaultNotFoundPage = () => /* @__PURE__ */ React.createElement(ErrorPage, { status: \"404\", statusMessage: \"PAGE NOT FOUND\" });\nconst DefaultBootErrorPage = ({ step, error }) => {\n  let message = \"\";\n  if (step === \"load-config\") {\n    message = `The configuration failed to load, someone should have a look at this error: ${error.message}`;\n  } else if (step === \"load-chunk\") {\n    message = `Lazy loaded chunk failed to load, try to reload the page: ${error.message}`;\n  }\n  return /* @__PURE__ */ React.createElement(OptionallyWrapInRouter, null, /* @__PURE__ */ React.createElement(ErrorPage, { status: \"501\", statusMessage: message }));\n};\nconst DefaultErrorBoundaryFallback = ({\n  error,\n  resetError,\n  plugin\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: `Error in ${plugin == null ? void 0 : plugin.getId()}`,\n      defaultExpanded: true,\n      error\n    },\n    /* @__PURE__ */ React.createElement(Button, { variant: \"outlined\", onClick: resetError }, \"Retry\")\n  );\n};\nconst components = {\n  Progress,\n  Router: BrowserRouter,\n  NotFoundErrorPage: DefaultNotFoundPage,\n  BootErrorPage: DefaultBootErrorPage,\n  ErrorBoundaryFallback: DefaultErrorBoundaryFallback\n};\n\nconst icons = {\n  brokenImage: MuiBrokenImageIcon,\n  // To be confirmed: see https://github.com/backstage/backstage/issues/4970\n  catalog: MuiMenuBookIcon,\n  scaffolder: MuiCreateNewFolderIcon,\n  techdocs: MuiSubjectIcon,\n  search: MuiSearchIcon,\n  chat: MuiChatIcon,\n  dashboard: MuiDashboardIcon,\n  docs: MuiDocsIcon,\n  email: MuiEmailIcon,\n  github: MuiGitHubIcon,\n  group: MuiPeopleIcon,\n  help: MuiHelpIcon,\n  \"kind:api\": MuiExtensionIcon,\n  \"kind:component\": MuiMemoryIcon,\n  \"kind:domain\": MuiApartmentIcon,\n  \"kind:group\": MuiPeopleIcon,\n  \"kind:location\": MuiLocationOnIcon,\n  \"kind:system\": MuiCategoryIcon,\n  \"kind:user\": MuiPersonIcon,\n  \"kind:resource\": MuiWorkIcon,\n  user: MuiPersonIcon,\n  warning: MuiWarningIcon\n};\n\nconst themes = [\n  {\n    id: \"light\",\n    title: \"Light Theme\",\n    variant: \"light\",\n    icon: /* @__PURE__ */ React.createElement(LightIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, { theme: lightTheme }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  },\n  {\n    id: \"dark\",\n    title: \"Dark Theme\",\n    variant: \"dark\",\n    icon: /* @__PURE__ */ React.createElement(DarkIcon, null),\n    Provider: ({ children }) => /* @__PURE__ */ React.createElement(ThemeProvider, { theme: darkTheme }, /* @__PURE__ */ React.createElement(CssBaseline, null, children))\n  }\n];\n\nfunction createApp(options) {\n  var _a, _b, _c, _d;\n  return createSpecializedApp({\n    ...options,\n    apis: (_a = options == null ? void 0 : options.apis) != null ? _a : [],\n    bindRoutes: options == null ? void 0 : options.bindRoutes,\n    components: {\n      ...components,\n      ...options == null ? void 0 : options.components\n    },\n    configLoader: options == null ? void 0 : options.configLoader,\n    defaultApis: apis,\n    icons: {\n      ...icons,\n      ...options == null ? void 0 : options.icons\n    },\n    plugins: (_b = options == null ? void 0 : options.plugins) != null ? _b : [],\n    featureFlags: (_c = options == null ? void 0 : options.featureFlags) != null ? _c : [],\n    themes: (_d = options == null ? void 0 : options.themes) != null ? _d : themes\n  });\n}\n\nexport { createApp };\n//# sourceMappingURL=index.esm.js.map\n","import cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nconst CONFIG_KEY_PART_PATTERN = /^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;\nfunction isObject(value) {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\nfunction typeOf(value) {\n  if (value === null) {\n    return \"null\";\n  } else if (Array.isArray(value)) {\n    return \"array\";\n  }\n  const type = typeof value;\n  if (type === \"number\" && isNaN(value)) {\n    return \"nan\";\n  }\n  if (type === \"string\" && value === \"\") {\n    return \"empty-string\";\n  }\n  return type;\n}\nconst errors = {\n  type(key, context, typeName, expected) {\n    return `Invalid type in config for key '${key}' in '${context}', got ${typeName}, wanted ${expected}`;\n  },\n  missing(key) {\n    return `Missing required config value at '${key}'`;\n  },\n  convert(key, context, expected) {\n    return `Unable to convert config value for key '${key}' in '${context}' to a ${expected}`;\n  }\n};\nclass ConfigReader {\n  constructor(data, context = \"mock-config\", fallback, prefix = \"\") {\n    this.data = data;\n    this.context = context;\n    this.fallback = fallback;\n    this.prefix = prefix;\n    this.notifiedFilteredKeys = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Instantiates the config reader from a list of application config objects.\n   */\n  static fromConfigs(configs) {\n    if (configs.length === 0) {\n      return new ConfigReader(void 0);\n    }\n    return configs.reduce(\n      (previousReader, { data, context, filteredKeys, deprecatedKeys }) => {\n        const reader = new ConfigReader(data, context, previousReader);\n        reader.filteredKeys = filteredKeys;\n        if (deprecatedKeys) {\n          for (const { key, description } of deprecatedKeys) {\n            console.warn(\n              `The configuration key '${key}' of ${context} is deprecated and may be removed soon. ${description || \"\"}`\n            );\n          }\n        }\n        return reader;\n      },\n      void 0\n    );\n  }\n  /** {@inheritdoc Config.has} */\n  has(key) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value !== void 0) {\n      return true;\n    }\n    return (_b = (_a = this.fallback) == null ? void 0 : _a.has(key)) != null ? _b : false;\n  }\n  /** {@inheritdoc Config.keys} */\n  keys() {\n    var _a, _b;\n    const localKeys = this.data ? Object.keys(this.data) : [];\n    const fallbackKeys = (_b = (_a = this.fallback) == null ? void 0 : _a.keys()) != null ? _b : [];\n    return [.../* @__PURE__ */ new Set([...localKeys, ...fallbackKeys])];\n  }\n  /** {@inheritdoc Config.get} */\n  get(key) {\n    const value = this.getOptional(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key != null ? key : \"\")));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptional} */\n  getOptional(key) {\n    var _a, _b;\n    const value = cloneDeep(this.readValue(key));\n    const fallbackValue = (_a = this.fallback) == null ? void 0 : _a.getOptional(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        if (fallbackValue === void 0 && key) {\n          const fullKey = this.fullKey(key);\n          if (((_b = this.filteredKeys) == null ? void 0 : _b.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n            this.notifiedFilteredKeys.add(fullKey);\n            console.warn(\n              `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n            );\n          }\n        }\n      }\n      return fallbackValue;\n    } else if (fallbackValue === void 0) {\n      return value;\n    }\n    return mergeWith(\n      {},\n      { value: fallbackValue },\n      { value },\n      (into, from) => !isObject(from) || !isObject(into) ? from : void 0\n    ).value;\n  }\n  /** {@inheritdoc Config.getConfig} */\n  getConfig(key) {\n    const value = this.getOptionalConfig(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfig} */\n  getOptionalConfig(key) {\n    var _a;\n    const value = this.readValue(key);\n    const fallbackConfig = (_a = this.fallback) == null ? void 0 : _a.getOptionalConfig(key);\n    if (isObject(value)) {\n      return this.copy(value, key, fallbackConfig);\n    }\n    if (value !== void 0) {\n      throw new TypeError(\n        errors.type(this.fullKey(key), this.context, typeOf(value), \"object\")\n      );\n    }\n    return fallbackConfig;\n  }\n  /** {@inheritdoc Config.getConfigArray} */\n  getConfigArray(key) {\n    const value = this.getOptionalConfigArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalConfigArray} */\n  getOptionalConfigArray(key) {\n    var _a;\n    const configs = this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"object-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (!isObject(value)) {\n          return { expected: \"object-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n    if (!configs) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.some((k) => k.startsWith(fullKey))) && !this.notifiedFilteredKeys.has(key)) {\n          this.notifiedFilteredKeys.add(key);\n          console.warn(\n            `Failed to read configuration array at '${key}' as it does not have any visible elements. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return void 0;\n    }\n    return configs.map((obj, index) => this.copy(obj, `${key}[${index}]`));\n  }\n  /** {@inheritdoc Config.getNumber} */\n  getNumber(key) {\n    const value = this.getOptionalNumber(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalNumber} */\n  getOptionalNumber(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"number\" || typeof val === \"string\" || { expected: \"number\" }\n    );\n    if (typeof value === \"number\" || value === void 0) {\n      return value;\n    }\n    const number = Number(value);\n    if (!Number.isFinite(number)) {\n      throw new Error(\n        errors.convert(this.fullKey(key), this.context, \"number\")\n      );\n    }\n    return number;\n  }\n  /** {@inheritdoc Config.getBoolean} */\n  getBoolean(key) {\n    const value = this.getOptionalBoolean(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalBoolean} */\n  getOptionalBoolean(key) {\n    const value = this.readConfigValue(\n      key,\n      (val) => typeof val === \"boolean\" || typeof val === \"number\" || typeof val === \"string\" || { expected: \"boolean\" }\n    );\n    if (typeof value === \"boolean\" || value === void 0) {\n      return value;\n    }\n    const valueString = String(value).trim();\n    if (/^(?:y|yes|true|1|on)$/i.test(valueString)) {\n      return true;\n    }\n    if (/^(?:n|no|false|0|off)$/i.test(valueString)) {\n      return false;\n    }\n    throw new Error(errors.convert(this.fullKey(key), this.context, \"boolean\"));\n  }\n  /** {@inheritdoc Config.getString} */\n  getString(key) {\n    const value = this.getOptionalString(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalString} */\n  getOptionalString(key) {\n    return this.readConfigValue(\n      key,\n      (value) => typeof value === \"string\" && value !== \"\" || { expected: \"string\" }\n    );\n  }\n  /** {@inheritdoc Config.getStringArray} */\n  getStringArray(key) {\n    const value = this.getOptionalStringArray(key);\n    if (value === void 0) {\n      throw new Error(errors.missing(this.fullKey(key)));\n    }\n    return value;\n  }\n  /** {@inheritdoc Config.getOptionalStringArray} */\n  getOptionalStringArray(key) {\n    return this.readConfigValue(key, (values) => {\n      if (!Array.isArray(values)) {\n        return { expected: \"string-array\" };\n      }\n      for (const [index, value] of values.entries()) {\n        if (typeof value !== \"string\" || value === \"\") {\n          return { expected: \"string-array\", value, key: `${key}[${index}]` };\n        }\n      }\n      return true;\n    });\n  }\n  fullKey(key) {\n    return `${this.prefix}${this.prefix ? \".\" : \"\"}${key}`;\n  }\n  copy(data, key, fallback) {\n    const reader = new ConfigReader(\n      data,\n      this.context,\n      fallback,\n      this.fullKey(key)\n    );\n    reader.filteredKeys = this.filteredKeys;\n    return reader;\n  }\n  readConfigValue(key, validate) {\n    var _a, _b;\n    const value = this.readValue(key);\n    if (value === void 0) {\n      if (process.env.NODE_ENV === \"development\") {\n        const fullKey = this.fullKey(key);\n        if (((_a = this.filteredKeys) == null ? void 0 : _a.includes(fullKey)) && !this.notifiedFilteredKeys.has(fullKey)) {\n          this.notifiedFilteredKeys.add(fullKey);\n          console.warn(\n            `Failed to read configuration value at '${fullKey}' as it is not visible. See https://backstage.io/docs/conf/defining#visibility for instructions on how to make it visible.`\n          );\n        }\n      }\n      return (_b = this.fallback) == null ? void 0 : _b.readConfigValue(key, validate);\n    }\n    const result = validate(value);\n    if (result !== true) {\n      const { key: keyName = key, value: theValue = value, expected } = result;\n      throw new TypeError(\n        errors.type(\n          this.fullKey(keyName),\n          this.context,\n          typeOf(theValue),\n          expected\n        )\n      );\n    }\n    return value;\n  }\n  readValue(key) {\n    const parts = key ? key.split(\".\") : [];\n    for (const part of parts) {\n      if (!CONFIG_KEY_PART_PATTERN.test(part)) {\n        throw new TypeError(`Invalid config key '${key}'`);\n      }\n    }\n    if (this.data === void 0) {\n      return void 0;\n    }\n    let value = this.data;\n    for (const [index, part] of parts.entries()) {\n      if (isObject(value)) {\n        value = value[part];\n      } else if (value !== void 0) {\n        const badKey = this.fullKey(parts.slice(0, index).join(\".\"));\n        throw new TypeError(\n          errors.type(badKey, this.context, typeOf(value), \"object\")\n        );\n      }\n    }\n    return value;\n  }\n}\n\nexport { ConfigReader };\n//# sourceMappingURL=index.esm.js.map\n","import React, { useContext, createContext, useEffect, useState, Children, isValidElement, useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { createVersionedContext, createVersionedValueMap, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport ObservableImpl from 'zen-observable';\nimport { SessionState, FeatureFlagState, AnalyticsContext, useAnalytics, useApp, useApi, configApiRef, getComponentData, attachComponentData, featureFlagsApiRef, appThemeApiRef, identityApiRef, useElementFilter } from '@backstage/core-plugin-api';\nimport { z } from 'zod';\nimport { ConfigReader } from '@backstage/config';\nexport { ConfigReader } from '@backstage/config';\nimport { createRoutesFromChildren, Route, useLocation, matchRoutes, Routes, generatePath, useRoutes } from 'react-router-dom';\nimport useAsync from 'react-use/lib/useAsync';\nimport useObservable from 'react-use/lib/useObservable';\n\nclass ApiAggregator {\n  constructor(...holders) {\n    this.holders = holders;\n  }\n  get(apiRef) {\n    for (const holder of this.holders) {\n      const api = holder.get(apiRef);\n      if (api) {\n        return api;\n      }\n    }\n    return void 0;\n  }\n}\n\nconst ApiContext = createVersionedContext(\"api-context\");\nconst ApiProvider = (props) => {\n  var _a;\n  const { apis, children } = props;\n  const parentHolder = (_a = useContext(ApiContext)) == null ? void 0 : _a.atVersion(1);\n  const holder = parentHolder ? new ApiAggregator(apis, parentHolder) : apis;\n  return /* @__PURE__ */ React.createElement(\n    ApiContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: holder }),\n      children\n    }\n  );\n};\nApiProvider.propTypes = {\n  apis: PropTypes.shape({ get: PropTypes.func.isRequired }).isRequired,\n  children: PropTypes.node\n};\n\nclass ApiResolver {\n  constructor(factories) {\n    this.factories = factories;\n    this.apis = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Validate factories by making sure that each of the apis can be created\n   * without hitting any circular dependencies.\n   */\n  static validateFactories(factories, apis) {\n    for (const api of apis) {\n      const heap = [api];\n      const allDeps = /* @__PURE__ */ new Set();\n      while (heap.length) {\n        const apiRef = heap.shift();\n        const factory = factories.get(apiRef);\n        if (!factory) {\n          continue;\n        }\n        for (const dep of Object.values(factory.deps)) {\n          if (dep.id === api.id) {\n            throw new Error(`Circular dependency of api factory for ${api}`);\n          }\n          if (!allDeps.has(dep)) {\n            allDeps.add(dep);\n            heap.push(dep);\n          }\n        }\n      }\n    }\n  }\n  get(ref) {\n    return this.load(ref);\n  }\n  load(ref, loading = []) {\n    const impl = this.apis.get(ref.id);\n    if (impl) {\n      return impl;\n    }\n    const factory = this.factories.get(ref);\n    if (!factory) {\n      return void 0;\n    }\n    if (loading.includes(factory.api)) {\n      throw new Error(`Circular dependency of api factory for ${factory.api}`);\n    }\n    const deps = this.loadDeps(ref, factory.deps, [...loading, factory.api]);\n    const api = factory.factory(deps);\n    this.apis.set(ref.id, api);\n    return api;\n  }\n  loadDeps(dependent, apis, loading) {\n    const impls = {};\n    for (const key in apis) {\n      if (apis.hasOwnProperty(key)) {\n        const ref = apis[key];\n        const api = this.load(ref, loading);\n        if (!api) {\n          throw new Error(\n            `No API factory available for dependency ${ref} of dependent ${dependent}`\n          );\n        }\n        impls[key] = api;\n      }\n    }\n    return impls;\n  }\n}\n\nvar ScopePriority = /* @__PURE__ */ ((ScopePriority2) => {\n  ScopePriority2[ScopePriority2[\"default\"] = 10] = \"default\";\n  ScopePriority2[ScopePriority2[\"app\"] = 50] = \"app\";\n  ScopePriority2[ScopePriority2[\"static\"] = 100] = \"static\";\n  return ScopePriority2;\n})(ScopePriority || {});\nclass ApiFactoryRegistry {\n  constructor() {\n    this.factories = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Register a new API factory. Returns true if the factory was added\n   * to the registry.\n   *\n   * A factory will not be added to the registry if there is already\n   * an existing factory with the same or higher priority.\n   */\n  register(scope, factory) {\n    const priority = ScopePriority[scope];\n    const existing = this.factories.get(factory.api.id);\n    if (existing && existing.priority >= priority) {\n      return false;\n    }\n    this.factories.set(factory.api.id, { priority, factory });\n    return true;\n  }\n  get(api) {\n    const tuple = this.factories.get(api.id);\n    if (!tuple) {\n      return void 0;\n    }\n    return tuple.factory;\n  }\n  getAllApis() {\n    const refs = /* @__PURE__ */ new Set();\n    for (const { factory } of this.factories.values()) {\n      refs.add(factory.api);\n    }\n    return refs;\n  }\n}\n\nfunction showLoginPopup(options) {\n  return new Promise((resolve, reject) => {\n    const width = options.width || 500;\n    const height = options.height || 700;\n    const left = window.screen.width / 2 - width / 2;\n    const top = window.screen.height / 2 - height / 2;\n    const popup = window.open(\n      options.url,\n      options.name,\n      `menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${width},height=${height},top=${top},left=${left}`\n    );\n    let targetOrigin = \"\";\n    if (!popup || typeof popup.closed === \"undefined\" || popup.closed) {\n      const error = new Error(\"Failed to open auth popup.\");\n      error.name = \"PopupRejectedError\";\n      reject(error);\n      return;\n    }\n    const messageListener = (event) => {\n      if (event.source !== popup) {\n        return;\n      }\n      if (event.origin !== options.origin) {\n        return;\n      }\n      const { data } = event;\n      if (data.type === \"config_info\") {\n        targetOrigin = data.targetOrigin;\n        return;\n      }\n      if (data.type !== \"authorization_response\") {\n        return;\n      }\n      const authResult = data;\n      if (\"error\" in authResult) {\n        const error = new Error(authResult.error.message);\n        error.name = authResult.error.name;\n        reject(error);\n      } else {\n        resolve(authResult.response);\n      }\n      done();\n    };\n    const intervalId = setInterval(() => {\n      if (popup.closed) {\n        const errMessage = `Login failed, ${targetOrigin && targetOrigin !== window.location.origin ? `Incorrect app origin, expected ${targetOrigin}` : \"popup was closed\"}`;\n        const error = new Error(errMessage);\n        error.name = \"PopupClosedError\";\n        reject(error);\n        done();\n      }\n    }, 100);\n    function done() {\n      window.removeEventListener(\"message\", messageListener);\n      clearInterval(intervalId);\n    }\n    window.addEventListener(\"message\", messageListener);\n  });\n}\n\nlet warned$1 = false;\nfunction defaultJoinScopes(scopes) {\n  return [...scopes].join(\" \");\n}\nclass DefaultAuthConnector {\n  constructor(options) {\n    var _a;\n    const {\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      joinScopes = defaultJoinScopes,\n      oauthRequestApi,\n      sessionTransform = (id) => id\n    } = options;\n    if (!warned$1 && !configApi) {\n      console.warn(\n        \"DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor.\"\n      );\n      warned$1 = true;\n    }\n    this.enableExperimentalRedirectFlow = configApi ? (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false : false;\n    this.authRequester = oauthRequestApi.createAuthRequester({\n      provider,\n      onAuthRequest: async (scopes) => {\n        if (!this.enableExperimentalRedirectFlow) {\n          return this.showPopup(scopes);\n        }\n        return this.executeRedirect(scopes);\n      }\n    });\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.joinScopesFunc = joinScopes;\n    this.sessionTransform = sessionTransform;\n  }\n  async createSession(options) {\n    if (options.instantPopup) {\n      if (this.enableExperimentalRedirectFlow) {\n        return this.executeRedirect(options.scopes);\n      }\n      return this.showPopup(options.scopes);\n    }\n    return this.authRequester(options.scopes);\n  }\n  async refreshSession(scopes) {\n    const res = await fetch(\n      await this.buildUrl(\"/refresh\", {\n        optional: true,\n        ...scopes && { scope: this.joinScopesFunc(scopes) }\n      }),\n      {\n        headers: {\n          \"x-requested-with\": \"XMLHttpRequest\"\n        },\n        credentials: \"include\"\n      }\n    ).catch((error) => {\n      throw new Error(`Auth refresh request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(\n        `Auth refresh request failed, ${res.statusText}`\n      );\n      error.status = res.status;\n      throw error;\n    }\n    const authInfo = await res.json();\n    if (authInfo.error) {\n      const error = new Error(authInfo.error.message);\n      if (authInfo.error.name) {\n        error.name = authInfo.error.name;\n      }\n      throw error;\n    }\n    return await this.sessionTransform(authInfo);\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async showPopup(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    const popupUrl = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      flow: \"popup\"\n    });\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return await this.sessionTransform(payload);\n  }\n  async executeRedirect(scopes) {\n    const scope = this.joinScopesFunc(scopes);\n    window.location.href = await this.buildUrl(\"/start\", {\n      scope,\n      origin: window.location.origin,\n      redirectUrl: window.location.href,\n      flow: \"redirect\"\n    });\n    return new Promise(() => {\n    });\n  }\n  async buildUrl(path, query) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    const queryString = this.buildQueryString({\n      ...query,\n      env: this.environment\n    });\n    return `${baseUrl}/${this.provider.id}${path}${queryString}`;\n  }\n  buildQueryString(query) {\n    if (!query) {\n      return \"\";\n    }\n    const queryString = Object.entries(query).map(([key, value]) => {\n      if (typeof value === \"string\") {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      } else if (value) {\n        return encodeURIComponent(key);\n      }\n      return void 0;\n    }).filter(Boolean).join(\"&\");\n    if (!queryString) {\n      return \"\";\n    }\n    return `?${queryString}`;\n  }\n}\n\nclass DirectAuthConnector {\n  constructor(options) {\n    const { discoveryApi, environment, provider } = options;\n    this.discoveryApi = discoveryApi;\n    this.environment = environment;\n    this.provider = provider;\n  }\n  async createSession() {\n    const popupUrl = await this.buildUrl(\"/start\");\n    const payload = await showLoginPopup({\n      url: popupUrl,\n      name: `${this.provider.title} Login`,\n      origin: new URL(popupUrl).origin,\n      width: 450,\n      height: 730\n    });\n    return {\n      ...payload,\n      id: payload.profile.email\n    };\n  }\n  async refreshSession() {\n  }\n  async removeSession() {\n    const res = await fetch(await this.buildUrl(\"/logout\"), {\n      method: \"POST\",\n      headers: {\n        \"x-requested-with\": \"XMLHttpRequest\"\n      },\n      credentials: \"include\"\n    }).catch((error) => {\n      throw new Error(`Logout request failed, ${error}`);\n    });\n    if (!res.ok) {\n      const error = new Error(`Logout request failed, ${res.statusText}`);\n      error.status = res.status;\n      throw error;\n    }\n  }\n  async buildUrl(path) {\n    const baseUrl = await this.discoveryApi.getBaseUrl(\"auth\");\n    return `${baseUrl}/${this.provider.id}${path}?env=${this.environment}`;\n  }\n}\n\nfunction hasScopes$1(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nclass SessionScopeHelper {\n  constructor(options) {\n    this.options = options;\n  }\n  sessionExistsAndHasScope(session, scopes) {\n    if (!session) {\n      return false;\n    }\n    if (!scopes) {\n      return true;\n    }\n    if (this.options.sessionScopes === void 0) {\n      return true;\n    }\n    const sessionScopes = this.options.sessionScopes(session);\n    return hasScopes$1(sessionScopes, scopes);\n  }\n  getExtendedScope(session, scopes) {\n    const newScope = new Set(this.options.defaultScopes);\n    if (session && this.options.sessionScopes !== void 0) {\n      const sessionScopes = this.options.sessionScopes(session);\n      for (const scope of sessionScopes) {\n        newScope.add(scope);\n      }\n    }\n    if (scopes) {\n      for (const scope of scopes) {\n        newScope.add(scope);\n      }\n    }\n    return newScope;\n  }\n}\n\nclass PublishSubject {\n  constructor() {\n    this.isClosed = false;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n    this.subscribers = /* @__PURE__ */ new Set();\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"PublishSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\nclass BehaviorSubject {\n  constructor(value) {\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.isClosed = false;\n    this.currentValue = value;\n    this.terminatingError = void 0;\n    this.observable = new ObservableImpl((subscriber) => {\n      if (this.isClosed) {\n        if (this.terminatingError) {\n          subscriber.error(this.terminatingError);\n        } else {\n          subscriber.complete();\n        }\n        return () => {\n        };\n      }\n      subscriber.next(this.currentValue);\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  [Symbol.observable]() {\n    return this;\n  }\n  get closed() {\n    return this.isClosed;\n  }\n  next(value) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.currentValue = value;\n    this.subscribers.forEach((subscriber) => subscriber.next(value));\n  }\n  error(error) {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.terminatingError = error;\n    this.subscribers.forEach((subscriber) => subscriber.error(error));\n  }\n  complete() {\n    if (this.isClosed) {\n      throw new Error(\"BehaviorSubject is closed\");\n    }\n    this.isClosed = true;\n    this.subscribers.forEach((subscriber) => subscriber.complete());\n  }\n  subscribe(onNext, onError, onComplete) {\n    const observer = typeof onNext === \"function\" ? {\n      next: onNext,\n      error: onError,\n      complete: onComplete\n    } : onNext;\n    return this.observable.subscribe(observer);\n  }\n}\n\nclass SessionStateTracker {\n  constructor() {\n    this.subject = new BehaviorSubject(\n      SessionState.SignedOut\n    );\n    this.signedIn = false;\n  }\n  setIsSignedIn(isSignedIn) {\n    if (this.signedIn !== isSignedIn) {\n      this.signedIn = isSignedIn;\n      this.subject.next(\n        this.signedIn ? SessionState.SignedIn : SessionState.SignedOut\n      );\n    }\n  }\n  sessionState$() {\n    return this.subject;\n  }\n}\n\nclass RefreshingAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const {\n      connector,\n      defaultScopes = /* @__PURE__ */ new Set(),\n      sessionScopes,\n      sessionShouldRefresh\n    } = options;\n    this.connector = connector;\n    this.sessionScopesFunc = sessionScopes;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(this.currentSession);\n      if (!shouldRefresh) {\n        return this.currentSession;\n      }\n      try {\n        const refreshedSession = await this.collapsedSessionRefresh(\n          options.scopes\n        );\n        const currentScopes = this.sessionScopesFunc(this.currentSession);\n        const refreshedScopes = this.sessionScopesFunc(refreshedSession);\n        if (hasScopes$1(refreshedScopes, currentScopes)) {\n          this.currentSession = refreshedSession;\n        }\n        return refreshedSession;\n      } catch (error) {\n        if (options.optional) {\n          return void 0;\n        }\n        throw error;\n      }\n    }\n    if (!this.currentSession && !options.instantPopup) {\n      try {\n        const newSession = await this.collapsedSessionRefresh(options.scopes);\n        this.currentSession = newSession;\n        return this.getSession(options);\n      } catch {\n      }\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  async removeSession() {\n    this.currentSession = void 0;\n    await this.connector.removeSession();\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n  async collapsedSessionRefresh(scopes) {\n    if (this.refreshPromise) {\n      return this.refreshPromise;\n    }\n    this.refreshPromise = this.connector.refreshSession(scopes);\n    try {\n      const session = await this.refreshPromise;\n      this.stateTracker.setIsSignedIn(true);\n      return session;\n    } finally {\n      delete this.refreshPromise;\n    }\n  }\n}\n\nclass StaticAuthSessionManager {\n  constructor(options) {\n    this.stateTracker = new SessionStateTracker();\n    const { connector, defaultScopes = /* @__PURE__ */ new Set(), sessionScopes } = options;\n    this.connector = connector;\n    this.helper = new SessionScopeHelper({ sessionScopes, defaultScopes });\n  }\n  setSession(session) {\n    this.currentSession = session;\n    this.stateTracker.setIsSignedIn(Boolean(session));\n  }\n  async getSession(options) {\n    if (this.helper.sessionExistsAndHasScope(this.currentSession, options.scopes)) {\n      return this.currentSession;\n    }\n    if (options.optional) {\n      return void 0;\n    }\n    this.currentSession = await this.connector.createSession({\n      ...options,\n      scopes: this.helper.getExtendedScope(this.currentSession, options.scopes)\n    });\n    this.stateTracker.setIsSignedIn(true);\n    return this.currentSession;\n  }\n  /**\n   * We don't call this.connector.removeSession here, since this session manager\n   * is intended to be static. As such there's no need to hit the remote logout\n   * endpoint - simply discarding the local session state when signing out is\n   * enough.\n   */\n  async removeSession() {\n    this.currentSession = void 0;\n    this.stateTracker.setIsSignedIn(false);\n  }\n  sessionState$() {\n    return this.stateTracker.sessionState$();\n  }\n}\n\nclass AuthSessionStore {\n  constructor(options) {\n    const {\n      manager,\n      storageKey,\n      schema,\n      sessionScopes,\n      sessionShouldRefresh = () => false\n    } = options;\n    this.manager = manager;\n    this.storageKey = storageKey;\n    this.schema = schema;\n    this.sessionShouldRefreshFunc = sessionShouldRefresh;\n    this.helper = new SessionScopeHelper({\n      sessionScopes,\n      defaultScopes: /* @__PURE__ */ new Set()\n    });\n  }\n  setSession(session) {\n    this.manager.setSession(session);\n    this.saveSession(session);\n  }\n  async getSession(options) {\n    const { scopes } = options;\n    const session = this.loadSession();\n    if (this.helper.sessionExistsAndHasScope(session, scopes)) {\n      const shouldRefresh = this.sessionShouldRefreshFunc(session);\n      if (!shouldRefresh) {\n        this.manager.setSession(session);\n        return session;\n      }\n    }\n    const newSession = await this.manager.getSession(options);\n    this.saveSession(newSession);\n    return newSession;\n  }\n  async removeSession() {\n    localStorage.removeItem(this.storageKey);\n    await this.manager.removeSession();\n  }\n  sessionState$() {\n    return this.manager.sessionState$();\n  }\n  loadSession() {\n    try {\n      const sessionJson = localStorage.getItem(this.storageKey);\n      if (sessionJson) {\n        const session = JSON.parse(sessionJson, (_key, value) => {\n          if ((value == null ? void 0 : value.__type) === \"Set\") {\n            return new Set(value.__value);\n          }\n          return value;\n        });\n        try {\n          return this.schema.parse(session);\n        } catch (e) {\n          console.log(\n            `Failed to load session from local storage because it did not conform to the expected schema, ${e}`\n          );\n          throw e;\n        }\n      }\n      return void 0;\n    } catch (error) {\n      localStorage.removeItem(this.storageKey);\n      return void 0;\n    }\n  }\n  saveSession(session) {\n    if (session === void 0) {\n      localStorage.removeItem(this.storageKey);\n      return;\n    }\n    try {\n      this.schema.parse(session);\n    } catch (e) {\n      console.warn(\n        `Failed to save session to local storage because it did not conform to the expected schema, ${e}`\n      );\n      return;\n    }\n    localStorage.setItem(\n      this.storageKey,\n      JSON.stringify(session, (_key, value) => {\n        if (value instanceof Set) {\n          return {\n            __type: \"Set\",\n            __value: Array.from(value)\n          };\n        }\n        return value;\n      })\n    );\n  }\n}\n\nconst DEFAULT_PROVIDER$a = {\n  id: \"oauth2\",\n  title: \"Your Identity Provider\",\n  icon: () => null\n};\nclass OAuth2 {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$a,\n      oauthRequestApi,\n      defaultScopes = [],\n      scopeTransform = (x) => x\n    } = options;\n    const connector = new DefaultAuthConnector({\n      configApi,\n      discoveryApi,\n      environment,\n      provider,\n      oauthRequestApi,\n      sessionTransform(res) {\n        return {\n          ...res,\n          providerInfo: {\n            idToken: res.providerInfo.idToken,\n            accessToken: res.providerInfo.accessToken,\n            scopes: OAuth2.normalizeScopes(\n              scopeTransform,\n              res.providerInfo.scope\n            ),\n            expiresAt: new Date(\n              Date.now() + res.providerInfo.expiresInSeconds * 1e3\n            )\n          }\n        };\n      }\n    });\n    const sessionManager = new RefreshingAuthSessionManager({\n      connector,\n      defaultScopes: new Set(defaultScopes),\n      sessionScopes: (session) => session.providerInfo.scopes,\n      sessionShouldRefresh: (session) => {\n        const expiresInSec = (session.providerInfo.expiresAt.getTime() - Date.now()) / 1e3;\n        return expiresInSec < 60 * 5;\n      }\n    });\n    return new OAuth2({ sessionManager, scopeTransform });\n  }\n  constructor(options) {\n    this.sessionManager = options.sessionManager;\n    this.scopeTransform = options.scopeTransform;\n  }\n  async signIn() {\n    await this.getAccessToken();\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async getAccessToken(scope, options) {\n    var _a;\n    const normalizedScopes = OAuth2.normalizeScopes(this.scopeTransform, scope);\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: normalizedScopes\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.accessToken) != null ? _a : \"\";\n  }\n  async getIdToken(options = {}) {\n    var _a;\n    const session = await this.sessionManager.getSession({\n      ...options,\n      scopes: /* @__PURE__ */ new Set([\"openid\"])\n    });\n    return (_a = session == null ? void 0 : session.providerInfo.idToken) != null ? _a : \"\";\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n  static normalizeScopes(scopeTransform, scopes) {\n    if (!scopes) {\n      return /* @__PURE__ */ new Set();\n    }\n    const scopeList = Array.isArray(scopes) ? scopes : scopes.split(/[\\s|,]/).filter(Boolean);\n    return new Set(scopeTransform(scopeList));\n  }\n}\n\nconst DEFAULT_PROVIDER$9 = {\n  id: \"github\",\n  title: \"GitHub\",\n  icon: () => null\n};\nclass GithubAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$9,\n      oauthRequestApi,\n      defaultScopes = [\"read:user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$8 = {\n  id: \"gitlab\",\n  title: \"GitLab\",\n  icon: () => null\n};\nclass GitlabAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$8,\n      oauthRequestApi,\n      defaultScopes = [\"read_user\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$7 = {\n  id: \"google\",\n  title: \"Google\",\n  icon: () => null\n};\nconst SCOPE_PREFIX$1 = \"https://www.googleapis.com/auth/\";\nclass GoogleAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$7,\n      defaultScopes = [\n        \"openid\",\n        `${SCOPE_PREFIX$1}userinfo.email`,\n        `${SCOPE_PREFIX$1}userinfo.profile`\n      ]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (scope === \"openid\") {\n            return scope;\n          }\n          if (scope === \"profile\" || scope === \"email\") {\n            return `${SCOPE_PREFIX$1}userinfo.${scope}`;\n          }\n          if (scope.startsWith(SCOPE_PREFIX$1)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX$1}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$6 = {\n  id: \"okta\",\n  title: \"Okta\",\n  icon: () => null\n};\nconst OKTA_OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst OKTA_SCOPE_PREFIX = \"okta.\";\nclass OktaAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$6,\n      oauthRequestApi,\n      defaultScopes = [\"openid\", \"email\", \"profile\", \"offline_access\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes,\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OKTA_OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(OKTA_SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${OKTA_SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst samlSessionSchema = z.object({\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULT_PROVIDER$5 = {\n  id: \"saml\",\n  title: \"SAML\",\n  icon: () => null\n};\nclass SamlAuth {\n  constructor(sessionManager) {\n    this.sessionManager = sessionManager;\n  }\n  static create(options) {\n    const {\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$5\n    } = options;\n    const connector = new DirectAuthConnector({\n      discoveryApi,\n      environment,\n      provider\n    });\n    const sessionManager = new StaticAuthSessionManager({\n      connector\n    });\n    const authSessionStore = new AuthSessionStore({\n      manager: sessionManager,\n      storageKey: `${provider.id}Session`,\n      schema: samlSessionSchema\n    });\n    return new SamlAuth(authSessionStore);\n  }\n  sessionState$() {\n    return this.sessionManager.sessionState$();\n  }\n  async signIn() {\n    await this.getBackstageIdentity({});\n  }\n  async signOut() {\n    await this.sessionManager.removeSession();\n  }\n  async getBackstageIdentity(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.backstageIdentity;\n  }\n  async getProfile(options = {}) {\n    const session = await this.sessionManager.getSession(options);\n    return session == null ? void 0 : session.profile;\n  }\n}\n\nconst DEFAULT_PROVIDER$4 = {\n  id: \"microsoft\",\n  title: \"Microsoft\",\n  icon: () => null\n};\nconst _MicrosoftAuth = class {\n  static create(options) {\n    return new _MicrosoftAuth(options);\n  }\n  constructor(options) {\n    const {\n      configApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$4,\n      oauthRequestApi,\n      discoveryApi,\n      defaultScopes = [\n        \"openid\",\n        \"offline_access\",\n        \"profile\",\n        \"email\",\n        \"User.Read\"\n      ],\n      scopeTransform = (scopes) => scopes.concat(\"offline_access\")\n    } = options;\n    this.configApi = configApi;\n    this.environment = environment;\n    this.provider = provider;\n    this.oauthRequestApi = oauthRequestApi;\n    this.discoveryApi = discoveryApi;\n    this.scopeTransform = scopeTransform;\n    this.oauth2 = {\n      [_MicrosoftAuth.MicrosoftGraphID]: OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform,\n        defaultScopes\n      })\n    };\n  }\n  microsoftGraph() {\n    return this.oauth2[_MicrosoftAuth.MicrosoftGraphID];\n  }\n  static resourceForScopes(scope) {\n    var _a;\n    const audiences = [\n      ...new Set(\n        scope.split(\" \").map(_MicrosoftAuth.resourceForScope).filter((aud) => aud !== \"openid\")\n      )\n    ];\n    if (audiences.length > 1) {\n      return Promise.reject(\n        new Error(\n          `Requested access token with scopes from multiple Azure resources: ${audiences.join(\n            \", \"\n          )}. Access tokens can only have a single audience.`\n        )\n      );\n    }\n    const audience = (_a = audiences[0]) != null ? _a : _MicrosoftAuth.MicrosoftGraphID;\n    return Promise.resolve(audience);\n  }\n  static resourceForScope(scope) {\n    var _a;\n    const groups = (_a = scope.match(/^(?<resourceURI>.*)\\/(?<scp>[^\\/]*)$/)) == null ? void 0 : _a.groups;\n    if (groups) {\n      const { resourceURI } = groups;\n      const aud = resourceURI.replace(/^api:\\/\\//, \"\");\n      return aud;\n    }\n    switch (scope) {\n      case \"email\":\n      case \"openid\":\n      case \"offline_access\":\n      case \"profile\": {\n        return \"openid\";\n      }\n      default:\n        return _MicrosoftAuth.MicrosoftGraphID;\n    }\n  }\n  async getAccessToken(scope, options) {\n    const aud = scope === void 0 ? _MicrosoftAuth.MicrosoftGraphID : await _MicrosoftAuth.resourceForScopes(\n      Array.isArray(scope) ? scope.join(\" \") : scope\n    );\n    if (!(aud in this.oauth2)) {\n      this.oauth2[aud] = OAuth2.create({\n        configApi: this.configApi,\n        discoveryApi: this.discoveryApi,\n        oauthRequestApi: this.oauthRequestApi,\n        provider: this.provider,\n        environment: this.environment,\n        scopeTransform: this.scopeTransform\n      });\n    }\n    return this.oauth2[aud].getAccessToken(scope, options);\n  }\n  getIdToken(options) {\n    return this.microsoftGraph().getIdToken(options);\n  }\n  getProfile(options) {\n    return this.microsoftGraph().getProfile(options);\n  }\n  getBackstageIdentity(options) {\n    return this.microsoftGraph().getBackstageIdentity(options);\n  }\n  signIn() {\n    return this.microsoftGraph().signIn();\n  }\n  signOut() {\n    return this.microsoftGraph().signOut();\n  }\n  sessionState$() {\n    return this.microsoftGraph().sessionState$();\n  }\n};\nlet MicrosoftAuth = _MicrosoftAuth;\nMicrosoftAuth.MicrosoftGraphID = \"00000003-0000-0000-c000-000000000000\";\n\nconst DEFAULT_PROVIDER$3 = {\n  id: \"onelogin\",\n  title: \"onelogin\",\n  icon: () => null\n};\nconst OIDC_SCOPES = /* @__PURE__ */ new Set([\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"phone\",\n  \"address\",\n  \"groups\",\n  \"offline_access\"\n]);\nconst SCOPE_PREFIX = \"onelogin.\";\nclass OneLoginAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$3,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n      scopeTransform(scopes) {\n        return scopes.map((scope) => {\n          if (OIDC_SCOPES.has(scope)) {\n            return scope;\n          }\n          if (scope.startsWith(SCOPE_PREFIX)) {\n            return scope;\n          }\n          return `${SCOPE_PREFIX}${scope}`;\n        });\n      }\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$2 = {\n  id: \"bitbucket\",\n  title: \"Bitbucket\",\n  icon: () => null\n};\nclass BitbucketAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$2,\n      oauthRequestApi,\n      defaultScopes = [\"team\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER$1 = {\n  id: \"bitbucketServer\",\n  title: \"Bitbucket Server\",\n  icon: () => null\n};\nclass BitbucketServerAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER$1,\n      oauthRequestApi,\n      defaultScopes = [\"PROJECT_ADMIN\"]\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment,\n      defaultScopes\n    });\n  }\n}\n\nconst DEFAULT_PROVIDER = {\n  id: \"atlassian\",\n  title: \"Atlassian\",\n  icon: () => null\n};\nclass AtlassianAuth {\n  static create(options) {\n    const {\n      configApi,\n      discoveryApi,\n      environment = \"development\",\n      provider = DEFAULT_PROVIDER,\n      oauthRequestApi\n    } = options;\n    return OAuth2.create({\n      configApi,\n      discoveryApi,\n      oauthRequestApi,\n      provider,\n      environment\n    });\n  }\n}\n\nclass AlertApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(alert) {\n    this.subject.next(alert);\n  }\n  alert$() {\n    return this.subject;\n  }\n}\n\nclass MultipleAnalyticsApi {\n  constructor(actualApis) {\n    this.actualApis = actualApis;\n  }\n  /**\n   * Create an AnalyticsApi implementation from an array of concrete\n   * implementations.\n   *\n   * @example\n   *\n   * ```jsx\n   * MultipleAnalyticsApi.fromApis([\n   *   SomeAnalyticsApi.fromConfig(configApi),\n   *   new CustomAnalyticsApi(),\n   * ]);\n   * ```\n   */\n  static fromApis(actualApis) {\n    return new MultipleAnalyticsApi(actualApis);\n  }\n  /**\n   * Forward the event to all configured analytics API implementations.\n   */\n  captureEvent(event) {\n    this.actualApis.forEach((analyticsApi) => {\n      try {\n        analyticsApi.captureEvent(event);\n      } catch {\n      }\n    });\n  }\n}\n\nclass NoOpAnalyticsApi {\n  captureEvent(_event) {\n  }\n}\n\nconst STORAGE_KEY = \"theme\";\nclass AppThemeSelector {\n  constructor(themes) {\n    this.themes = themes;\n    this.subject = new BehaviorSubject(void 0);\n  }\n  static createWithStorage(themes) {\n    var _a;\n    const selector = new AppThemeSelector(themes);\n    if (!window.localStorage) {\n      return selector;\n    }\n    const initialThemeId = (_a = window.localStorage.getItem(STORAGE_KEY)) != null ? _a : void 0;\n    selector.setActiveThemeId(initialThemeId);\n    selector.activeThemeId$().subscribe((themeId) => {\n      if (themeId) {\n        window.localStorage.setItem(STORAGE_KEY, themeId);\n      } else {\n        window.localStorage.removeItem(STORAGE_KEY);\n      }\n    });\n    window.addEventListener(\"storage\", (event) => {\n      var _a2;\n      if (event.key === STORAGE_KEY) {\n        const themeId = (_a2 = localStorage.getItem(STORAGE_KEY)) != null ? _a2 : void 0;\n        selector.setActiveThemeId(themeId);\n      }\n    });\n    return selector;\n  }\n  getInstalledThemes() {\n    return this.themes.slice();\n  }\n  activeThemeId$() {\n    return this.subject;\n  }\n  getActiveThemeId() {\n    return this.activeThemeId;\n  }\n  setActiveThemeId(themeId) {\n    this.activeThemeId = themeId;\n    this.subject.next(themeId);\n  }\n}\n\nconst ERROR_PREFIX = \"Invalid discovery URL pattern,\";\nclass UrlPatternDiscovery {\n  constructor(parts) {\n    this.parts = parts;\n  }\n  /**\n   * Creates a new UrlPatternDiscovery given a template. The the only\n   * interpolation done for the template is to replace instances of `{{pluginId}}`\n   * with the ID of the plugin being requested.\n   *\n   * Example pattern: `http://localhost:7007/api/{{ pluginId }}`\n   */\n  static compile(pattern) {\n    const parts = pattern.split(/\\{\\{\\s*pluginId\\s*\\}\\}/);\n    const urlStr = parts.join(\"pluginId\");\n    let url;\n    try {\n      url = new URL(urlStr);\n    } catch {\n      throw new Error(`${ERROR_PREFIX} URL '${urlStr}' is invalid`);\n    }\n    if (url.hash) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a hash`);\n    }\n    if (url.search) {\n      throw new Error(`${ERROR_PREFIX} URL must not have a query`);\n    }\n    if (urlStr.endsWith(\"/\")) {\n      throw new Error(`${ERROR_PREFIX} URL must not end with a slash`);\n    }\n    return new UrlPatternDiscovery(parts);\n  }\n  async getBaseUrl(pluginId) {\n    return this.parts.join(encodeURIComponent(pluginId));\n  }\n}\n\nclass FrontendHostDiscovery {\n  constructor(endpoints, defaultEndpoint) {\n    this.endpoints = endpoints;\n    this.defaultEndpoint = defaultEndpoint;\n  }\n  /**\n   * Creates a new FrontendHostDiscovery discovery instance by reading\n   * the external target URL from the `discovery.endpoints` config section.\n   *\n   * eg.\n   * ```yaml\n   * discovery:\n   *  endpoints:\n   *    - target: https://internal.example.com/internal-catalog\n   *      plugins: [catalog]\n   *    - target: https://internal.example.com/secure/api/{{pluginId}}\n   *      plugins: [auth, permissions]\n   *    - target:\n   *        internal: https://internal.example.com/search\n   *        external: https://example.com/search\n   *      plugins: [search]\n   * ```\n   *\n   * If a plugin is not declared in the config, the discovery will fall back to using the baseUrl with\n   * the provided `pathPattern` appended. The default path pattern is `\"/api/{{ pluginId }}\"`.\n   */\n  static fromConfig(config, options) {\n    var _a, _b;\n    const path = (_a = options == null ? void 0 : options.pathPattern) != null ? _a : \"/api/{{ pluginId }}\";\n    const baseUrl = config.getString(\"backend.baseUrl\");\n    const endpoints = (_b = config.getOptionalConfigArray(\"discovery.endpoints\")) == null ? void 0 : _b.flatMap((e) => {\n      const target = typeof e.get(\"target\") === \"object\" ? e.getString(\"target.external\") : e.getString(\"target\");\n      const discovery = UrlPatternDiscovery.compile(target);\n      return e.getStringArray(\"plugins\").map((pluginId) => [pluginId, discovery]);\n    });\n    return new FrontendHostDiscovery(\n      new Map(endpoints),\n      UrlPatternDiscovery.compile(`${baseUrl}${path}`)\n    );\n  }\n  async getBaseUrl(pluginId) {\n    const endpoint = this.endpoints.get(pluginId);\n    if (endpoint) {\n      return endpoint.getBaseUrl(pluginId);\n    }\n    return this.defaultEndpoint.getBaseUrl(pluginId);\n  }\n}\n\nclass ErrorAlerter {\n  constructor(alertApi, errorApi) {\n    this.alertApi = alertApi;\n    this.errorApi = errorApi;\n  }\n  post(error, context) {\n    if (!(context == null ? void 0 : context.hidden)) {\n      this.alertApi.post({ message: error.message, severity: \"error\" });\n    }\n    return this.errorApi.post(error, context);\n  }\n  error$() {\n    return this.errorApi.error$();\n  }\n}\n\nclass ErrorApiForwarder {\n  constructor() {\n    this.subject = new PublishSubject();\n  }\n  post(error, context) {\n    this.subject.next({ error, context });\n  }\n  error$() {\n    return this.subject;\n  }\n}\n\nclass UnhandledErrorForwarder {\n  /**\n   * Add event listener, such that unhandled errors can be forwarded using an given `ErrorApi` instance\n   */\n  static forward(errorApi, errorContext) {\n    window.addEventListener(\n      \"unhandledrejection\",\n      (e) => {\n        errorApi.post(e.reason, errorContext);\n      }\n    );\n  }\n}\n\nfunction validateFlagName(name) {\n  if (name.length < 3) {\n    throw new Error(\n      `The '${name}' feature flag must have a minimum length of three characters.`\n    );\n  }\n  if (name.length > 150) {\n    throw new Error(\n      `The '${name}' feature flag must not exceed 150 characters.`\n    );\n  }\n  if (!name.match(/^[a-z]+[a-z0-9-]+$/)) {\n    throw new Error(\n      `The '${name}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`\n    );\n  }\n}\nclass LocalStorageFeatureFlags {\n  constructor() {\n    this.registeredFeatureFlags = [];\n  }\n  registerFlag(flag) {\n    validateFlagName(flag.name);\n    this.registeredFeatureFlags.push(flag);\n  }\n  getRegisteredFlags() {\n    return this.registeredFeatureFlags.slice();\n  }\n  isActive(name) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    return this.flags.get(name) === FeatureFlagState.Active;\n  }\n  save(options) {\n    if (!this.flags) {\n      this.flags = this.load();\n    }\n    if (!options.merge) {\n      this.flags.clear();\n    }\n    for (const [name, state] of Object.entries(options.states)) {\n      this.flags.set(name, state);\n    }\n    const enabled = Array.from(this.flags.entries()).filter(\n      ([, state]) => state === FeatureFlagState.Active\n    );\n    window.localStorage.setItem(\n      \"featureFlags\",\n      JSON.stringify(Object.fromEntries(enabled))\n    );\n  }\n  load() {\n    try {\n      const jsonStr = window.localStorage.getItem(\"featureFlags\");\n      if (!jsonStr) {\n        return /* @__PURE__ */ new Map();\n      }\n      const json = JSON.parse(jsonStr);\n      if (typeof json !== \"object\" || json === null || Array.isArray(json)) {\n        return /* @__PURE__ */ new Map();\n      }\n      const entries = Object.entries(json).filter(([name, value]) => {\n        validateFlagName(name);\n        return value === FeatureFlagState.Active;\n      });\n      return new Map(entries);\n    } catch {\n      return /* @__PURE__ */ new Map();\n    }\n  }\n}\n\nfunction createFetchApi(options) {\n  var _a;\n  let result = options.baseImplementation || global.fetch;\n  const middleware = [(_a = options.middleware) != null ? _a : []].flat().reverse();\n  for (const m of middleware) {\n    result = m.apply(result);\n  }\n  return {\n    fetch: result\n  };\n}\n\nclass IdentityAuthInjectorFetchMiddleware {\n  constructor(identityApi, allowUrl, headerName, headerValue) {\n    this.identityApi = identityApi;\n    this.allowUrl = allowUrl;\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n  }\n  static create(options) {\n    var _a, _b;\n    const matcher = buildMatcher(options);\n    const headerName = ((_a = options.header) == null ? void 0 : _a.name) || \"authorization\";\n    const headerValue = ((_b = options.header) == null ? void 0 : _b.value) || ((token) => `Bearer ${token}`);\n    return new IdentityAuthInjectorFetchMiddleware(\n      options.identityApi,\n      matcher,\n      headerName,\n      headerValue\n    );\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const { token } = await this.identityApi.getCredentials();\n      if (request.headers.get(this.headerName) || typeof token !== \"string\" || !token || !this.allowUrl(request.url)) {\n        return next(input, init);\n      }\n      request.headers.set(this.headerName, this.headerValue(token));\n      return next(request);\n    };\n  }\n}\nfunction buildMatcher(options) {\n  if (options.allowUrl) {\n    return options.allowUrl;\n  } else if (options.urlPrefixAllowlist) {\n    return buildPrefixMatcher(options.urlPrefixAllowlist);\n  } else if (options.config) {\n    return buildPrefixMatcher([options.config.getString(\"backend.baseUrl\")]);\n  }\n  return () => false;\n}\nfunction buildPrefixMatcher(prefixes) {\n  const trimmedPrefixes = prefixes.map((prefix) => prefix.replace(/\\/$/, \"\"));\n  return (url) => trimmedPrefixes.some(\n    (prefix) => url === prefix || url.startsWith(`${prefix}/`)\n  );\n}\n\nfunction join(left, right) {\n  if (!right || right === \"/\") {\n    return left;\n  }\n  return `${left.replace(/\\/$/, \"\")}/${right.replace(/^\\//, \"\")}`;\n}\nclass PluginProtocolResolverFetchMiddleware {\n  constructor(discoveryApi) {\n    this.discoveryApi = discoveryApi;\n  }\n  apply(next) {\n    return async (input, init) => {\n      const request = new Request(input, init);\n      const prefix = \"plugin://\";\n      if (!request.url.startsWith(prefix)) {\n        return next(input, init);\n      }\n      const { hostname, pathname, search, hash, username, password } = new URL(\n        `http://${request.url.substring(prefix.length)}`\n      );\n      let base = await this.discoveryApi.getBaseUrl(hostname);\n      if (username || password) {\n        const baseUrl = new URL(base);\n        const authority = `${username}${password ? `:${password}` : \"\"}@`;\n        base = `${baseUrl.protocol}//${authority}${baseUrl.host}${baseUrl.pathname}`;\n      }\n      const target = `${join(base, pathname)}${search}${hash}`;\n      return next(\n        target,\n        typeof input === \"string\" || isUrl(input) ? init : input\n      );\n    };\n  }\n}\nfunction isUrl(a) {\n  return typeof a === \"object\" && (a == null ? void 0 : a.constructor) === URL;\n}\n\nclass FetchMiddlewares {\n  /**\n   * Handles translation from `plugin://` URLs to concrete http(s) URLs based on\n   * the discovery API.\n   *\n   * @remarks\n   *\n   * If the request is for `plugin://catalog/entities?filter=x=y`, the discovery\n   * API will be queried for `'catalog'`. If it returned\n   * `https://backstage.example.net/api/catalog`, the resulting query would be\n   * `https://backstage.example.net/api/catalog/entities?filter=x=y`.\n   *\n   * If the incoming URL protocol was not `plugin`, the request is just passed\n   * through verbatim to the underlying implementation.\n   */\n  static resolvePluginProtocol(options) {\n    return new PluginProtocolResolverFetchMiddleware(options.discoveryApi);\n  }\n  /**\n   * Injects a Backstage token header when the user is signed in.\n   *\n   * @remarks\n   *\n   * Per default, an `Authorization: Bearer <token>` is generated. This can be\n   * customized using the `header` option.\n   *\n   * The header injection only happens on allowlisted URLs. Per default, if the\n   * `config` option is passed in, the `backend.baseUrl` is allowlisted, unless\n   * the `urlPrefixAllowlist` or `allowUrl` options are passed in, in which case\n   * they take precedence. If you pass in neither config nor an\n   * allowlist/callback, the middleware will have no effect since effectively no\n   * request will match the (nonexistent) rules.\n   */\n  static injectIdentityAuth(options) {\n    return IdentityAuthInjectorFetchMiddleware.create(options);\n  }\n  constructor() {\n  }\n}\n\nfunction hasScopes(searched, searchFor) {\n  for (const scope of searchFor) {\n    if (!searched.has(scope)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction joinScopes(scopes, ...moreScopess) {\n  const result = new Set(scopes);\n  for (const moreScopes of moreScopess) {\n    for (const scope of moreScopes) {\n      result.add(scope);\n    }\n  }\n  return result;\n}\nclass OAuthPendingRequests {\n  constructor() {\n    this.requests = [];\n    this.subject = new BehaviorSubject(\n      this.getCurrentPending()\n    );\n  }\n  request(scopes) {\n    return new Promise((resolve, reject) => {\n      this.requests.push({ scopes, resolve, reject });\n      this.subject.next(this.getCurrentPending());\n    });\n  }\n  resolve(scopes, result) {\n    this.requests = this.requests.filter((request) => {\n      if (hasScopes(scopes, request.scopes)) {\n        request.resolve(result);\n        return false;\n      }\n      return true;\n    });\n    this.subject.next(this.getCurrentPending());\n  }\n  reject(error) {\n    this.requests.forEach((request) => request.reject(error));\n    this.requests = [];\n    this.subject.next(this.getCurrentPending());\n  }\n  pending() {\n    return this.subject;\n  }\n  getCurrentPending() {\n    const currentScopes = this.requests.length === 0 ? void 0 : this.requests.slice(1).reduce(\n      (acc, current) => joinScopes(acc, current.scopes),\n      this.requests[0].scopes\n    );\n    return {\n      scopes: currentScopes,\n      resolve: (value) => {\n        if (currentScopes) {\n          this.resolve(currentScopes, value);\n        }\n      },\n      reject: (reason) => {\n        if (currentScopes) {\n          this.reject(reason);\n        }\n      }\n    };\n  }\n}\n\nclass OAuthRequestManager {\n  constructor() {\n    this.subject = new BehaviorSubject([]);\n    this.currentRequests = [];\n    this.handlerCount = 0;\n  }\n  createAuthRequester(options) {\n    const handler = new OAuthPendingRequests();\n    const index = this.handlerCount;\n    this.handlerCount++;\n    handler.pending().subscribe({\n      next: (scopeRequest) => {\n        const newRequests = this.currentRequests.slice();\n        const request = this.makeAuthRequest(scopeRequest, options);\n        if (!request) {\n          delete newRequests[index];\n        } else {\n          newRequests[index] = request;\n        }\n        this.currentRequests = newRequests;\n        this.subject.next(newRequests.filter(Boolean));\n      }\n    });\n    return (scopes) => {\n      return handler.request(scopes);\n    };\n  }\n  // Converts the pending request and popup options into a popup request that we can forward to subscribers.\n  makeAuthRequest(request, options) {\n    const { scopes } = request;\n    if (!scopes) {\n      return void 0;\n    }\n    return {\n      provider: options.provider,\n      trigger: async () => {\n        const result = await options.onAuthRequest(scopes);\n        request.resolve(result);\n      },\n      reject: () => {\n        const error = new Error(\"Login failed, rejected by user\");\n        error.name = \"RejectedError\";\n        request.reject(error);\n      }\n    };\n  }\n  authRequest$() {\n    return this.subject;\n  }\n}\n\nconst buckets = /* @__PURE__ */ new Map();\nconst _WebStorage = class {\n  constructor(namespace, errorApi) {\n    this.namespace = namespace;\n    this.errorApi = errorApi;\n    this.subscribers = /* @__PURE__ */ new Set();\n    this.observable = new ObservableImpl((subscriber) => {\n      this.subscribers.add(subscriber);\n      return () => {\n        this.subscribers.delete(subscriber);\n      };\n    });\n  }\n  static create(options) {\n    var _a;\n    return new _WebStorage((_a = options.namespace) != null ? _a : \"\", options.errorApi);\n  }\n  static addStorageEventListener() {\n    window.addEventListener(\"storage\", (event) => {\n      var _a;\n      for (const [bucketPath, webStorage] of buckets.entries()) {\n        if ((_a = event.key) == null ? void 0 : _a.startsWith(bucketPath)) {\n          webStorage.handleStorageChange(event.key);\n        }\n      }\n    });\n  }\n  get(key) {\n    return this.snapshot(key).value;\n  }\n  snapshot(key) {\n    let value = void 0;\n    let presence = \"absent\";\n    try {\n      const item = localStorage.getItem(this.getKeyName(key));\n      if (item) {\n        value = JSON.parse(item, (_key, val) => {\n          if (typeof val === \"object\" && val !== null) {\n            Object.freeze(val);\n          }\n          return val;\n        });\n        presence = \"present\";\n      }\n    } catch (e) {\n      this.errorApi.post(\n        new Error(`Error when parsing JSON config from storage for: ${key}`)\n      );\n    }\n    return { key, value, presence };\n  }\n  forBucket(name) {\n    const bucketPath = `${this.namespace}/${name}`;\n    if (!buckets.has(bucketPath)) {\n      buckets.set(bucketPath, new _WebStorage(bucketPath, this.errorApi));\n    }\n    return buckets.get(bucketPath);\n  }\n  async set(key, data) {\n    localStorage.setItem(this.getKeyName(key), JSON.stringify(data));\n    this.notifyChanges(key);\n  }\n  async remove(key) {\n    localStorage.removeItem(this.getKeyName(key));\n    this.notifyChanges(key);\n  }\n  observe$(key) {\n    if (!_WebStorage.hasSubscribed) {\n      _WebStorage.addStorageEventListener();\n      _WebStorage.hasSubscribed = true;\n    }\n    return this.observable.filter(({ key: messageKey }) => messageKey === key);\n  }\n  handleStorageChange(eventKey) {\n    if (!(eventKey == null ? void 0 : eventKey.startsWith(this.namespace))) {\n      return;\n    }\n    const trimmedKey = eventKey == null ? void 0 : eventKey.slice(`${this.namespace}/`.length);\n    if (!trimmedKey.includes(\"/\")) {\n      this.notifyChanges(decodeURIComponent(trimmedKey));\n    }\n  }\n  getKeyName(key) {\n    return `${this.namespace}/${encodeURIComponent(key)}`;\n  }\n  notifyChanges(key) {\n    const snapshot = this.snapshot(key);\n    for (const subscription of this.subscribers) {\n      subscription.next(snapshot);\n    }\n  }\n};\nlet WebStorage = _WebStorage;\nWebStorage.hasSubscribed = false;\n\nconst InternalAppContext = createContext(void 0);\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\n\nconst getExtensionContext = (pathname, routes) => {\n  var _a;\n  try {\n    const matches = matchRoutes(routes, { pathname });\n    const routeMatch = matches == null ? void 0 : matches.filter((match) => {\n      var _a2;\n      return ((_a2 = match == null ? void 0 : match.route.routeRefs) == null ? void 0 : _a2.size) > 0;\n    }).pop();\n    const routeObject = routeMatch == null ? void 0 : routeMatch.route;\n    if (!routeObject) {\n      return void 0;\n    }\n    let routeRef;\n    if (routeObject.routeRefs.size === 1) {\n      routeRef = routeObject.routeRefs.values().next().value;\n    }\n    const params = Object.entries(\n      (routeMatch == null ? void 0 : routeMatch.params) || {}\n    ).reduce((acc, [key, value]) => {\n      if (value !== void 0) {\n        acc[key] = value;\n      }\n      return acc;\n    }, {});\n    return {\n      extension: \"App\",\n      pluginId: ((_a = routeObject.plugin) == null ? void 0 : _a.getId()) || \"root\",\n      ...routeRef ? { routeRef: routeRef.id } : {},\n      params\n    };\n  } catch {\n    return void 0;\n  }\n};\nconst TrackNavigation = ({\n  pathname,\n  search,\n  hash,\n  attributes\n}) => {\n  const analytics = useAnalytics();\n  useEffect(() => {\n    analytics.captureEvent(\"navigate\", `${pathname}${search}${hash}`, {\n      attributes\n    });\n  }, [analytics, pathname, search, hash, attributes]);\n  return null;\n};\nconst RouteTracker = ({\n  routeObjects\n}) => {\n  const { pathname, search, hash } = useLocation();\n  const { params, ...attributes } = getExtensionContext(\n    pathname,\n    routeObjects\n  ) || { params: {} };\n  return /* @__PURE__ */ React.createElement(AnalyticsContext, { attributes }, /* @__PURE__ */ React.createElement(\n    TrackNavigation,\n    {\n      pathname,\n      search,\n      hash,\n      attributes: params\n    }\n  ));\n};\n\nfunction getBasePath(configApi) {\n  if (!isReactRouterBeta()) {\n    return \"\";\n  }\n  return readBasePath(configApi);\n}\nfunction readBasePath(configApi) {\n  var _a;\n  let { pathname } = new URL(\n    (_a = configApi.getOptionalString(\"app.baseUrl\")) != null ? _a : \"/\",\n    \"http://sample.dev\"\n    // baseUrl can be specified as just a path\n  );\n  pathname = pathname.replace(/\\/*$/, \"\");\n  return pathname;\n}\nfunction SignInPageWrapper({\n  component: Component,\n  appIdentityProxy,\n  children\n}) {\n  const [identityApi, setIdentityApi] = useState();\n  const configApi = useApi(configApiRef);\n  const basePath = getBasePath(configApi);\n  if (!identityApi) {\n    return /* @__PURE__ */ React.createElement(Component, { onSignInSuccess: setIdentityApi });\n  }\n  appIdentityProxy.setTarget(identityApi, {\n    signOutTargetUrl: basePath || \"/\"\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n}\nfunction AppRouter(props) {\n  const { Router: RouterComponent, SignInPage: SignInPageComponent } = useApp().getComponents();\n  const configApi = useApi(configApiRef);\n  const basePath = readBasePath(configApi);\n  const mountPath = `${basePath}/*`;\n  const internalAppContext = useContext(InternalAppContext);\n  if (!internalAppContext) {\n    throw new Error(\"AppRouter must be rendered within the AppProvider\");\n  }\n  const { routeObjects, appIdentityProxy } = internalAppContext;\n  if (!SignInPageComponent) {\n    appIdentityProxy.setTarget(\n      {\n        getUserId: () => \"guest\",\n        getIdToken: async () => void 0,\n        getProfile: () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getProfileInfo: async () => ({\n          email: \"guest@example.com\",\n          displayName: \"Guest\"\n        }),\n        getBackstageIdentity: async () => ({\n          type: \"user\",\n          userEntityRef: \"user:default/guest\",\n          ownershipEntityRefs: [\"user:default/guest\"]\n        }),\n        getCredentials: async () => ({}),\n        signOut: async () => {\n        }\n      },\n      { signOutTargetUrl: basePath || \"/\" }\n    );\n    if (isReactRouterBeta()) {\n      return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) })));\n    }\n    return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), props.children);\n  }\n  if (isReactRouterBeta()) {\n    return /* @__PURE__ */ React.createElement(RouterComponent, null, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n      SignInPageWrapper,\n      {\n        component: SignInPageComponent,\n        appIdentityProxy\n      },\n      /* @__PURE__ */ React.createElement(Routes, null, /* @__PURE__ */ React.createElement(Route, { path: mountPath, element: /* @__PURE__ */ React.createElement(React.Fragment, null, props.children) }))\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(RouterComponent, { basename: basePath }, /* @__PURE__ */ React.createElement(RouteTracker, { routeObjects }), /* @__PURE__ */ React.createElement(\n    SignInPageWrapper,\n    {\n      component: SignInPageComponent,\n      appIdentityProxy\n    },\n    props.children\n  ));\n}\n\nfunction traverseElementTree(options) {\n  const collectors = {};\n  for (const name in options.collectors) {\n    if (options.collectors.hasOwnProperty(name)) {\n      collectors[name] = options.collectors[name]();\n    }\n  }\n  const queue = [\n    {\n      node: Children.toArray(options.root),\n      parent: void 0,\n      contexts: {}\n    }\n  ];\n  while (queue.length !== 0) {\n    const { node, parent, contexts } = queue.shift();\n    Children.forEach(node, (element) => {\n      if (!isValidElement(element)) {\n        return;\n      }\n      const nextContexts = {};\n      for (const name in collectors) {\n        if (collectors.hasOwnProperty(name)) {\n          const collector = collectors[name];\n          nextContexts[name] = collector.visit(\n            collector.accumulator,\n            element,\n            parent,\n            contexts[name]\n          );\n        }\n      }\n      for (const discoverer of options.discoverers) {\n        const children = discoverer(element);\n        if (children) {\n          queue.push({\n            node: children,\n            parent: element,\n            contexts: nextContexts\n          });\n        }\n      }\n    });\n  }\n  return Object.fromEntries(\n    Object.entries(collectors).map(([name, c]) => [name, c.accumulator])\n  );\n}\nfunction createCollector(accumulatorFactory, visit) {\n  return () => ({ accumulator: accumulatorFactory(), visit });\n}\nfunction childDiscoverer(element) {\n  var _a;\n  return (_a = element.props) == null ? void 0 : _a.children;\n}\nfunction routeElementDiscoverer(element) {\n  var _a, _b, _c;\n  if (((_a = element.props) == null ? void 0 : _a.path) && ((_b = element.props) == null ? void 0 : _b.element)) {\n    return (_c = element.props) == null ? void 0 : _c.element;\n  }\n  return void 0;\n}\n\nconst pluginCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    const plugin = getComponentData(node, \"core.plugin\");\n    if (plugin) {\n      acc.add(plugin);\n    }\n  }\n);\n\nconst FeatureFlagged = (props) => {\n  const { children } = props;\n  const featureFlagApi = useApi(featureFlagsApiRef);\n  const isEnabled = \"with\" in props ? featureFlagApi.isActive(props.with) : !featureFlagApi.isActive(props.without);\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, isEnabled ? children : null);\n};\nattachComponentData(FeatureFlagged, \"core.featureFlagged\", true);\n\nconst MATCH_ALL_ROUTE = {\n  caseSensitive: false,\n  path: \"*\",\n  element: \"match-all\",\n  // These elements aren't used, so we add in a bit of debug information\n  routeRefs: /* @__PURE__ */ new Set()\n};\nfunction stringifyNode(node) {\n  var _a, _b;\n  const anyNode = node;\n  if (anyNode == null ? void 0 : anyNode.type) {\n    return (_b = (_a = anyNode.type.displayName) != null ? _a : anyNode.type.name) != null ? _b : String(anyNode.type);\n  }\n  return String(anyNode);\n}\nfunction collectSubTree(node, entries = new Array()) {\n  Children.forEach(node, (element) => {\n    if (!isValidElement(element)) {\n      return;\n    }\n    const routeRef = getComponentData(element, \"core.mountPoint\");\n    if (routeRef) {\n      const plugin = getComponentData(element, \"core.plugin\");\n      entries.push({ routeRef, plugin });\n    }\n    collectSubTree(element.props.children, entries);\n  });\n  return entries;\n}\nconst routingV2Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (ctx == null ? void 0 : ctx.isElementAncestor) {\n      return ctx;\n    }\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return { ...ctx, isElementAncestor: true };\n    }\n    const pathProp = (_a = node.props) == null ? void 0 : _a.path;\n    const mountPoint = getComponentData(node, \"core.mountPoint\");\n    if (mountPoint && pathProp) {\n      throw new Error(\n        `Path property may not be set directly on a routable extension \"${stringifyNode(\n          node\n        )}\"`\n      );\n    }\n    const parentChildren = (_c = (_b = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _b.children) != null ? _c : acc.objects;\n    if (pathProp !== void 0) {\n      if (typeof pathProp !== \"string\") {\n        throw new Error(\n          `Element path must be a string at \"${stringifyNode(node)}\"`\n        );\n      }\n      const path = pathProp.startsWith(\"/\") ? pathProp.slice(1) : pathProp;\n      const elementProp = node.props.element;\n      if (getComponentData(node, \"core.gatherMountPoints\")) {\n        if (elementProp) {\n          throw new Error(\n            `Mount point gatherers may not have an element prop \"${stringifyNode(\n              node\n            )}\"`\n          );\n        }\n        const newObj = {\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          caseSensitive: Boolean((_d = node.props) == null ? void 0 : _d.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugin: void 0\n        };\n        parentChildren.push(newObj);\n        return {\n          obj: newObj,\n          gatherPath: path,\n          routeRef: ctx == null ? void 0 : ctx.routeRef,\n          gatherRouteRef: ctx == null ? void 0 : ctx.routeRef\n        };\n      }\n      if (elementProp) {\n        const [extension, ...others] = collectSubTree(elementProp);\n        if (others.length > 0) {\n          throw new Error(\n            `Route element with path \"${pathProp}\" may not contain multiple routable extensions`\n          );\n        }\n        if (!extension) {\n          return ctx;\n        }\n        const { routeRef, plugin } = extension;\n        const newObj = {\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          caseSensitive: Boolean((_e = node.props) == null ? void 0 : _e.caseSensitive),\n          children: [MATCH_ALL_ROUTE],\n          plugin\n        };\n        parentChildren.push(newObj);\n        acc.paths.set(routeRef, path);\n        acc.parents.set(routeRef, ctx == null ? void 0 : ctx.routeRef);\n        return {\n          obj: newObj,\n          routeRef: routeRef != null ? routeRef : ctx == null ? void 0 : ctx.routeRef,\n          gatherPath: path,\n          gatherRouteRef: ctx == null ? void 0 : ctx.gatherRouteRef\n        };\n      }\n    }\n    if (mountPoint) {\n      if ((ctx == null ? void 0 : ctx.gatherPath) === void 0) {\n        throw new Error(\n          `Routable extension \"${stringifyNode(\n            node\n          )}\" with mount point \"${mountPoint}\" must be assigned a path`\n        );\n      }\n      (_f = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _f.routeRefs.add(mountPoint);\n      acc.paths.set(mountPoint, ctx.gatherPath);\n      acc.parents.set(mountPoint, ctx == null ? void 0 : ctx.gatherRouteRef);\n      return {\n        ...ctx,\n        routeRef: mountPoint\n      };\n    }\n    return ctx;\n  }\n);\nconst routingV1Collector = createCollector(\n  () => ({\n    paths: /* @__PURE__ */ new Map(),\n    parents: /* @__PURE__ */ new Map(),\n    objects: new Array()\n  }),\n  (acc, node, parent, ctx) => {\n    var _a, _b, _c, _d, _e;\n    if ((parent == null ? void 0 : parent.props.element) === node) {\n      return ctx;\n    }\n    let currentObj = ctx == null ? void 0 : ctx.obj;\n    let currentParentRouteRef = ctx == null ? void 0 : ctx.routeRef;\n    let sticky = ctx == null ? void 0 : ctx.sticky;\n    const path = (_a = node.props) == null ? void 0 : _a.path;\n    const parentChildren = (_b = currentObj == null ? void 0 : currentObj.children) != null ? _b : acc.objects;\n    const caseSensitive = Boolean((_c = node.props) == null ? void 0 : _c.caseSensitive);\n    let currentCtxPath = ctx == null ? void 0 : ctx.path;\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      currentCtxPath = path;\n    }\n    const element = (_d = node.props) == null ? void 0 : _d.element;\n    let routeRef = getComponentData(node, \"core.mountPoint\");\n    if (!routeRef && isValidElement(element)) {\n      routeRef = getComponentData(element, \"core.mountPoint\");\n    }\n    if (routeRef) {\n      let routePath = path;\n      if (currentCtxPath) {\n        if (routePath) {\n          currentCtxPath = void 0;\n        } else {\n          routePath = currentCtxPath;\n        }\n      }\n      if (!routePath) {\n        throw new Error(\"Mounted routable extension must have a path\");\n      }\n      acc.paths.set(routeRef, routePath);\n      if (currentParentRouteRef && sticky) {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        if (path) {\n          currentParentRouteRef = routeRef;\n          sticky = false;\n        }\n      } else {\n        acc.parents.set(routeRef, currentParentRouteRef);\n        currentParentRouteRef = routeRef;\n      }\n      if (path) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"mounted\",\n          routeRefs: /* @__PURE__ */ new Set([routeRef]),\n          children: [MATCH_ALL_ROUTE],\n          plugin: getComponentData(\n            node.props.element,\n            \"core.plugin\"\n          )\n        };\n        parentChildren.push(currentObj);\n      } else {\n        currentObj == null ? void 0 : currentObj.routeRefs.add(routeRef);\n      }\n    }\n    if (getComponentData(node, \"core.gatherMountPoints\")) {\n      sticky = true;\n    }\n    const isGatherer = getComponentData(\n      node,\n      \"core.gatherMountPoints\"\n    );\n    if (isGatherer) {\n      if (!path) {\n        throw new Error(\"Mount point gatherer must have a path\");\n      }\n      if (!routeRef) {\n        currentObj = {\n          caseSensitive,\n          path,\n          element: \"gathered\",\n          routeRefs: /* @__PURE__ */ new Set(),\n          children: [MATCH_ALL_ROUTE],\n          plugin: (_e = ctx == null ? void 0 : ctx.obj) == null ? void 0 : _e.plugin\n        };\n        parentChildren.push(currentObj);\n      }\n    }\n    return {\n      obj: currentObj,\n      path: currentCtxPath,\n      routeRef: currentParentRouteRef,\n      sticky\n    };\n  }\n);\nconst featureFlagCollector = createCollector(\n  () => /* @__PURE__ */ new Set(),\n  (acc, node) => {\n    if (node.type === FeatureFlagged) {\n      const props = node.props;\n      acc.add(\"with\" in props ? props.with : props.without);\n    }\n  }\n);\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\nfunction isRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"absolute\";\n}\nfunction isSubRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"sub\";\n}\nfunction isExternalRouteRef(routeRef) {\n  return routeRef[routeRefType] === \"external\";\n}\n\nfunction joinPaths(...paths) {\n  const normalized = paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n  if (normalized !== \"/\" && normalized.endsWith(\"/\")) {\n    return normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction resolveTargetRef(anyRouteRef, routePaths, routeBindings) {\n  let targetRef;\n  let subRoutePath = \"\";\n  if (isRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef;\n  } else if (isSubRouteRef(anyRouteRef)) {\n    targetRef = anyRouteRef.parent;\n    subRoutePath = anyRouteRef.path;\n  } else if (isExternalRouteRef(anyRouteRef)) {\n    const resolvedRoute = routeBindings.get(anyRouteRef);\n    if (!resolvedRoute) {\n      return [void 0, \"\"];\n    }\n    if (isRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute;\n    } else if (isSubRouteRef(resolvedRoute)) {\n      targetRef = resolvedRoute.parent;\n      subRoutePath = resolvedRoute.path;\n    } else {\n      throw new Error(\n        `ExternalRouteRef was bound to invalid target, ${resolvedRoute}`\n      );\n    }\n  } else if (anyRouteRef[routeRefType]) {\n    throw new Error(\n      `Unknown or invalid route ref type, ${anyRouteRef[routeRefType]}`\n    );\n  } else {\n    throw new Error(`Unknown object passed to useRouteRef, got ${anyRouteRef}`);\n  }\n  if (!targetRef) {\n    return [void 0, \"\"];\n  }\n  const resolvedPath = routePaths.get(targetRef);\n  if (resolvedPath === void 0) {\n    return [void 0, \"\"];\n  }\n  const targetPath = joinPaths(resolvedPath, subRoutePath);\n  return [targetRef, targetPath];\n}\nfunction resolveBasePath(targetRef, sourceLocation, routePaths, routeParents, routeObjects) {\n  var _a;\n  const match = (_a = matchRoutes(routeObjects, sourceLocation)) != null ? _a : [];\n  const refDiffList = Array();\n  let matchIndex = -1;\n  for (let targetSearchRef = targetRef; targetSearchRef; targetSearchRef = routeParents.get(targetSearchRef)) {\n    matchIndex = match.findIndex(\n      (m) => m.route.routeRefs.has(targetSearchRef)\n    );\n    if (matchIndex !== -1) {\n      break;\n    }\n    refDiffList.unshift(targetSearchRef);\n  }\n  if (refDiffList.length === 0) {\n    matchIndex -= 1;\n  }\n  const parentPath = matchIndex === -1 ? \"\" : match[matchIndex].pathname;\n  const diffPaths = refDiffList.slice(0, -1).map((ref) => {\n    const path = routePaths.get(ref);\n    if (path === void 0) {\n      throw new Error(`No path for ${ref}`);\n    }\n    if (path.includes(\":\")) {\n      throw new Error(\n        `Cannot route to ${targetRef} with parent ${ref} as it has parameters`\n      );\n    }\n    return path;\n  });\n  return `${joinPaths(parentPath, ...diffPaths)}/`;\n}\nclass RouteResolver {\n  constructor(routePaths, routeParents, routeObjects, routeBindings, appBasePath) {\n    this.routePaths = routePaths;\n    this.routeParents = routeParents;\n    this.routeObjects = routeObjects;\n    this.routeBindings = routeBindings;\n    this.appBasePath = appBasePath;\n  }\n  resolve(anyRouteRef, sourceLocation) {\n    const [targetRef, targetPath] = resolveTargetRef(\n      anyRouteRef,\n      this.routePaths,\n      this.routeBindings\n    );\n    if (!targetRef) {\n      return void 0;\n    }\n    let relativeSourceLocation;\n    if (typeof sourceLocation === \"string\") {\n      relativeSourceLocation = this.trimPath(sourceLocation);\n    } else if (sourceLocation.pathname) {\n      relativeSourceLocation = {\n        ...sourceLocation,\n        pathname: this.trimPath(sourceLocation.pathname)\n      };\n    } else {\n      relativeSourceLocation = sourceLocation;\n    }\n    const basePath = this.appBasePath + resolveBasePath(\n      targetRef,\n      relativeSourceLocation,\n      this.routePaths,\n      this.routeParents,\n      this.routeObjects\n    );\n    const routeFunc = (...[params]) => {\n      return joinPaths(basePath, generatePath(targetPath, params));\n    };\n    return routeFunc;\n  }\n  trimPath(targetPath) {\n    if (!targetPath) {\n      return targetPath;\n    }\n    if (targetPath.startsWith(this.appBasePath)) {\n      return targetPath.slice(this.appBasePath.length);\n    }\n    return targetPath;\n  }\n}\n\nconst RoutingContext = createVersionedContext(\n  \"routing-context\"\n);\nconst RoutingProvider = ({\n  routePaths,\n  routeParents,\n  routeObjects,\n  routeBindings,\n  basePath = \"\",\n  children\n}) => {\n  const resolver = new RouteResolver(\n    routePaths,\n    routeParents,\n    routeObjects,\n    routeBindings,\n    basePath\n  );\n  const versionedValue = createVersionedValueMap({ 1: resolver });\n  return /* @__PURE__ */ React.createElement(RoutingContext.Provider, { value: versionedValue }, children);\n};\n\nfunction validateRouteParameters(routePaths, routeParents) {\n  const notLeafRoutes = new Set(routeParents.values());\n  notLeafRoutes.delete(void 0);\n  for (const route of routeParents.keys()) {\n    if (notLeafRoutes.has(route)) {\n      continue;\n    }\n    let currentRouteRef = route;\n    let fullPath = \"\";\n    while (currentRouteRef) {\n      const path = routePaths.get(currentRouteRef);\n      if (path === void 0) {\n        throw new Error(`No path for ${currentRouteRef}`);\n      }\n      fullPath = joinPaths(path, fullPath);\n      currentRouteRef = routeParents.get(currentRouteRef);\n    }\n    const params = fullPath.match(/:(\\w+)/g);\n    if (params) {\n      for (let j = 0; j < params.length; j++) {\n        for (let i = j + 1; i < params.length; i++) {\n          if (params[i] === params[j]) {\n            throw new Error(\n              `Parameter ${params[i]} is duplicated in path ${fullPath}`\n            );\n          }\n        }\n      }\n    }\n  }\n}\nfunction validateRouteBindings(routeBindings, plugins) {\n  for (const plugin of plugins) {\n    if (!plugin.externalRoutes) {\n      continue;\n    }\n    for (const [name, externalRouteRef] of Object.entries(\n      plugin.externalRoutes\n    )) {\n      if (externalRouteRef.optional) {\n        continue;\n      }\n      if (!routeBindings.has(externalRouteRef)) {\n        throw new Error(\n          `External route '${name}' of the '${plugin.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`\n        );\n      }\n    }\n  }\n}\n\nconst AppContext = createVersionedContext(\"app-context\");\nconst AppContextProvider = ({\n  appContext,\n  children\n}) => {\n  const versionedValue = createVersionedValueMap({ 1: appContext });\n  return /* @__PURE__ */ React.createElement(AppContext.Provider, { value: versionedValue, children });\n};\n\nfunction mkError(thing) {\n  return new Error(\n    `Tried to access IdentityApi ${thing} before app was loaded`\n  );\n}\nfunction logDeprecation(thing) {\n  console.warn(\n    `WARNING: Call to ${thing} is deprecated and will break in the future`\n  );\n}\nclass AppIdentityProxy {\n  constructor() {\n    this.resolveTarget = () => {\n    };\n    this.signOutTargetUrl = \"/\";\n    this.waitForTarget = new Promise((resolve) => {\n      this.resolveTarget = resolve;\n    });\n  }\n  // This is called by the app manager once the sign-in page provides us with an implementation\n  setTarget(identityApi, targetOptions) {\n    this.target = identityApi;\n    this.signOutTargetUrl = targetOptions.signOutTargetUrl;\n    this.resolveTarget(identityApi);\n  }\n  getUserId() {\n    if (!this.target) {\n      throw mkError(\"getUserId\");\n    }\n    if (!this.target.getUserId) {\n      throw new Error(\"IdentityApi does not implement getUserId\");\n    }\n    logDeprecation(\"getUserId\");\n    return this.target.getUserId();\n  }\n  getProfile() {\n    if (!this.target) {\n      throw mkError(\"getProfile\");\n    }\n    if (!this.target.getProfile) {\n      throw new Error(\"IdentityApi does not implement getProfile\");\n    }\n    logDeprecation(\"getProfile\");\n    return this.target.getProfile();\n  }\n  async getProfileInfo() {\n    return this.waitForTarget.then((target) => target.getProfileInfo());\n  }\n  async getBackstageIdentity() {\n    const identity = await this.waitForTarget.then(\n      (target) => target.getBackstageIdentity()\n    );\n    if (!identity.userEntityRef.match(/^.*:.*\\/.*$/)) {\n      console.warn(\n        `WARNING: The App IdentityApi provided an invalid userEntityRef, '${identity.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`\n      );\n    }\n    return identity;\n  }\n  async getCredentials() {\n    return this.waitForTarget.then((target) => target.getCredentials());\n  }\n  async getIdToken() {\n    return this.waitForTarget.then((target) => {\n      if (!target.getIdToken) {\n        throw new Error(\"IdentityApi does not implement getIdToken\");\n      }\n      logDeprecation(\"getIdToken\");\n      return target.getIdToken();\n    });\n  }\n  async signOut() {\n    await this.waitForTarget.then((target) => target.signOut());\n    window.location.href = this.signOutTargetUrl;\n  }\n}\n\nfunction resolveTheme(themeId, shouldPreferDark, themes) {\n  if (themeId !== void 0) {\n    const selectedTheme = themes.find((theme) => theme.id === themeId);\n    if (selectedTheme) {\n      return selectedTheme;\n    }\n  }\n  if (shouldPreferDark) {\n    const darkTheme = themes.find((theme) => theme.variant === \"dark\");\n    if (darkTheme) {\n      return darkTheme;\n    }\n  }\n  const lightTheme = themes.find((theme) => theme.variant === \"light\");\n  if (lightTheme) {\n    return lightTheme;\n  }\n  return themes[0];\n}\nconst useShouldPreferDarkTheme = () => {\n  const mediaQuery = useMemo(\n    () => window.matchMedia(\"(prefers-color-scheme: dark)\"),\n    []\n  );\n  const [shouldPreferDark, setPrefersDark] = useState(mediaQuery.matches);\n  useEffect(() => {\n    const listener = (event) => {\n      setPrefersDark(event.matches);\n    };\n    mediaQuery.addListener(listener);\n    return () => {\n      mediaQuery.removeListener(listener);\n    };\n  }, [mediaQuery]);\n  return shouldPreferDark;\n};\nfunction AppThemeProvider({ children }) {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId()\n  );\n  const shouldPreferDark = Boolean(window.matchMedia) ? useShouldPreferDarkTheme() : false;\n  const appTheme = resolveTheme(\n    themeId,\n    shouldPreferDark,\n    appThemeApi.getInstalledThemes()\n  );\n  if (!appTheme) {\n    throw new Error(\"App has no themes\");\n  }\n  return /* @__PURE__ */ React.createElement(appTheme.Provider, { children });\n}\n\nconst defaultConfigLoader = async (runtimeConfigJson = \"__APP_INJECTED_RUNTIME_CONFIG__\") => {\n  const appConfig = process.env.APP_CONFIG;\n  if (!appConfig) {\n    throw new Error(\"No static configuration provided\");\n  }\n  if (!Array.isArray(appConfig)) {\n    throw new Error(\"Static configuration has invalid format\");\n  }\n  const configs = appConfig.slice();\n  if (runtimeConfigJson !== \"__app_injected_runtime_config__\".toLocaleUpperCase(\"en-US\")) {\n    try {\n      const data = JSON.parse(runtimeConfigJson);\n      if (Array.isArray(data)) {\n        configs.push(...data);\n      } else {\n        configs.push({ data, context: \"env\" });\n      }\n    } catch (error) {\n      throw new Error(`Failed to load runtime configuration, ${error}`);\n    }\n  }\n  const windowAppConfig = window.__APP_CONFIG__;\n  if (windowAppConfig) {\n    configs.push({\n      context: \"window\",\n      data: windowAppConfig\n    });\n  }\n  return configs;\n};\n\nclass ApiRegistryBuilder {\n  constructor() {\n    this.apis = [];\n  }\n  add(api, impl) {\n    this.apis.push([api.id, impl]);\n    return impl;\n  }\n  build() {\n    return new ApiRegistry(new Map(this.apis));\n  }\n}\nclass ApiRegistry {\n  constructor(apis) {\n    this.apis = apis;\n  }\n  static builder() {\n    return new ApiRegistryBuilder();\n  }\n  /**\n   * Creates a new ApiRegistry with a list of API implementations.\n   *\n   * @param apis - A list of pairs mapping an ApiRef to its respective implementation\n   */\n  static from(apis) {\n    return new ApiRegistry(new Map(apis.map(([api, impl]) => [api.id, impl])));\n  }\n  /**\n   * Creates a new ApiRegistry with a single API implementation.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  static with(api, impl) {\n    return new ApiRegistry(/* @__PURE__ */ new Map([[api.id, impl]]));\n  }\n  /**\n   * Returns a new ApiRegistry with the provided API added to the existing ones.\n   *\n   * @param api - ApiRef for the API to add\n   * @param impl - Implementation of the API to add\n   */\n  with(api, impl) {\n    return new ApiRegistry(new Map([...this.apis, [api.id, impl]]));\n  }\n  get(api) {\n    return this.apis.get(api.id);\n  }\n}\n\nfunction resolveRouteBindings(bindRoutes) {\n  const result = /* @__PURE__ */ new Map();\n  if (bindRoutes) {\n    const bind = (externalRoutes, targetRoutes) => {\n      for (const [key, value] of Object.entries(targetRoutes)) {\n        const externalRoute = externalRoutes[key];\n        if (!externalRoute) {\n          throw new Error(`Key ${key} is not an existing external route`);\n        }\n        if (!value && !externalRoute.optional) {\n          throw new Error(\n            `External route ${key} is required but was undefined`\n          );\n        }\n        if (value) {\n          result.set(externalRoute, value);\n        }\n      }\n    };\n    bindRoutes({ bind });\n  }\n  return result;\n}\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _getProviderCalled;\nfunction createLocalBaseUrl(fullUrl) {\n  const url = new URL(fullUrl);\n  url.protocol = document.location.protocol;\n  url.hostname = document.location.hostname;\n  url.port = document.location.port;\n  return url.toString().replace(/\\/$/, \"\");\n}\nfunction useConfigLoader(configLoader, components, appThemeApi) {\n  var _a;\n  const hasConfig = Boolean(configLoader);\n  const config = useAsync(configLoader || (() => Promise.resolve([])));\n  let noConfigNode = void 0;\n  if (hasConfig && config.loading) {\n    const { Progress } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (config.error) {\n    const { BootErrorPage } = components;\n    noConfigNode = /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-config\", error: config.error });\n  }\n  const { ThemeProvider = AppThemeProvider } = components;\n  if (noConfigNode) {\n    return {\n      node: /* @__PURE__ */ React.createElement(ApiProvider, { apis: ApiRegistry.with(appThemeApiRef, appThemeApi) }, /* @__PURE__ */ React.createElement(ThemeProvider, null, noConfigNode))\n    };\n  }\n  let configReader;\n  if ((_a = config.value) == null ? void 0 : _a.length) {\n    const urlConfigReader = ConfigReader.fromConfigs(config.value);\n    const appBaseUrl = urlConfigReader.getOptionalString(\"app.baseUrl\");\n    const backendBaseUrl = urlConfigReader.getOptionalString(\"backend.baseUrl\");\n    let configs = config.value;\n    const relativeResolverConfig = {\n      data: {},\n      context: \"relative-resolver\"\n    };\n    if (appBaseUrl && backendBaseUrl) {\n      const appOrigin = new URL(appBaseUrl).origin;\n      const backendOrigin = new URL(backendBaseUrl).origin;\n      if (appOrigin === backendOrigin) {\n        const newBackendBaseUrl = createLocalBaseUrl(backendBaseUrl);\n        if (backendBaseUrl !== newBackendBaseUrl) {\n          relativeResolverConfig.data.backend = { baseUrl: newBackendBaseUrl };\n        }\n      }\n    }\n    if (appBaseUrl) {\n      const newAppBaseUrl = createLocalBaseUrl(appBaseUrl);\n      if (appBaseUrl !== newAppBaseUrl) {\n        relativeResolverConfig.data.app = { baseUrl: newAppBaseUrl };\n      }\n    }\n    if (Object.keys(relativeResolverConfig.data).length) {\n      configs = configs.concat([relativeResolverConfig]);\n    }\n    configReader = ConfigReader.fromConfigs(configs);\n  } else {\n    configReader = ConfigReader.fromConfigs([]);\n  }\n  return { api: configReader };\n}\nclass AppContextImpl {\n  constructor(app) {\n    this.app = app;\n  }\n  getPlugins() {\n    return this.app.getPlugins();\n  }\n  getSystemIcon(key) {\n    return this.app.getSystemIcon(key);\n  }\n  getSystemIcons() {\n    return this.app.getSystemIcons();\n  }\n  getComponents() {\n    return this.app.getComponents();\n  }\n}\nclass AppManager {\n  constructor(options) {\n    this.appIdentityProxy = new AppIdentityProxy();\n    __privateAdd(this, _getProviderCalled, false);\n    var _a, _b, _c, _d, _e;\n    this.apis = (_a = options.apis) != null ? _a : [];\n    this.icons = options.icons;\n    this.plugins = new Set((_b = options.plugins) != null ? _b : []);\n    this.featureFlags = (_c = options.featureFlags) != null ? _c : [];\n    this.components = options.components;\n    this.themes = options.themes;\n    this.configLoader = (_d = options.configLoader) != null ? _d : defaultConfigLoader;\n    this.defaultApis = (_e = options.defaultApis) != null ? _e : [];\n    this.bindRoutes = options.bindRoutes;\n    this.apiFactoryRegistry = new ApiFactoryRegistry();\n  }\n  getPlugins() {\n    return Array.from(this.plugins);\n  }\n  getSystemIcon(key) {\n    return this.icons[key];\n  }\n  getSystemIcons() {\n    return this.icons;\n  }\n  getComponents() {\n    return this.components;\n  }\n  createRoot(element) {\n    const AppProvider = this.getProvider();\n    const AppRoot = () => {\n      return /* @__PURE__ */ React.createElement(AppProvider, null, element);\n    };\n    return AppRoot;\n  }\n  getProvider() {\n    if (__privateGet(this, _getProviderCalled)) {\n      throw new Error(\n        \"app.getProvider() or app.createRoot() has already been called, and can only be called once\"\n      );\n    }\n    __privateSet(this, _getProviderCalled, true);\n    const appContext = new AppContextImpl(this);\n    let routesHaveBeenValidated = false;\n    const Provider = ({ children }) => {\n      const needsFeatureFlagRegistrationRef = useRef(true);\n      const appThemeApi = useMemo(\n        () => AppThemeSelector.createWithStorage(this.themes),\n        []\n      );\n      const { routing, featureFlags, routeBindings } = useMemo(() => {\n        const result = traverseElementTree({\n          root: children,\n          discoverers: [childDiscoverer, routeElementDiscoverer],\n          collectors: {\n            routing: isReactRouterBeta() ? routingV1Collector : routingV2Collector,\n            collectedPlugins: pluginCollector,\n            featureFlags: featureFlagCollector\n          }\n        });\n        result.collectedPlugins.forEach((plugin) => this.plugins.add(plugin));\n        this.verifyPlugins(this.plugins);\n        this.getApiHolder();\n        return {\n          ...result,\n          routeBindings: resolveRouteBindings(this.bindRoutes)\n        };\n      }, [children]);\n      if (!routesHaveBeenValidated) {\n        routesHaveBeenValidated = true;\n        validateRouteParameters(routing.paths, routing.parents);\n        validateRouteBindings(\n          routeBindings,\n          this.plugins\n        );\n      }\n      const loadedConfig = useConfigLoader(\n        this.configLoader,\n        this.components,\n        appThemeApi\n      );\n      const hasConfigApi = \"api\" in loadedConfig;\n      if (hasConfigApi) {\n        const { api } = loadedConfig;\n        this.configApi = api;\n      }\n      if (\"node\" in loadedConfig) {\n        return loadedConfig.node;\n      }\n      if (hasConfigApi && needsFeatureFlagRegistrationRef.current) {\n        needsFeatureFlagRegistrationRef.current = false;\n        const featureFlagsApi = this.getApiHolder().get(featureFlagsApiRef);\n        if (featureFlagsApi) {\n          for (const flag of this.featureFlags) {\n            featureFlagsApi.registerFlag({\n              ...flag,\n              pluginId: \"\"\n            });\n          }\n          for (const plugin of this.plugins.values()) {\n            if (\"getFeatureFlags\" in plugin) {\n              for (const flag of plugin.getFeatureFlags()) {\n                featureFlagsApi.registerFlag({\n                  name: flag.name,\n                  pluginId: plugin.getId()\n                });\n              }\n            } else {\n              for (const output of plugin.output()) {\n                if (output.type === \"feature-flag\") {\n                  featureFlagsApi.registerFlag({\n                    name: output.name,\n                    pluginId: plugin.getId()\n                  });\n                }\n              }\n            }\n          }\n          const registeredFlags = featureFlagsApi.getRegisteredFlags();\n          const flagNames = new Set(registeredFlags.map((f) => f.name));\n          for (const name of featureFlags) {\n            if (!flagNames.has(name)) {\n              featureFlagsApi.registerFlag({ name, pluginId: \"\" });\n            }\n          }\n        }\n      }\n      const { ThemeProvider = AppThemeProvider } = this.components;\n      return /* @__PURE__ */ React.createElement(ApiProvider, { apis: this.getApiHolder() }, /* @__PURE__ */ React.createElement(AppContextProvider, { appContext }, /* @__PURE__ */ React.createElement(ThemeProvider, null, /* @__PURE__ */ React.createElement(\n        RoutingProvider,\n        {\n          routePaths: routing.paths,\n          routeParents: routing.parents,\n          routeObjects: routing.objects,\n          routeBindings,\n          basePath: getBasePath(loadedConfig.api)\n        },\n        /* @__PURE__ */ React.createElement(\n          InternalAppContext.Provider,\n          {\n            value: {\n              routeObjects: routing.objects,\n              appIdentityProxy: this.appIdentityProxy\n            }\n          },\n          children\n        )\n      ))));\n    };\n    return Provider;\n  }\n  getRouter() {\n    return AppRouter;\n  }\n  getApiHolder() {\n    if (this.apiHolder) {\n      for (const plugin of this.plugins) {\n        for (const factory of plugin.getApis()) {\n          if (!this.apiFactoryRegistry.get(factory.api)) {\n            this.apiFactoryRegistry.register(\"default\", factory);\n          }\n        }\n      }\n      ApiResolver.validateFactories(\n        this.apiFactoryRegistry,\n        this.apiFactoryRegistry.getAllApis()\n      );\n      return this.apiHolder;\n    }\n    this.apiFactoryRegistry.register(\"static\", {\n      api: appThemeApiRef,\n      deps: {},\n      factory: () => AppThemeSelector.createWithStorage(this.themes)\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: configApiRef,\n      deps: {},\n      factory: () => {\n        if (!this.configApi) {\n          throw new Error(\n            \"Tried to access config API before config was loaded\"\n          );\n        }\n        return this.configApi;\n      }\n    });\n    this.apiFactoryRegistry.register(\"static\", {\n      api: identityApiRef,\n      deps: {},\n      factory: () => this.appIdentityProxy\n    });\n    this.apiFactoryRegistry.register(\"default\", {\n      api: featureFlagsApiRef,\n      deps: {},\n      factory: () => new LocalStorageFeatureFlags()\n    });\n    for (const factory of this.defaultApis) {\n      this.apiFactoryRegistry.register(\"default\", factory);\n    }\n    for (const plugin of this.plugins) {\n      for (const factory of plugin.getApis()) {\n        if (!this.apiFactoryRegistry.register(\"default\", factory)) {\n          throw new Error(\n            `Plugin ${plugin.getId()} tried to register duplicate or forbidden API factory for ${factory.api}`\n          );\n        }\n      }\n    }\n    for (const factory of this.apis) {\n      if (!this.apiFactoryRegistry.register(\"app\", factory)) {\n        throw new Error(\n          `Duplicate or forbidden API factory for ${factory.api} in app`\n        );\n      }\n    }\n    ApiResolver.validateFactories(\n      this.apiFactoryRegistry,\n      this.apiFactoryRegistry.getAllApis()\n    );\n    this.apiHolder = new ApiResolver(this.apiFactoryRegistry);\n    return this.apiHolder;\n  }\n  verifyPlugins(plugins) {\n    const pluginIds = /* @__PURE__ */ new Set();\n    for (const plugin of plugins) {\n      const id = plugin.getId();\n      if (pluginIds.has(id)) {\n        throw new Error(`Duplicate plugin found '${id}'`);\n      }\n      pluginIds.add(id);\n    }\n  }\n}\n_getProviderCalled = new WeakMap();\n\nfunction createSpecializedApp(options) {\n  return new AppManager(options);\n}\n\nlet warned = false;\nconst FlatRoutes = (props) => {\n  const app = useApp();\n  const { NotFoundErrorPage } = app.getComponents();\n  const isBeta = useMemo(() => isReactRouterBeta(), []);\n  const routes = useElementFilter(\n    props.children,\n    (elements) => elements.getElements().flatMap((child) => {\n      var _a;\n      let path = child.props.path;\n      if (path === \"\") {\n        return [];\n      }\n      path = (_a = path == null ? void 0 : path.replace(/\\/\\*$/, \"\")) != null ? _a : \"/\";\n      let element = isBeta ? child : child.props.element;\n      if (!isBeta && !element) {\n        element = child;\n        if (!warned && process.env.NODE_ENV !== \"test\") {\n          console.warn(\n            \"DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />.\"\n          );\n          warned = true;\n        }\n      }\n      return [\n        {\n          // Each route matches any sub route, except for the explicit root path\n          path,\n          element,\n          children: child.props.children ? [\n            // These are the children of each route, which we all add in under a catch-all\n            // subroute in order to make them available to `useOutlet`\n            {\n              path: path === \"/\" ? \"/\" : \"*\",\n              // The root path must require an exact match\n              element: child.props.children\n            }\n          ] : void 0\n        }\n      ];\n    }).sort((a, b) => b.path.localeCompare(a.path)).map((obj) => ({ ...obj, path: obj.path === \"/\" ? \"/\" : `${obj.path}/*` }))\n  );\n  const withNotFound = [\n    ...routes,\n    {\n      path: \"*\",\n      element: /* @__PURE__ */ React.createElement(NotFoundErrorPage, null)\n    }\n  ];\n  return useRoutes(withNotFound);\n};\n\nexport { AlertApiForwarder, ApiFactoryRegistry, ApiProvider, ApiResolver, AppRouter, AppThemeSelector, AtlassianAuth, BitbucketAuth, BitbucketServerAuth, ErrorAlerter, ErrorApiForwarder, FeatureFlagged, FetchMiddlewares, FlatRoutes, FrontendHostDiscovery, GithubAuth, GitlabAuth, GoogleAuth, LocalStorageFeatureFlags, MicrosoftAuth, MultipleAnalyticsApi, NoOpAnalyticsApi, OAuth2, OAuthRequestManager, OktaAuth, OneLoginAuth, SamlAuth, UnhandledErrorForwarder, UrlPatternDiscovery, WebStorage, createFetchApi, createSpecializedApp, defaultConfigLoader };\n//# sourceMappingURL=index.esm.js.map\n","import { useApi, alertApiRef, useAnalytics, configApiRef, errorApiRef, storageApiRef, useApp, oauthRequestApiRef, useApiHolder, useElementFilter, attachComponentData, discoveryApiRef } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport pluralize from 'pluralize';\nimport React, { useState, useEffect, useRef, useCallback, useLayoutEffect, lazy, Suspense, useMemo, Component as Component$3, Children, isValidElement, useContext, Fragment, createContext, forwardRef } from 'react';\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { makeStyles, useTheme, darken, lighten, withStyles, createStyles, styled, alpha, ThemeProvider } from '@material-ui/core/styles';\nimport Button$1 from '@material-ui/core/Button';\nimport MaterialLink from '@material-ui/core/Link';\nimport classNames from 'classnames';\nimport { trimEnd, isEqual, orderBy, isMatch, transform } from 'lodash';\nimport { Link as Link$1, createRoutesFromChildren, Route as Route$1, useSearchParams, useLocation, useResolvedPath as useResolvedPath$1, resolvePath, useNavigate, useParams, useRoutes, matchRoutes } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme$1 from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport makeStyles$1 from '@material-ui/core/styles/makeStyles';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport useObservable from 'react-use/lib/useObservable';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Grid from '@material-ui/core/Grid';\nimport missingAnnotation from './components/EmptyState/assets/missingAnnotation.svg';\nimport noInformation from './components/EmptyState/assets/noInformation.svg';\nimport createComponent from './components/EmptyState/assets/createComponent.svg';\nimport noBuild from './components/EmptyState/assets/noBuild.svg';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { createPortal } from 'react-dom';\nimport LinkIcon from '@material-ui/icons/Link';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport ReactMarkdown from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { isError, ResponseError, ForwardedError } from '@backstage/errors';\nimport TextTruncate from 'react-text-truncate';\nimport { useIsMounted, useDebouncedEffect, useLocalStorageValue, useAsync, useMountEffect } from '@react-hookz/web';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport { Circle, Line } from 'rc-progress';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport MuiStepper from '@material-ui/core/Stepper';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport startCase from 'lodash/startCase';\nimport Table$1 from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Popover from '@material-ui/core/Popover';\nimport qs from 'qs';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { Helmet } from 'react-helmet';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { createVersionedContext, createVersionedValueMap } from '@backstage/version-bridge';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport TabUI from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport MTable, { MTableHeader, MTableToolbar, MTableBody } from '@material-table/core';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { Sparklines, SparklinesLine } from 'react-sparklines';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Badge from '@material-ui/core/Badge';\nimport TextField from '@material-ui/core/TextField';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport Collapse from '@material-ui/core/Collapse';\nimport MicDropSvgUrl from './layout/ErrorPage/mic-drop.svg';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { z } from 'zod';\nimport { useForm } from 'react-hook-form';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\n\nfunction AlertDisplay(props) {\n  const [messages, setMessages] = useState([]);\n  const alertApi = useApi(alertApiRef);\n  const {\n    anchorOrigin = { vertical: \"top\", horizontal: \"center\" },\n    transientTimeoutMs\n  } = props;\n  const timeoutMs = transientTimeoutMs != null ? transientTimeoutMs : 5e3;\n  useEffect(() => {\n    const subscription = alertApi.alert$().subscribe((message) => setMessages((msgs) => msgs.concat(message)));\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n  const [firstMessage] = messages;\n  useEffect(() => {\n    if (firstMessage && firstMessage.display === \"transient\") {\n      const timeout = setTimeout(() => {\n        setMessages((msgs) => {\n          const newMsgs = msgs.filter((msg) => msg !== firstMessage);\n          return newMsgs.length === msgs.length ? msgs : newMsgs;\n        });\n      }, timeoutMs);\n      return () => clearTimeout(timeout);\n    }\n    return void 0;\n  }, [firstMessage, timeoutMs]);\n  if (messages.length === 0) {\n    return null;\n  }\n  const handleClose = () => {\n    setMessages((msgs) => msgs.filter((msg) => msg !== firstMessage));\n  };\n  return /* @__PURE__ */ React.createElement(Snackbar, { open: true, anchorOrigin }, /* @__PURE__ */ React.createElement(\n    Alert,\n    {\n      action: /* @__PURE__ */ React.createElement(\n        IconButton,\n        {\n          color: \"inherit\",\n          size: \"small\",\n          onClick: handleClose,\n          \"data-testid\": \"error-button-close\"\n        },\n        /* @__PURE__ */ React.createElement(CloseIcon, null)\n      ),\n      severity: firstMessage.severity\n    },\n    /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, String(firstMessage.message), messages.length > 1 && /* @__PURE__ */ React.createElement(\"em\", null, ` (${messages.length - 1} older ${pluralize(\n      \"message\",\n      messages.length - 1\n    )})`))\n  ));\n}\n\nfunction stringToColor(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = \"#\";\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 255;\n    color += `00${value.toString(16)}`.slice(-2);\n  }\n  return color;\n}\nfunction extractInitials(value) {\n  var _a;\n  return (_a = value.match(/\\b\\w/g)) == null ? void 0 : _a.join(\"\").slice(0, 2);\n}\n\nconst useStyles$O = makeStyles(\n  (theme) => ({\n    avatar: {\n      width: \"4rem\",\n      height: \"4rem\",\n      color: theme.palette.common.white\n    },\n    avatarText: {\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: \"1px\",\n      textTransform: \"uppercase\"\n    }\n  }),\n  { name: \"BackstageAvatar\" }\n);\nfunction Avatar(props) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles$O();\n  let styles = { ...customStyles };\n  const fontStyles = {\n    fontFamily: styles.fontFamily,\n    fontSize: styles.fontSize,\n    fontWeight: styles.fontWeight\n  };\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || \"\"),\n      ...customStyles\n    };\n  }\n  return /* @__PURE__ */ React.createElement(\n    MaterialAvatar,\n    {\n      alt: displayName,\n      src: picture,\n      className: classes.avatar,\n      style: styles\n    },\n    displayName && /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"h6\",\n        component: \"span\",\n        className: classes.avatarText,\n        style: fontStyles\n      },\n      extractInitials(displayName)\n    )\n  );\n}\n\nfunction isReactRouterBeta() {\n  const [obj] = createRoutesFromChildren(/* @__PURE__ */ React.createElement(Route$1, { index: true, element: /* @__PURE__ */ React.createElement(\"div\", null) }));\n  return !obj.index;\n}\nconst useStyles$N = makeStyles(\n  {\n    visuallyHidden: {\n      clip: \"rect(0 0 0 0)\",\n      clipPath: \"inset(50%)\",\n      overflow: \"hidden\",\n      position: \"absolute\",\n      whiteSpace: \"nowrap\",\n      height: 1,\n      width: 1\n    },\n    externalLink: {\n      position: \"relative\"\n    }\n  },\n  { name: \"Link\" }\n);\nconst isExternalUri = (uri) => /^([a-z+.-]+):/.test(uri);\nconst scriptProtocolPattern = (\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i\n);\nconst originalWindowOpen = window.open;\nif (originalWindowOpen && !originalWindowOpen.__backstage) {\n  const newOpen = function open(...args) {\n    const url = String(args[0]);\n    if (scriptProtocolPattern.test(url)) {\n      throw new Error(\n        \"Rejected window.open() with a javascript: URL as a security precaution\"\n      );\n    }\n    return originalWindowOpen.apply(this, args);\n  };\n  newOpen.__backstage = true;\n  window.open = newOpen;\n}\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString(\"app.baseUrl\");\n  } catch {\n    return void 0;\n  }\n};\nconst useBasePath = () => {\n  var _a;\n  const base = \"http://sample.dev\";\n  const url = (_a = useBaseUrl()) != null ? _a : \"/\";\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, \"/\");\n};\nconst useResolvedPath = (uri) => {\n  let resolvedPath = String(uri);\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n  return resolvedPath;\n};\nconst getNodeText = (node) => {\n  var _a;\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(\" \").trim();\n  }\n  if (typeof node === \"object\" && node) {\n    return getNodeText((_a = node == null ? void 0 : node.props) == null ? void 0 : _a.children);\n  }\n  if ([\"string\", \"number\"].includes(typeof node)) {\n    return String(node);\n  }\n  return \"\";\n};\nconst Link = React.forwardRef(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles$N();\n    const analytics = useAnalytics();\n    const to = isReactRouterBeta() ? useResolvedPath(props.to) : props.to;\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n    if (scriptProtocolPattern.test(to)) {\n      throw new Error(\n        \"Link component rejected javascript: URL as a security precaution\"\n      );\n    }\n    const handleClick = (event) => {\n      onClick == null ? void 0 : onClick(event);\n      if (!noTrack) {\n        analytics.captureEvent(\"click\", linkText, { attributes: { to } });\n      }\n    };\n    return external ? (\n      // External links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...newWindow ? { target: \"_blank\", rel: \"noopener\" } : {},\n          ...props,\n          ...props[\"aria-label\"] ? { \"aria-label\": `${props[\"aria-label\"]}, Opens in a new window` } : {},\n          ref,\n          href: to,\n          onClick: handleClick,\n          className: classNames(classes.externalLink, props.className)\n        },\n        props.children,\n        /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.visuallyHidden }, \", Opens in a new window\")\n      )\n    ) : (\n      // Interact with React Router for internal links\n      /* @__PURE__ */ React.createElement(\n        MaterialLink,\n        {\n          ...props,\n          ref,\n          component: Link$1,\n          to,\n          onClick: handleClick\n        }\n      )\n    );\n  }\n);\n\nconst LinkWrapper = React.forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Link, { ref, ...props, color: \"initial\" }));\nconst LinkButton = React.forwardRef(\n  (props, ref) => /* @__PURE__ */ React.createElement(Button$1, { ref, component: LinkWrapper, ...props })\n);\nconst Button = LinkButton;\n\nfunction CopyTextButton(props) {\n  const {\n    text,\n    tooltipDelay = 1e3,\n    tooltipText = \"Text copied to clipboard\",\n    \"aria-label\": ariaLabel = \"Copy text\"\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  const handleCopyClick = (e) => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      id: \"copy-test-tooltip\",\n      title: tooltipText,\n      placement: \"top\",\n      leaveDelay: tooltipDelay,\n      onClose: () => setOpen(false),\n      open\n    },\n    /* @__PURE__ */ React.createElement(IconButton, { onClick: handleCopyClick, \"aria-label\": ariaLabel }, /* @__PURE__ */ React.createElement(CopyIcon, null))\n  ));\n}\n\nfunction CodeSnippet(props) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false\n  } = props;\n  const theme = useTheme();\n  const mode = theme.palette.type === \"dark\" ? dark : docco;\n  const highlightColor = theme.palette.type === \"dark\" ? \"#256bf3\" : \"#e6ffed\";\n  return /* @__PURE__ */ React.createElement(Box, { position: \"relative\" }, /* @__PURE__ */ React.createElement(\n    LightAsync,\n    {\n      customStyle,\n      language,\n      style: mode,\n      showLineNumbers,\n      wrapLines: true,\n      lineNumberStyle: { color: theme.palette.textVerySubtle },\n      lineProps: (lineNumber) => (highlightedNumbers == null ? void 0 : highlightedNumbers.includes(lineNumber)) ? {\n        style: {\n          backgroundColor: highlightColor\n        }\n      } : {}\n    },\n    text\n  ), showCopyCodeButton && /* @__PURE__ */ React.createElement(Box, { position: \"absolute\", top: 0, right: 0 }, /* @__PURE__ */ React.createElement(CopyTextButton, { text })));\n}\n\nfunction CreateButton(props) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\")\n  );\n  if (!to) {\n    return null;\n  }\n  return isXSScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      component: Link$1,\n      color: \"primary\",\n      title,\n      size: \"small\",\n      to\n    },\n    /* @__PURE__ */ React.createElement(AddCircleOutline, null)\n  ) : /* @__PURE__ */ React.createElement(Button$1, { component: Link$1, variant: \"contained\", color: \"primary\", to }, title);\n}\n\nvar DependencyGraphTypes;\n((DependencyGraphTypes2) => {\n  ((Direction2) => {\n    Direction2[\"TOP_BOTTOM\"] = \"TB\";\n    Direction2[\"BOTTOM_TOP\"] = \"BT\";\n    Direction2[\"LEFT_RIGHT\"] = \"LR\";\n    Direction2[\"RIGHT_LEFT\"] = \"RL\";\n  })(DependencyGraphTypes2.Direction || (DependencyGraphTypes2.Direction = {}));\n  ((Alignment2) => {\n    Alignment2[\"UP_LEFT\"] = \"UL\";\n    Alignment2[\"UP_RIGHT\"] = \"UR\";\n    Alignment2[\"DOWN_LEFT\"] = \"DL\";\n    Alignment2[\"DOWN_RIGHT\"] = \"DR\";\n  })(DependencyGraphTypes2.Alignment || (DependencyGraphTypes2.Alignment = {}));\n  ((Ranker2) => {\n    Ranker2[\"NETWORK_SIMPLEX\"] = \"network-simplex\";\n    Ranker2[\"TIGHT_TREE\"] = \"tight-tree\";\n    Ranker2[\"LONGEST_PATH\"] = \"longest-path\";\n  })(DependencyGraphTypes2.Ranker || (DependencyGraphTypes2.Ranker = {}));\n  ((LabelPosition2) => {\n    LabelPosition2[\"LEFT\"] = \"l\";\n    LabelPosition2[\"RIGHT\"] = \"r\";\n    LabelPosition2[\"CENTER\"] = \"c\";\n  })(DependencyGraphTypes2.LabelPosition || (DependencyGraphTypes2.LabelPosition = {}));\n})(DependencyGraphTypes || (DependencyGraphTypes = {}));\n\nconst useStyles$M = makeStyles(\n  (theme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light\n    },\n    text: {\n      fill: theme.palette.primary.contrastText\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultNode\" }\n);\nfunction DefaultNode({ node: { id } }) {\n  const classes = useStyles$M();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n  return /* @__PURE__ */ React.createElement(\"g\", null, /* @__PURE__ */ React.createElement(\n    \"rect\",\n    {\n      className: classes.node,\n      width: paddedWidth,\n      height: paddedHeight,\n      rx: 10\n    }\n  ), /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      ref: idRef,\n      className: classes.text,\n      y: paddedHeight / 2,\n      x: paddedWidth / 2,\n      textAnchor: \"middle\",\n      alignmentBaseline: \"middle\"\n    },\n    id\n  ));\n}\n\nconst ARROW_MARKER_ID = \"arrow-marker\";\nconst NODE_TEST_ID = \"node\";\nconst EDGE_TEST_ID = \"edge\";\nconst LABEL_TEST_ID = \"label\";\n\nconst useStyles$L = makeStyles$1(\n  (theme) => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphNode\" }\n);\nconst renderDefault$1 = (props) => /* @__PURE__ */ React.createElement(DefaultNode, { ...props });\nfunction Node({\n  render = renderDefault$1,\n  setNode,\n  node\n}) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps = node;\n  const classes = useStyles$L();\n  const nodeRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: nodeRef,\n      \"data-testid\": NODE_TEST_ID,\n      className: classes.node,\n      transform: `translate(${x - width / 2},${y - height / 2})`\n    },\n    render({ node: nodeProps })\n  );\n}\n\nconst useStyles$K = makeStyles$1(\n  (theme) => ({\n    text: {\n      fill: theme.palette.textContrast\n    }\n  }),\n  { name: \"BackstageDependencyGraphDefaultLabel\" }\n);\nfunction DefaultLabel({ edge: { label } }) {\n  const classes = useStyles$K();\n  return /* @__PURE__ */ React.createElement(\"text\", { className: classes.text, textAnchor: \"middle\" }, label);\n}\n\nconst useStyles$J = makeStyles$1(\n  (theme) => ({\n    path: {\n      strokeWidth: 1,\n      stroke: theme.palette.textSubtle,\n      fill: \"none\",\n      transition: `${theme.transitions.duration.shortest}ms`\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`\n    }\n  }),\n  { name: \"BackstageDependencyGraphEdge\" }\n);\nconst renderDefault = (props) => /* @__PURE__ */ React.createElement(DefaultLabel, { ...props });\nfunction Edge({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve\n}) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps = edge;\n  const classes = useStyles$J();\n  const labelRef = React.useRef(null);\n  React.useLayoutEffect(() => {\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } = labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n  let path = \"\";\n  const createPath = React.useMemo(\n    () => d3Shape.line().x((d) => d.x).y((d) => d.y).curve(d3Shape[curve]),\n    [curve]\n  );\n  if (points) {\n    const finitePoints = points.filter(\n      (point) => isFinite(point.x) && isFinite(point.y)\n    );\n    path = createPath(finitePoints) || \"\";\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, path && /* @__PURE__ */ React.createElement(\"path\", { \"data-testid\": EDGE_TEST_ID, className: classes.path, d: path }), labelProps.label ? /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: labelRef,\n      \"data-testid\": LABEL_TEST_ID,\n      className: classes.label,\n      transform: `translate(${x},${y})`\n    },\n    render({ edge: labelProps })\n  ) : null);\n}\n\nconst WORKSPACE_ID = \"workspace\";\nfunction DependencyGraph(props) {\n  var _a, _b;\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = DependencyGraphTypes.Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = DependencyGraphTypes.Ranker.NETWORK_SIMPLEX,\n    labelPosition = DependencyGraphTypes.LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = \"enabled\",\n    curve = \"curveMonotoneX\",\n    fit = \"grow\",\n    ...svgProps\n  } = props;\n  const theme = useTheme$1();\n  const [containerWidth, setContainerWidth] = React.useState(100);\n  const [containerHeight, setContainerHeight] = React.useState(100);\n  const graph = React.useRef(new dagre.graphlib.Graph());\n  const [graphWidth, setGraphWidth] = React.useState(\n    ((_a = graph.current.graph()) == null ? void 0 : _a.width) || 0\n  );\n  const [graphHeight, setGraphHeight] = React.useState(\n    ((_b = graph.current.graph()) == null ? void 0 : _b.height) || 0\n  );\n  const [graphNodes, setGraphNodes] = React.useState([]);\n  const [graphEdges, setGraphEdges] = React.useState([]);\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const minHeight = Math.min(graphHeight, containerHeight);\n  const scalableHeight = fit === \"grow\" ? maxHeight : minHeight;\n  const containerRef = React.useMemo(\n    () => debounce((node) => {\n      if (!node) {\n        return;\n      }\n      const container = d3Selection.select(node);\n      const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n      function enableZoom() {\n        container.call(\n          d3Zoom.zoom().scaleExtent([1, 10]).on(\"zoom\", (event) => {\n            event.transform.x = Math.min(\n              0,\n              Math.max(\n                event.transform.x,\n                maxWidth - maxWidth * event.transform.k\n              )\n            );\n            event.transform.y = Math.min(\n              0,\n              Math.max(\n                event.transform.y,\n                maxHeight - maxHeight * event.transform.k\n              )\n            );\n            workspace.attr(\"transform\", event.transform);\n          })\n        );\n      }\n      if (zoom === \"enabled\") {\n        enableZoom();\n      } else if (zoom === \"enable-on-click\") {\n        container.on(\"click\", () => enableZoom());\n      }\n      const { width: newContainerWidth, height: newContainerHeight } = node.getBoundingClientRect();\n      if (containerWidth !== newContainerWidth) {\n        setContainerWidth(newContainerWidth);\n      }\n      if (containerHeight !== newContainerHeight) {\n        setContainerHeight(newContainerHeight);\n      }\n    }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom]\n  );\n  const setNodesAndEdges = React.useCallback(() => {\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n    currentGraphNodes.forEach((nodeId) => {\n      const remainingNode = nodes.some((node) => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n    currentGraphEdges.forEach((e) => {\n      const remainingEdge = edges.some(\n        (edge) => edge.from === e.v && edge.to === e.w\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n    nodes.forEach((node) => {\n      const existingNode = graph.current.nodes().find((nodeId) => node.id === nodeId);\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n    edges.forEach((e) => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n  const updateGraph = React.useMemo(\n    () => debounce(\n      () => {\n        dagre.layout(graph.current);\n        const { height, width } = graph.current.graph();\n        const newHeight = Math.max(0, height || 0);\n        const newWidth = Math.max(0, width || 0);\n        setGraphWidth(newWidth);\n        setGraphHeight(newHeight);\n        setGraphNodes(graph.current.nodes());\n        setGraphEdges(graph.current.edges());\n      },\n      250,\n      { leading: true }\n    ),\n    []\n  );\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker\n    });\n    setNodesAndEdges();\n    updateGraph();\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph\n  ]);\n  function setNode(id, node) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n  function setEdge(id, edge) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n  return /* @__PURE__ */ React.createElement(\n    \"svg\",\n    {\n      ref: containerRef,\n      ...svgProps,\n      width: \"100%\",\n      height: scalableHeight,\n      viewBox: `0 0 ${maxWidth} ${maxHeight}`\n    },\n    /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\n      \"marker\",\n      {\n        id: ARROW_MARKER_ID,\n        viewBox: \"0 0 24 24\",\n        markerWidth: \"14\",\n        markerHeight: \"14\",\n        refX: \"16\",\n        refY: \"12\",\n        orient: \"auto\",\n        markerUnits: \"strokeWidth\"\n      },\n      /* @__PURE__ */ React.createElement(\n        \"path\",\n        {\n          fill: theme.palette.textSubtle,\n          d: \"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n        }\n      )\n    ), defs),\n    /* @__PURE__ */ React.createElement(\"g\", { id: WORKSPACE_ID }, /* @__PURE__ */ React.createElement(\n      \"svg\",\n      {\n        width: graphWidth,\n        height: graphHeight,\n        y: maxHeight / 2 - graphHeight / 2,\n        x: maxWidth / 2 - graphWidth / 2,\n        viewBox: `0 0 ${graphWidth} ${graphHeight}`\n      },\n      graphEdges.map((e) => {\n        const edge = graph.current.edge(e);\n        if (!edge)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Edge,\n          {\n            key: `${e.v}-${e.w}`,\n            id: e,\n            setEdge,\n            render: renderLabel,\n            edge,\n            curve\n          }\n        );\n      }),\n      graphNodes.map((id) => {\n        const node = graph.current.node(id);\n        if (!node)\n          return null;\n        return /* @__PURE__ */ React.createElement(\n          Node,\n          {\n            key: id,\n            setNode,\n            render: renderNode,\n            node\n          }\n        );\n      })\n    ))\n  );\n}\n\nconst useStyles$I = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      root: {\n        padding: theme.spacing(0),\n        marginBottom: theme.spacing(0),\n        marginTop: theme.spacing(0),\n        display: \"flex\",\n        flexFlow: \"row nowrap\"\n      },\n      // showing on top\n      topPosition: {\n        position: \"relative\",\n        marginBottom: theme.spacing(6),\n        marginTop: -theme.spacing(3),\n        zIndex: \"unset\"\n      },\n      icon: {\n        fontSize: theme.typography.h6.fontSize\n      },\n      content: {\n        width: \"100%\",\n        maxWidth: \"inherit\",\n        flexWrap: \"nowrap\",\n        color: theme.palette.banner.text\n      },\n      message: {\n        display: \"flex\",\n        alignItems: \"center\",\n        \"& a\": {\n          color: theme.palette.banner.link\n        }\n      },\n      button: {\n        color: (_a = theme.palette.banner.closeButtonColor) != null ? _a : \"inherit\"\n      },\n      info: {\n        backgroundColor: theme.palette.banner.info\n      },\n      error: {\n        backgroundColor: theme.palette.banner.error\n      },\n      warning: {\n        backgroundColor: (_b = theme.palette.banner.warning) != null ? _b : theme.palette.banner.error\n      }\n    };\n  },\n  { name: \"BackstageDismissableBanner\" }\n);\nconst DismissableBanner = (props) => {\n  var _a;\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles$I();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket(\"notifications\");\n  const rawDismissedBanners = (_a = notificationsStore.snapshot(\"dismissedBanners\").value) != null ? _a : [];\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners)\n  );\n  const observedItems = useObservable(\n    notificationsStore.observe$(\"dismissedBanners\")\n  );\n  useEffect(() => {\n    var _a2;\n    if (observedItems == null ? void 0 : observedItems.value) {\n      const currentValue = (_a2 = observedItems == null ? void 0 : observedItems.value) != null ? _a2 : [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems == null ? void 0 : observedItems.value]);\n  const handleClick = () => {\n    notificationsStore.set(\"dismissedBanners\", [...dismissedBanners, id]);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Snackbar,\n    {\n      anchorOrigin: fixed ? { vertical: \"bottom\", horizontal: \"center\" } : { vertical: \"top\", horizontal: \"center\" },\n      open: !dismissedBanners.has(id),\n      classes: {\n        root: classNames(classes.root, !fixed && classes.topPosition)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      SnackbarContent,\n      {\n        classes: {\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message\n        },\n        message,\n        action: [\n          /* @__PURE__ */ React.createElement(\n            IconButton,\n            {\n              key: \"dismiss\",\n              title: \"Permanently dismiss this message\",\n              className: classes.button,\n              onClick: handleClick\n            },\n            /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.icon })\n          )\n        ]\n      }\n    )\n  );\n};\n\nconst useStyles$H = makeStyles(\n  {\n    generalImg: {\n      width: \"95%\",\n      zIndex: 2,\n      position: \"relative\",\n      left: \"50%\",\n      top: \"50%\",\n      transform: \"translate(-50%, 15%)\"\n    }\n  },\n  { name: \"BackstageEmptyStateImage\" }\n);\nconst EmptyStateImage = ({ missing }) => {\n  const classes = useStyles$H();\n  switch (missing) {\n    case \"field\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: missingAnnotation,\n          className: classes.generalImg,\n          alt: \"annotation is missing\"\n        }\n      );\n    case \"info\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: noInformation,\n          alt: \"no Information\",\n          className: classes.generalImg\n        }\n      );\n    case \"content\":\n      return /* @__PURE__ */ React.createElement(\n        \"img\",\n        {\n          src: createComponent,\n          alt: \"create Component\",\n          className: classes.generalImg\n        }\n      );\n    case \"data\":\n      return /* @__PURE__ */ React.createElement(\"img\", { src: noBuild, alt: \"no Build\", className: classes.generalImg });\n    default:\n      return null;\n  }\n};\n\nconst useStyles$G = makeStyles(\n  (theme) => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0)\n    },\n    action: {\n      marginTop: theme.spacing(2)\n    },\n    imageContainer: {\n      position: \"relative\"\n    }\n  }),\n  { name: \"BackstageEmptyState\" }\n);\nfunction EmptyState(props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles$G();\n  return /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      justifyContent: \"space-around\",\n      alignItems: \"flex-start\",\n      className: classes.root,\n      spacing: 2\n    },\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6 }, /* @__PURE__ */ React.createElement(Grid, { container: true, direction: \"column\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\" }, title)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, description)), /* @__PURE__ */ React.createElement(Grid, { item: true, xs: true, className: classes.action }, action))),\n    /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, md: 6, className: classes.imageContainer }, typeof missing === \"string\" ? /* @__PURE__ */ React.createElement(EmptyStateImage, { missing }) : missing.customImage)\n  );\n}\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)[0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split(\"\\n\").findIndex(\n  (line) => ANNOTATION_REGEXP.test(line)\n);\nconst useStyles$F = makeStyles(\n  (theme) => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background: theme.palette.type === \"dark\" ? \"#444\" : theme.palette.common.white\n    }\n  }),\n  { name: \"BackstageMissingAnnotationEmptyState\" }\n);\nfunction generateLineNumbers(lineCount) {\n  return Array.from(Array(lineCount + 1).keys(), (i) => i + ANNOTATION_LINE);\n}\nfunction generateComponentYaml(annotations) {\n  const annotationYaml = annotations.map((ann) => ANNOTATION_YAML.replace(\"ANNOTATION\", ann)).join(\"\\n\");\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\nfunction generateDescription(annotations) {\n  const isSingular = annotations.length <= 1;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, \"The \", isSingular ? \"annotation\" : \"annotations\", \" \", annotations.map((ann) => /* @__PURE__ */ React.createElement(\"code\", null, ann)).reduce((prev, curr) => /* @__PURE__ */ React.createElement(React.Fragment, null, prev, \", \", curr)), \" \", isSingular ? \"is\" : \"are\", \" missing. You need to add the\", \" \", isSingular ? \"annotation\" : \"annotations\", \" to your component if you want to enable this tool.\");\n}\nfunction MissingAnnotationEmptyState(props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url = readMoreUrl || \"https://backstage.io/docs/features/software-catalog/well-known-annotations\";\n  const classes = useStyles$F();\n  return /* @__PURE__ */ React.createElement(\n    EmptyState,\n    {\n      missing: \"field\",\n      title: \"Missing Annotation\",\n      description: generateDescription(annotations),\n      action: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Add the annotation to your component YAML as shown in the highlighted example below:\"), /* @__PURE__ */ React.createElement(Box, { className: classes.code }, /* @__PURE__ */ React.createElement(\n        CodeSnippet,\n        {\n          text: generateComponentYaml(annotations),\n          language: \"yaml\",\n          showLineNumbers: true,\n          highlightedNumbers: generateLineNumbers(annotations.length),\n          customStyle: { background: \"inherit\", fontSize: \"115%\" }\n        }\n      )), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", component: Link, to: url }, \"Read more\"))\n    }\n  );\n}\n\nconst getWarningTextColor = (severity, theme) => {\n  const getColor = theme.palette.type === \"light\" ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\nconst getWarningBackgroundColor = (severity, theme) => {\n  const getBackgroundColor = theme.palette.type === \"light\" ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\nconst useErrorOutlineStyles = makeStyles((theme) => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }) => getWarningTextColor(\n      severity,\n      theme\n    )\n  }\n}));\nconst ErrorOutlineStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ErrorOutline, { classes });\n};\nconst ExpandMoreIconStyled = ({ severity }) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return /* @__PURE__ */ React.createElement(ExpandMoreIcon, { classes });\n};\nconst useStyles$E = makeStyles(\n  (theme) => ({\n    panel: {\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      ),\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      verticalAlign: \"middle\"\n    },\n    summary: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    summaryText: {\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      fontWeight: theme.typography.fontWeightBold\n    },\n    message: {\n      width: \"100%\",\n      display: \"block\",\n      color: ({ severity }) => getWarningTextColor(\n        severity,\n        theme\n      ),\n      backgroundColor: ({ severity }) => getWarningBackgroundColor(\n        severity,\n        theme\n      )\n    },\n    details: {\n      width: \"100%\",\n      display: \"block\",\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2),\n      fontFamily: \"sans-serif\"\n    }\n  }),\n  { name: \"BackstageWarningPanel\" }\n);\nconst capitalize = (s) => {\n  return s.charAt(0).toLocaleUpperCase(\"en-US\") + s.slice(1);\n};\nfunction WarningPanel(props) {\n  const {\n    severity = \"warning\",\n    title,\n    message,\n    children,\n    defaultExpanded\n  } = props;\n  const classes = useStyles$E({ severity });\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : \"\");\n  return /* @__PURE__ */ React.createElement(\n    Accordion,\n    {\n      defaultExpanded: defaultExpanded != null ? defaultExpanded : false,\n      className: classes.panel,\n      role: \"alert\"\n    },\n    /* @__PURE__ */ React.createElement(\n      AccordionSummary,\n      {\n        expandIcon: /* @__PURE__ */ React.createElement(ExpandMoreIconStyled, { severity }),\n        className: classes.summary\n      },\n      /* @__PURE__ */ React.createElement(ErrorOutlineStyled, { severity }),\n      /* @__PURE__ */ React.createElement(Typography, { className: classes.summaryText, variant: \"subtitle1\" }, subTitle)\n    ),\n    (message || children) && /* @__PURE__ */ React.createElement(AccordionDetails, null, /* @__PURE__ */ React.createElement(Grid, { container: true }, message && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12 }, /* @__PURE__ */ React.createElement(Typography, { className: classes.message, variant: \"body1\" }, message)), children && /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, className: classes.details }, children)))\n  );\n}\n\nconst useStyles$D = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageErrorPanel\" }\n);\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children\n}) => {\n  const classes = useStyles$D();\n  return /* @__PURE__ */ React.createElement(List, { dense: true }, /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Error\",\n      secondary: error\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: error })), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Message\",\n      secondary: message\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: message })), stack && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      classes: { secondary: classes.text },\n      primary: \"Stack Trace\",\n      secondary: stack\n    }\n  ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: stack })), children);\n};\nfunction ErrorPanel(props) {\n  const { title, error, defaultExpanded, children } = props;\n  return /* @__PURE__ */ React.createElement(\n    WarningPanel,\n    {\n      severity: \"error\",\n      title: title != null ? title : error.message,\n      defaultExpanded\n    },\n    /* @__PURE__ */ React.createElement(\n      ErrorList,\n      {\n        error: error.name,\n        message: error.message,\n        stack: error.stack,\n        children\n      }\n    )\n  );\n}\n\nconst useStyles$C = makeStyles(\n  (theme) => ({\n    text: {\n      fontFamily: \"monospace\",\n      whiteSpace: \"pre\",\n      overflowX: \"auto\",\n      marginRight: theme.spacing(2)\n    },\n    divider: {\n      margin: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageResponseErrorPanel\" }\n);\nfunction ResponseErrorPanel(props) {\n  var _a;\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles$C();\n  if (error.name !== \"ResponseError\") {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: title != null ? title : error.message,\n        defaultExpanded,\n        error\n      }\n    );\n  }\n  const { body, cause } = error;\n  const { request, response } = body;\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, \"\\n\");\n  const stackString = (_a = cause.stack) == null ? void 0 : _a.replace(/\\\\n/g, \"\\n\");\n  const jsonString = JSON.stringify(body, void 0, 2);\n  return /* @__PURE__ */ React.createElement(\n    ErrorPanel,\n    {\n      title: title != null ? title : error.message,\n      defaultExpanded,\n      error: { name: errorString, message: messageString, stack: stackString }\n    },\n    requestString && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Request\",\n        secondary: request ? `${requestString}` : void 0\n      }\n    ), /* @__PURE__ */ React.createElement(CopyTextButton, { text: requestString })),\n    /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Divider, { component: \"li\", className: classes.divider }), /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(\n      ListItemText,\n      {\n        classes: { secondary: classes.text },\n        primary: \"Full Error as JSON\"\n      }\n    )), /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"json\", text: jsonString, showCopyCodeButton: true }))\n  );\n}\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement(\"div\");\n  rootContainer.setAttribute(\"id\", id);\n  return rootContainer;\n}\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild.nextElementSibling\n  );\n}\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(\n    function setupElement() {\n      const existingParent = document.querySelector(`#${id}`);\n      const parentElem = existingParent || createRootElement(id);\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n      parentElem.appendChild(rootElemRef.current);\n      return function removeElement() {\n        rootElemRef.current.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id]\n  );\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement(\"div\");\n    }\n    return rootElemRef.current;\n  }\n  return getRootElem();\n}\n\nconst STATES_LOCAL_STORAGE_KEY = \"core.calloutSeen\";\nfunction useCalloutStates() {\n  const [states, setStates] = useState(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n  const setState = useCallback((key, value) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n  return { states, setState };\n}\nfunction useCalloutHasBeenSeen(featureId) {\n  const { states, setState } = useCalloutStates();\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n  return { seen: states[featureId] === true, markSeen };\n}\nfunction useShowCallout(featureId) {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n\nconst useStyles$B = makeStyles(\n  (theme) => ({\n    \"@keyframes pulsateSlightly\": {\n      \"0%\": { transform: \"scale(1.0)\" },\n      \"100%\": { transform: \"scale(1.1)\" }\n    },\n    \"@keyframes pulsateAndFade\": {\n      \"0%\": { transform: \"scale(1.0)\", opacity: 0.9 },\n      \"100%\": { transform: \"scale(1.5)\", opacity: 0 }\n    },\n    featureWrapper: {\n      position: \"relative\"\n    },\n    backdrop: {\n      zIndex: 2e3,\n      position: \"fixed\",\n      overflow: \"hidden\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    dot: {\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: \"1px solid rgba(103, 146, 180, 0.98)\",\n      boxShadow: \"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)\",\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite\"\n    },\n    pulseCircle: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"transparent\",\n      borderRadius: \"100%\",\n      border: `2px solid ${theme.palette.common.white}`,\n      zIndex: 2001,\n      transformOrigin: \"center center\",\n      animation: \"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite\"\n    },\n    text: {\n      position: \"absolute\",\n      color: theme.palette.common.white,\n      zIndex: 2003\n    }\n  }),\n  { name: \"BackstageFeatureCalloutCircular\" }\n);\nfunction FeatureCalloutCircular(props) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal(\"core.callout\");\n  const wrapperRef = useRef(null);\n  const [placement, setPlacement] = useState();\n  const classes = useStyles$B();\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n      const borderWidth = 800;\n      const dotLeft = wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop = wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth\n      });\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener(\"resize\", update);\n    window.addEventListener(\"scroll\", update);\n    return () => {\n      window.removeEventListener(\"resize\", update);\n      window.removeEventListener(\"scroll\", update);\n    };\n  }, [update]);\n  useLayoutEffect(update, [wrapperRef.current, update]);\n  if (!show) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.featureWrapper, ...{ ref: wrapperRef } }, children), createPortal(\n    /* @__PURE__ */ React.createElement(Box, { className: classes.backdrop }, /* @__PURE__ */ React.createElement(ClickAwayListener, { onClickAway: hide }, /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.dot,\n        \"data-testid\": \"dot\",\n        style: {\n          left: placement == null ? void 0 : placement.dotLeft,\n          top: placement == null ? void 0 : placement.dotTop,\n          width: placement == null ? void 0 : placement.dotSize,\n          height: placement == null ? void 0 : placement.dotSize,\n          borderWidth: placement == null ? void 0 : placement.borderWidth\n        },\n        onClick: hide,\n        onKeyDown: hide,\n        role: \"button\",\n        tabIndex: 0\n      },\n      /* @__PURE__ */ React.createElement(Box, { className: classes.pulseCircle })\n    ), /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classes.text,\n        \"data-testid\": \"text\",\n        style: {\n          left: placement == null ? void 0 : placement.textLeft,\n          top: placement == null ? void 0 : placement.textTop,\n          width: placement == null ? void 0 : placement.textWidth\n        }\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", paragraph: true }, title),\n      /* @__PURE__ */ React.createElement(Typography, null, description)\n    )))),\n    portalElement\n  ));\n}\n\nconst useIconStyles = makeStyles(\n  (theme) => ({\n    link: {\n      display: \"grid\",\n      justifyItems: \"center\",\n      gridGap: 4,\n      textAlign: \"center\"\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: \"default\"\n    },\n    primary: {\n      color: theme.palette.primary.main\n    },\n    secondary: {\n      color: theme.palette.secondary.main\n    },\n    label: {\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 1.2\n    }\n  }),\n  { name: \"BackstageIconLinkVertical\" }\n);\nfunction IconLinkVertical({\n  color = \"primary\",\n  disabled = false,\n  href = \"#\",\n  icon = /* @__PURE__ */ React.createElement(LinkIcon, null),\n  label,\n  onClick,\n  title\n}) {\n  const classes = useIconStyles();\n  if (disabled) {\n    return /* @__PURE__ */ React.createElement(Box, { title, className: classNames(classes.link, classes.disabled) }, icon, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        variant: \"caption\",\n        component: \"span\",\n        className: classes.label\n      },\n      label\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      title,\n      className: classNames(classes.link, classes[color]),\n      to: href,\n      onClick\n    },\n    icon,\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", component: \"span\", className: classes.label }, label)\n  );\n}\n\nconst useStyles$A = makeStyles(\n  (theme) => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridAutoColumns: \"min-content\",\n      gridGap: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageHeaderIconLinkRow\" }\n);\nfunction HeaderIconLinkRow(props) {\n  const { links } = props;\n  const classes = useStyles$A();\n  return /* @__PURE__ */ React.createElement(\"nav\", { className: classes.links }, links.map((link, index) => /* @__PURE__ */ React.createElement(IconLinkVertical, { key: index + 1, ...link })));\n}\n\nconst generateGradientStops = (themeType) => {\n  const luminance = themeType === \"dark\" ? \"16%\" : \"97%\";\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\nconst fadeSize = 100;\nconst fadePadding = 10;\nconst useStyles$z = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      alignItems: \"center\"\n    },\n    container: {\n      overflow: \"auto\",\n      scrollbarWidth: 0,\n      // hide in FF\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n        // hide in Chrome\n      }\n    },\n    fade: {\n      position: \"absolute\",\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: \"opacity 300ms\",\n      pointerEvents: \"none\"\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type\n      )})`\n    },\n    fadeHidden: {\n      opacity: 0\n    },\n    button: {\n      position: \"absolute\"\n    },\n    buttonLeft: {\n      left: -theme.spacing(2)\n    },\n    buttonRight: {\n      right: -theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageHorizontalScrollGrid\" }\n);\nfunction useScrollDistance(ref) {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState([0, 0]);\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n    handleUpdate();\n    el.addEventListener(\"scroll\", handleUpdate);\n    window.addEventListener(\"resize\", handleUpdate);\n    return () => {\n      el.removeEventListener(\"scroll\", handleUpdate);\n      window.removeEventListener(\"resize\", handleUpdate);\n    };\n  }, [ref]);\n  return [scrollLeft, scrollRight];\n}\nfunction useSmoothScroll(ref, speed, minDistance) {\n  const [scrollTarget, setScrollTarget] = React.useState(0);\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n    const startTime = window.performance.now();\n    const id = requestAnimationFrame((frameTime) => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = Math.abs(scrollTarget) * frameDuration / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n      ref.current.scrollBy({ left: scrollAmount });\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n  return setScrollTarget;\n}\nfunction HorizontalScrollGrid(props) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles$z(props);\n  const ref = React.useRef();\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n  const handleScrollClick = (forwards) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { ...otherProps, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      direction: \"row\",\n      wrap: \"nowrap\",\n      className: classes.container,\n      ref\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeLeft, {\n        [classes.fadeHidden]: scrollLeft === 0\n      })\n    }\n  ), /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.fade, classes.fadeRight, {\n        [classes.fadeHidden]: scrollRight === 0\n      })\n    }\n  ), scrollLeft > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Left\",\n      onClick: () => handleScrollClick(false),\n      className: classNames(classes.button, classes.buttonLeft, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronLeftIcon, null)\n  ), scrollRight > 0 && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      title: \"Scroll Right\",\n      onClick: () => handleScrollClick(true),\n      className: classNames(classes.button, classes.buttonRight, {})\n    },\n    /* @__PURE__ */ React.createElement(ChevronRight, null)\n  ));\n}\n\nconst useStyles$y = makeStyles(\n  (theme) => ({\n    alpha: {\n      color: theme.palette.common.white,\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    },\n    beta: {\n      color: \"#4d65cc\",\n      fontFamily: \"serif\",\n      fontWeight: \"normal\",\n      fontStyle: \"italic\"\n    }\n  }),\n  { name: \"BackstageLifecycle\" }\n);\nfunction Lifecycle(props) {\n  const classes = useStyles$y(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classes[alpha ? \"alpha\" : \"beta\"],\n      style: { fontSize: \"120%\" }\n    },\n    alpha ? /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B1\") : /* @__PURE__ */ React.createElement(React.Fragment, null, \"\\u03B2\")\n  ) : /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes[alpha ? \"alpha\" : \"beta\"] }, alpha ? \"Alpha\" : \"Beta\");\n}\n\nconst RealLogViewer = lazy(\n  () => import('./esm/RealLogViewer-07cfe7c3.esm.js').then((m) => ({ default: m.RealLogViewer }))\n);\nfunction LogViewer(props) {\n  const { Progress } = useApp().getComponents();\n  return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(RealLogViewer, { ...props }));\n}\n\nconst useStyles$x = makeStyles(\n  (theme) => ({\n    markdown: {\n      \"& table\": {\n        borderCollapse: \"collapse\",\n        border: `1px solid ${theme.palette.border}`\n      },\n      \"& th, & td\": {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1)\n      },\n      \"& td\": {\n        wordBreak: \"break-word\",\n        overflow: \"hidden\",\n        verticalAlign: \"middle\",\n        lineHeight: \"1\",\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0\n      },\n      \"& th\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr\": {\n        backgroundColor: theme.palette.background.paper\n      },\n      \"& tr:nth-child(odd)\": {\n        backgroundColor: theme.palette.background.default\n      },\n      \"& a\": {\n        color: theme.palette.link\n      },\n      \"& img\": {\n        maxWidth: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstageMarkdownContent\" }\n);\nconst flatten = (text, child) => {\n  if (!child)\n    return text;\n  return typeof child === \"string\" ? text + child : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\nconst headingRenderer = ({ level, children }) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, \"\");\n  const slug = text.toLocaleLowerCase(\"en-US\").replace(/\\W/g, \"-\");\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\nconst components = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, \"\");\n    const match = /language-(\\w+)/.exec(className || \"\");\n    return !inline && match ? /* @__PURE__ */ React.createElement(CodeSnippet, { language: match[1], text }) : /* @__PURE__ */ React.createElement(\"code\", { className, ...props }, children);\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer\n};\nfunction MarkdownContent(props) {\n  const {\n    content,\n    dialect = \"gfm\",\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className\n  } = props;\n  const classes = useStyles$x();\n  return /* @__PURE__ */ React.createElement(\n    ReactMarkdown,\n    {\n      remarkPlugins: dialect === \"gfm\" ? [gfm] : [],\n      className: `${classes.markdown} ${className}`,\n      children: content,\n      components,\n      linkTarget,\n      transformLinkUri,\n      transformImageUri\n    }\n  );\n}\n\nconst useItemStyles = makeStyles(\n  (theme) => ({\n    root: {\n      paddingLeft: theme.spacing(3)\n    }\n  }),\n  { name: \"BackstageLoginRequestListItem\" }\n);\nconst LoginRequestListItem = ({ request, busy, setBusy }) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState();\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : \"An unspecified error occurred\");\n    } finally {\n      setBusy(false);\n    }\n  };\n  const IconComponent = request.provider.icon;\n  return /* @__PURE__ */ React.createElement(ListItem, { disabled: busy, classes: { root: classes.root } }, /* @__PURE__ */ React.createElement(ListItemAvatar, null, /* @__PURE__ */ React.createElement(IconComponent, { fontSize: \"large\" })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: request.provider.title,\n      secondary: error && /* @__PURE__ */ React.createElement(Typography, { color: \"error\" }, error)\n    }\n  ), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"contained\", onClick: handleContinue }, \"Log in\"));\n};\n\nconst useStyles$w = makeStyles(\n  (theme) => ({\n    dialog: {\n      paddingTop: theme.spacing(1)\n    },\n    title: {\n      minWidth: 0\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize\n    },\n    contentList: {\n      padding: 0\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0)\n    }\n  }),\n  { name: \"OAuthRequestDialog\" }\n);\nfunction OAuthRequestDialog(_props) {\n  var _a;\n  const classes = useStyles$w();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const configApi = useApi(configApiRef);\n  const authRedirect = (_a = configApi.getOptionalBoolean(\"enableExperimentalRedirectFlow\")) != null ? _a : false;\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    []\n  );\n  const handleRejectAll = () => {\n    requests.forEach((request) => request.reject());\n  };\n  return /* @__PURE__ */ React.createElement(\n    Dialog,\n    {\n      open: Boolean(requests.length),\n      fullWidth: true,\n      maxWidth: \"xs\",\n      classes: { paper: classes.dialog },\n      \"aria-labelledby\": \"oauth-req-dialog-title\"\n    },\n    /* @__PURE__ */ React.createElement(\"main\", null, /* @__PURE__ */ React.createElement(\n      DialogTitle,\n      {\n        classes: { root: classes.title },\n        id: \"oauth-req-dialog-title\"\n      },\n      /* @__PURE__ */ React.createElement(Typography, { className: classes.titleHeading, variant: \"h1\" }, \"Login Required\"),\n      authRedirect ? /* @__PURE__ */ React.createElement(Typography, null, \"This will trigger a http redirect to OAuth Login.\") : null\n    ), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true, classes: { root: classes.contentList } }, /* @__PURE__ */ React.createElement(List, null, requests.map((request) => /* @__PURE__ */ React.createElement(\n      LoginRequestListItem,\n      {\n        key: request.provider.title,\n        request,\n        busy,\n        setBusy\n      }\n    ))))),\n    /* @__PURE__ */ React.createElement(DialogActions, { classes: { root: classes.actionButtons } }, /* @__PURE__ */ React.createElement(Button$1, { onClick: handleRejectAll }, \"Reject All\"))\n  );\n}\n\nconst useStyles$v = makeStyles(\n  {\n    container: {\n      overflow: \"visible !important\"\n    }\n  },\n  { name: \"BackstageOverflowTooltip\" }\n);\nfunction OverflowTooltip(props) {\n  var _a;\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles$v();\n  const handleToggled = (truncated) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\n    Tooltip,\n    {\n      title: (_a = props.title) != null ? _a : props.text || \"\",\n      placement: props.placement,\n      disableHoverListener: !hover\n    },\n    /* @__PURE__ */ React.createElement(\n      TextTruncate,\n      {\n        text: props.text,\n        line: props.line,\n        onToggled: handleToggled,\n        containerClassName: classes.container\n      }\n    )\n  );\n}\n\nfunction Progress(props) {\n  const theme = useTheme();\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    const handle = setTimeout(\n      () => setIsVisible(true),\n      theme.transitions.duration.short\n    );\n    return () => clearTimeout(handle);\n  }, [theme.transitions.duration.short]);\n  return isVisible ? /* @__PURE__ */ React.createElement(LinearProgress, { ...props, \"data-testid\": \"progress\" }) : /* @__PURE__ */ React.createElement(Box, { display: \"none\" });\n}\n\nconst useStyles$u = makeStyles(\n  (theme) => ({\n    root: {\n      maxWidth: \"fit-content\",\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle\n    },\n    arrow: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageBottomLink\" }\n);\nfunction BottomLink(props) {\n  const { link, title, onClick } = props;\n  const classes = useStyles$u();\n  return /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(Link, { to: link, onClick, underline: \"none\" }, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", alignItems: \"center\", className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.boxTitle, fontWeight: \"fontWeightBold\", m: 1 }, /* @__PURE__ */ React.createElement(Typography, null, /* @__PURE__ */ React.createElement(\"strong\", null, title))), /* @__PURE__ */ React.createElement(ArrowIcon, { className: classes.arrow }))));\n}\n\nconst SlackLink = (props) => {\n  const { slackChannel } = props;\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === \"string\") {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel, \" for help.\");\n  } else if (!slackChannel.href) {\n    return /* @__PURE__ */ React.createElement(Typography, null, \"Please contact \", slackChannel.name, \" for help.\");\n  }\n  return /* @__PURE__ */ React.createElement(LinkButton, { to: slackChannel.href, variant: \"contained\" }, slackChannel.name);\n};\nconst ErrorBoundary = class ErrorBoundary2 extends Component$3 {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: void 0,\n      errorInfo: void 0\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n    if (!error) {\n      return children;\n    }\n    return /* @__PURE__ */ React.createElement(ErrorPanel, { title: \"Something Went Wrong\", error }, /* @__PURE__ */ React.createElement(SlackLink, { slackChannel }));\n  }\n};\n\nconst useStyles$t = makeStyles(\n  (theme) => ({\n    noPadding: {\n      padding: 0,\n      \"&:last-child\": {\n        paddingBottom: 0\n      }\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5)\n    },\n    headerTitle: {\n      fontWeight: theme.typography.fontWeightBold\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1)\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: \"flex\"\n    }\n  }),\n  { name: \"BackstageInfoCard\" }\n);\nconst CardActionsTopRight = withStyles(\n  (theme) => ({\n    root: {\n      display: \"inline-block\",\n      padding: theme.spacing(8, 8, 0, 0),\n      float: \"right\"\n    }\n  }),\n  { name: \"BackstageInfoCardCardActionsTopRight\" }\n)(CardActions);\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    fullHeight: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\"\n    },\n    gridItem: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"calc(100% - 10px)\",\n      // for pages without content header\n      marginBottom: \"10px\"\n    }\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1\n    },\n    gridItem: {\n      flex: 1\n    }\n  }\n};\nfunction InfoCard(props) {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps\n  } = props;\n  const classes = useStyles$t();\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach((name) => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name]\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[name]\n      };\n    });\n  }\n  const cardSubTitle = () => {\n    if (!subheader && !icon) {\n      return null;\n    }\n    return /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        className: classes.headerSubheader,\n        \"data-testid\": \"info-card-subheader\"\n      },\n      subheader && /* @__PURE__ */ React.createElement(\"div\", { className: classes.subheader }, subheader),\n      icon\n    );\n  };\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, { style: calculatedStyle, className }, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(\n    CardHeader,\n    {\n      classes: {\n        root: classes.header,\n        title: classes.headerTitle,\n        subheader: classes.headerSubheader,\n        avatar: classes.headerAvatar,\n        action: classes.headerAction,\n        content: classes.headerContent\n      },\n      title,\n      subheader: cardSubTitle(),\n      action,\n      style: { ...headerStyle },\n      titleTypographyProps,\n      ...headerProps\n    }\n  ), actionsTopRight && /* @__PURE__ */ React.createElement(CardActionsTopRight, null, actionsTopRight), divider && /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(\n    CardContent,\n    {\n      className: classNames(cardClassName, {\n        [classes.noPadding]: noPadding\n      }),\n      style: calculatedCardStyle\n    },\n    children\n  ), actions && /* @__PURE__ */ React.createElement(CardActions, { className: actionsClassName }, actions), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\n\nconst useStyles$s = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"relative\",\n      lineHeight: 0\n    },\n    overlay: {\n      position: \"absolute\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -60%)\",\n      fontSize: theme.typography.pxToRem(45),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.textContrast\n    },\n    description: {\n      fontSize: \"100%\",\n      top: \"50%\",\n      left: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      position: \"absolute\",\n      wordBreak: \"break-all\",\n      display: \"inline-block\"\n    },\n    circle: {\n      width: \"80%\",\n      transform: \"translate(10%, 0)\"\n    },\n    colorUnknown: {}\n  }),\n  { name: \"BackstageGauge\" }\n);\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: \"%\",\n  max: 100\n};\nconst getProgressColor = ({\n  palette,\n  value,\n  inverse,\n  max\n}) => {\n  if (isNaN(value)) {\n    return \"#ddd\";\n  }\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n  return palette.status.ok;\n};\nfunction Gauge(props) {\n  const [hoverRef, setHoverRef] = useState(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles$s(props);\n  const { palette } = useTheme();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props\n  };\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n  const [isHovering, setIsHovering] = useState(false);\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener(\"mouseenter\", handleMouseOver);\n      node.addEventListener(\"mouseleave\", handleMouseOut);\n      return () => {\n        node.removeEventListener(\"mouseenter\", handleMouseOver);\n        node.removeEventListener(\"mouseleave\", handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n  return /* @__PURE__ */ React.createElement(Box, { ...{ ref: setHoverRef }, className: classes.root }, /* @__PURE__ */ React.createElement(\n    Circle,\n    {\n      strokeLinecap: \"butt\",\n      percent: asPercentage,\n      strokeWidth: 12,\n      trailWidth: 12,\n      strokeColor: getColor({ palette, value: asActual, inverse, max }),\n      className: classes.circle\n    }\n  ), description && isHovering ? /* @__PURE__ */ React.createElement(Box, { className: classes.description }, description) : /* @__PURE__ */ React.createElement(Box, { className: classes.overlay }, isNaN(value) ? \"N/A\" : `${asActual}${unit}`));\n}\n\nconst useStyles$r = makeStyles(\n  {\n    root: {\n      height: \"100%\",\n      width: 250\n    }\n  },\n  { name: \"BackstageGaugeCard\" }\n);\nfunction GaugeCard(props) {\n  const classes = useStyles$r(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor\n  } = props;\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      title,\n      subheader,\n      deepLink,\n      variant,\n      icon\n    },\n    /* @__PURE__ */ React.createElement(Gauge, { ...gaugeProps })\n  ));\n}\n\nfunction LinearGauge(props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100\n  });\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: `${percent}%` }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\" }, /* @__PURE__ */ React.createElement(\n    Line,\n    {\n      percent,\n      strokeWidth: 4,\n      trailWidth: 4,\n      strokeColor\n    }\n  )));\n}\n\nconst useStyles$q = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageClosedDropdown\" }\n);\nconst ClosedDropdown = () => {\n  const classes = useStyles$q();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst useStyles$p = makeStyles(\n  (theme) => createStyles({\n    icon: {\n      position: \"absolute\",\n      right: theme.spacing(0.5),\n      pointerEvents: \"none\"\n    }\n  }),\n  { name: \"BackstageOpenedDropdown\" }\n);\nconst OpenedDropdown = () => {\n  const classes = useStyles$p();\n  return /* @__PURE__ */ React.createElement(\n    SvgIcon,\n    {\n      className: classes.icon,\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    },\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        d: \"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\",\n        fill: \"#616161\"\n      }\n    )\n  );\n};\n\nconst BootstrapInput = withStyles(\n  (theme) => createStyles({\n    root: {\n      \"label + &\": {\n        marginTop: theme.spacing(3)\n      }\n    },\n    input: {\n      borderRadius: theme.shape.borderRadius,\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid #ced4da\",\n      fontSize: theme.typography.body1.fontSize,\n      padding: theme.spacing(1.25, 3.25, 1.25, 1.5),\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      fontFamily: \"Helvetica Neue\",\n      \"&:focus\": {\n        background: theme.palette.background.paper,\n        borderRadius: theme.shape.borderRadius\n      }\n    }\n  }),\n  { name: \"BackstageSelectInputBase\" }\n)(InputBase);\nconst useStyles$o = makeStyles(\n  (theme) => createStyles({\n    formControl: {\n      margin: `${theme.spacing(1)} 0px`,\n      maxWidth: 300\n    },\n    label: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    formLabel: {\n      transform: \"initial\",\n      fontWeight: \"bold\",\n      fontSize: theme.typography.body2.fontSize,\n      fontFamily: theme.typography.fontFamily,\n      color: theme.palette.text.primary,\n      \"&.Mui-focused\": {\n        color: theme.palette.text.primary\n      }\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    chip: {\n      margin: 2\n    },\n    checkbox: {},\n    root: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }),\n  { name: \"BackstageSelect\" }\n);\nfunction SelectComponent(props) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin\n  } = props;\n  const classes = useStyles$o();\n  const [value, setValue] = useState(\n    selected || (multiple ? [] : \"\")\n  );\n  const [isOpen, setOpen] = useState(false);\n  useEffect(() => {\n    setValue(multiple ? [] : \"\");\n  }, [triggerReset, multiple]);\n  useEffect(() => {\n    setValue(selected || (multiple ? [] : \"\"));\n  }, [selected, multiple]);\n  const handleChange = (event) => {\n    setValue(event.target.value);\n    onChange(event.target.value);\n  };\n  const handleOpen = (event) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen((previous) => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleDelete = (selectedValue) => () => {\n    const newValue = value.filter((chip) => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(FormControl, { className: classes.formControl }, /* @__PURE__ */ React.createElement(InputLabel, { className: classes.formLabel }, label), /* @__PURE__ */ React.createElement(\n    Select,\n    {\n      \"aria-label\": label,\n      value,\n      native,\n      disabled,\n      \"data-testid\": \"select\",\n      displayEmpty: true,\n      multiple,\n      margin,\n      onChange: handleChange,\n      open: isOpen,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      input: /* @__PURE__ */ React.createElement(BootstrapInput, null),\n      label,\n      tabIndex: 0,\n      renderValue: (s) => {\n        var _a;\n        return multiple && value.length !== 0 ? /* @__PURE__ */ React.createElement(Box, { className: classes.chips }, s.map((selectedValue) => {\n          var _a2, _b;\n          return /* @__PURE__ */ React.createElement(\n            Chip,\n            {\n              key: (_a2 = items.find((el) => el.value === selectedValue)) == null ? void 0 : _a2.value,\n              label: (_b = items.find((el) => el.value === selectedValue)) == null ? void 0 : _b.label,\n              clickable: true,\n              onDelete: handleDelete(selectedValue),\n              className: classes.chip\n            }\n          );\n        })) : /* @__PURE__ */ React.createElement(Typography, null, value.length === 0 ? placeholder || \"\" : (_a = items.find((el) => el.value === s)) == null ? void 0 : _a.label);\n      },\n      IconComponent: () => !isOpen ? /* @__PURE__ */ React.createElement(ClosedDropdown, null) : /* @__PURE__ */ React.createElement(OpenedDropdown, null),\n      MenuProps: {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\"\n        },\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"left\"\n        },\n        getContentAnchorEl: null\n      }\n    },\n    placeholder && !multiple && /* @__PURE__ */ React.createElement(MenuItem, { value: [] }, placeholder),\n    native ? items && items.map((item) => /* @__PURE__ */ React.createElement(\"option\", { value: item.value, key: item.value }, item.label)) : items && items.map((item) => /* @__PURE__ */ React.createElement(MenuItem, { key: item.value, value: item.value }, multiple && /* @__PURE__ */ React.createElement(\n      Checkbox,\n      {\n        color: \"primary\",\n        checked: value.includes(item.value) || false,\n        className: classes.checkbox\n      }\n    ), item.label))\n  )));\n}\n\nconst noop = () => {\n};\nconst VerticalStepperContext = React.createContext({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop\n});\nfunction SimpleStepper(props) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState(activeStep);\n  const [stepHistory, setStepHistory] = useState([0]);\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n  const steps = [];\n  let endStep;\n  Children.forEach(children, (child) => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    VerticalStepperContext.Provider,\n    {\n      value: {\n        stepIndex,\n        setStepIndex,\n        stepHistory,\n        setStepHistory,\n        onStepChange,\n        stepperLength: Children.count(children)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      MuiStepper,\n      {\n        activeStep: stepIndex,\n        orientation: \"vertical\",\n        elevation: elevated ? 2 : 0\n      },\n      steps\n    )\n  ), stepIndex >= Children.count(children) - 1 && endStep);\n}\n\nconst useStyles$n = makeStyles(\n  (theme) => ({\n    root: {\n      marginTop: theme.spacing(3),\n      \"& button\": {\n        marginRight: theme.spacing(1)\n      }\n    }\n  }),\n  { name: \"BackstageSimpleStepperFooter\" }\n);\nconst RestartBtn = ({ text, handleClick }) => /* @__PURE__ */ React.createElement(Button$1, { onClick: handleClick }, text || \"Reset\");\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex\n}) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `nextButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || (last ? \"Finish\" : \"Next\")\n);\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled,\n    \"data-testid\": `skipButton-${stepIndex}`,\n    onClick: handleClick\n  },\n  text || \"Skip\"\n);\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }) => /* @__PURE__ */ React.createElement(\n  Button$1,\n  {\n    onClick: handleClick,\n    \"data-testid\": `backButton-${stepIndex}`,\n    disabled\n  },\n  text || \"Back\"\n);\nconst SimpleStepperFooter = ({\n  actions = {},\n  children\n}) => {\n  const classes = useStyles$n();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange\n  } = useContext(VerticalStepperContext);\n  const onChange = (newIndex, callback) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n    setStepIndex(newIndex);\n  };\n  const handleNext = () => {\n    const newIndex = actions.nextStep ? actions.nextStep(stepIndex, stepperLength - 1) : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, [void 0, true].includes(actions.showBack) && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    BackBtn,\n    {\n      text: actions.backText,\n      handleClick: handleBack,\n      disabled: stepIndex === 0,\n      stepIndex\n    }\n  ), actions.showSkip && /* @__PURE__ */ React.createElement(\n    SkipBtn,\n    {\n      text: actions.skipText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canSkip && !actions.canSkip(),\n      stepIndex\n    }\n  ), [void 0, true].includes(actions.showNext) && /* @__PURE__ */ React.createElement(\n    NextBtn,\n    {\n      text: actions.nextText,\n      handleClick: handleNext,\n      disabled: !!stepperLength && stepIndex >= stepperLength || !!actions.canNext && !actions.canNext(),\n      stepIndex\n    }\n  ), actions.showRestart && stepIndex !== 0 && /* @__PURE__ */ React.createElement(\n    RestartBtn,\n    {\n      text: actions.restartText,\n      handleClick: handleRestart,\n      stepIndex\n    }\n  ), children);\n};\n\nconst useStyles$m = makeStyles(\n  (theme) => ({\n    end: {\n      padding: theme.spacing(3)\n    }\n  }),\n  { name: \"SimpleStepperStep\" }\n);\nfunction SimpleStepperStep(props) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles$m();\n  return end ? /* @__PURE__ */ React.createElement(Box, { className: classes.end }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title), children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions: { ...actions || {}, showNext: false } })) : /* @__PURE__ */ React.createElement(MuiStep, { ...muiProps }, /* @__PURE__ */ React.createElement(StepLabel, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, title)), /* @__PURE__ */ React.createElement(StepContent, null, children, /* @__PURE__ */ React.createElement(SimpleStepperFooter, { actions })));\n}\n\nconst useStyles$l = makeStyles(\n  (theme) => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      \"&::before\": {\n        width: \"0.7em\",\n        height: \"0.7em\",\n        display: \"inline-block\",\n        marginRight: theme.spacing(1),\n        borderRadius: \"50%\",\n        content: '\"\"'\n      }\n    },\n    ok: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.ok\n      }\n    },\n    warning: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.warning\n      }\n    },\n    error: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.error\n      }\n    },\n    pending: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.pending\n      }\n    },\n    running: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.running\n      }\n    },\n    aborted: {\n      \"&::before\": {\n        backgroundColor: theme.palette.status.aborted\n      }\n    }\n  }),\n  { name: \"BackstageStatus\" }\n);\nfunction StatusOK(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.ok),\n      \"aria-label\": \"Status ok\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusWarning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.warning),\n      \"aria-label\": \"Status warning\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusError(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.error),\n      \"aria-label\": \"Status error\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusPending(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.pending),\n      \"aria-label\": \"Status pending\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusRunning(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.running),\n      \"aria-label\": \"Status running\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\nfunction StatusAborted(props) {\n  const classes = useStyles$l(props);\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: classNames(classes.status, classes.aborted),\n      \"aria-label\": \"Status aborted\",\n      \"aria-hidden\": \"true\",\n      ...props\n    }\n  );\n}\n\nconst tableTitleCellStyles = (theme) => createStyles({\n  root: {\n    fontWeight: theme.typography.fontWeightBold,\n    whiteSpace: \"nowrap\",\n    paddingRight: theme.spacing(4),\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n});\nconst tableContentCellStyles = {\n  root: {\n    border: \"0\",\n    verticalAlign: \"top\"\n  }\n};\nconst listStyles = (theme) => createStyles({\n  root: {\n    margin: theme.spacing(0, 0, -1, 0)\n  }\n});\nconst listItemStyles = (theme) => createStyles({\n  root: {\n    padding: theme.spacing(0, 0, 1, 0)\n  },\n  random: {}\n});\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: \"BackstageMetadataTableTitleCell\"\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: \"BackstageMetadataTableCell\"\n})(TableCell);\nconst MetadataTable = ({\n  dense,\n  children\n}) => /* @__PURE__ */ React.createElement(Table$1, { size: dense ? \"small\" : \"medium\" }, /* @__PURE__ */ React.createElement(TableBody, null, children));\nconst MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}) => /* @__PURE__ */ React.createElement(TableRow, null, title && /* @__PURE__ */ React.createElement(TitleCell, null, title), /* @__PURE__ */ React.createElement(ContentCell, { colSpan: title ? 1 : 2, ...rest }, children));\nconst MetadataList = withStyles(listStyles, {\n  name: \"BackstageMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(List, { disablePadding: true, className: classes.root }, children));\nconst MetadataListItem = withStyles(listItemStyles, {\n  name: \"BackstageMetadataTableListItem\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(ListItem, { className: classes.root }, children));\n\nconst listStyle = createStyles({\n  root: {\n    margin: \"0 0\",\n    listStyleType: \"none\"\n  }\n});\nconst nestedListStyle = (theme) => createStyles({\n  root: {\n    ...listStyle.root,\n    paddingLeft: theme.spacing(1)\n  }\n});\nconst StyledList = withStyles(listStyle, {\n  name: \"BackstageStructuredMetadataTableList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: \"BackstageStructuredMetadataTableNestedList\"\n})(({ classes, children }) => /* @__PURE__ */ React.createElement(MetadataList, { classes }, children));\nfunction renderList(list, nested) {\n  const values = list.map((item, index) => /* @__PURE__ */ React.createElement(MetadataListItem, { key: index }, toValue(item)));\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction renderMap(map, nested, options) {\n  const values = Object.keys(map).map((key) => {\n    const value = toValue(map[key], true);\n    const fmtKey = options && options.titleFormat ? options.titleFormat(key) : startCase(key);\n    return /* @__PURE__ */ React.createElement(MetadataListItem, { key }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, `${fmtKey}: `), value);\n  });\n  return nested ? /* @__PURE__ */ React.createElement(StyledNestedList, null, values) : /* @__PURE__ */ React.createElement(StyledList, null, values);\n}\nfunction toValue(value, options, nested) {\n  if (React.isValidElement(value)) {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value);\n  }\n  if (typeof value === \"object\" && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n  if (typeof value === \"boolean\") {\n    return /* @__PURE__ */ React.createElement(Fragment, null, value ? \"\\u2705\" : \"\\u274C\");\n  }\n  return /* @__PURE__ */ React.createElement(Typography, { variant: \"body2\", component: \"span\" }, value);\n}\nconst ItemValue = ({ value, options }) => /* @__PURE__ */ React.createElement(Fragment, null, toValue(value, options));\nconst TableItem = ({\n  title,\n  value,\n  options\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    MetadataTableItem,\n    {\n      title: options && options.titleFormat ? options.titleFormat(title) : startCase(title)\n    },\n    /* @__PURE__ */ React.createElement(ItemValue, { value, options })\n  );\n};\nfunction mapToItems(info, options) {\n  return Object.keys(info).map((key) => /* @__PURE__ */ React.createElement(TableItem, { key, title: key, value: info[key], options }));\n}\nfunction StructuredMetadataTable(props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return /* @__PURE__ */ React.createElement(MetadataTable, { dense }, metadataItems);\n}\n\nfunction stringify(queryParams) {\n  return qs.stringify(queryParams, {\n    strictNullHandling: true\n  });\n}\nfunction parse(queryString) {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true\n  });\n}\nfunction extractState(queryString, stateName) {\n  const queryParams = parse(queryString);\n  return queryParams[stateName];\n}\nfunction joinQueryString(queryString, stateName, state) {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state\n  };\n  return stringify(queryParams);\n}\nfunction useQueryParamState(stateName, debounceTime = 250) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState(\n    extractState(searchParamsString, stateName)\n  );\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n    setQueryParamState(\n      (oldState) => isEqual(newState, oldState) ? oldState : newState\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState\n      );\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime\n  );\n  return [queryParamState, setQueryParamState];\n}\n\nconst DEFAULT_SUPPORT_CONFIG = {\n  url: \"https://github.com/backstage/backstage/issues\",\n  items: [\n    {\n      title: \"Support Not Configured\",\n      icon: \"warning\",\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: \"Add `app.support` config key\",\n          url: \"https://github.com/backstage/backstage/blob/master/app-config.yaml\"\n        }\n      ]\n    }\n  ]\n};\nfunction useSupportConfig() {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config == null ? void 0 : config.getOptionalConfig(\"app.support\");\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n  return {\n    url: supportConfig.getString(\"url\"),\n    items: supportConfig.getConfigArray(\"items\").flatMap((itemConf) => {\n      var _a;\n      return {\n        title: itemConf.getString(\"title\"),\n        icon: itemConf.getOptionalString(\"icon\"),\n        links: ((_a = itemConf.getOptionalConfigArray(\"links\")) != null ? _a : []).flatMap(\n          (linkConf) => ({\n            url: linkConf.getString(\"url\"),\n            title: linkConf.getString(\"title\")\n          })\n        )\n      };\n    })\n  };\n}\n\nfunction useSystemIcon(key, props) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? /* @__PURE__ */ React.createElement(Icon, { ...props }) : /* @__PURE__ */ React.createElement(MuiBrokenImageIcon, { ...props });\n}\nfunction BrokenImageIcon(props) {\n  return useSystemIcon(\"brokenImage\", props);\n}\nfunction CatalogIcon(props) {\n  return useSystemIcon(\"catalog\", props);\n}\nfunction ChatIcon(props) {\n  return useSystemIcon(\"chat\", props);\n}\nfunction DashboardIcon(props) {\n  return useSystemIcon(\"dashboard\", props);\n}\nfunction DocsIcon(props) {\n  return useSystemIcon(\"docs\", props);\n}\nfunction EmailIcon(props) {\n  return useSystemIcon(\"email\", props);\n}\nfunction GitHubIcon(props) {\n  return useSystemIcon(\"github\", props);\n}\nfunction GroupIcon(props) {\n  return useSystemIcon(\"group\", props);\n}\nfunction HelpIcon(props) {\n  return useSystemIcon(\"help\", props);\n}\nfunction UserIcon(props) {\n  return useSystemIcon(\"user\", props);\n}\nfunction WarningIcon(props) {\n  return useSystemIcon(\"warning\", props);\n}\n\nconst useStyles$k = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400\n    }\n  },\n  { name: \"BackstageSupportButton\" }\n);\nconst SupportIcon = ({ icon }) => {\n  var _a;\n  const app = useApp();\n  const Icon = icon ? (_a = app.getSystemIcon(icon)) != null ? _a : HelpIcon : HelpIcon;\n  return /* @__PURE__ */ React.createElement(Icon, null);\n};\nconst SupportLink = ({ link }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(Link, { to: link.url }, (_a = link.title) != null ? _a : link.url);\n};\nconst SupportListItem = ({ item }) => {\n  var _a;\n  return /* @__PURE__ */ React.createElement(ListItem, null, /* @__PURE__ */ React.createElement(ListItemIcon, null, /* @__PURE__ */ React.createElement(SupportIcon, { icon: item.icon })), /* @__PURE__ */ React.createElement(\n    ListItemText,\n    {\n      primary: item.title,\n      secondary: (_a = item.links) == null ? void 0 : _a.reduce(\n        (prev, link, idx) => [\n          ...prev,\n          idx > 0 && /* @__PURE__ */ React.createElement(\"br\", { key: idx }),\n          /* @__PURE__ */ React.createElement(SupportLink, { link, key: link.url })\n        ],\n        []\n      )\n    }\n  ));\n};\nfunction SupportButton(props) {\n  const { title, items, children } = props;\n  const { items: configItems } = useSupportConfig();\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const classes = useStyles$k();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const onClickHandler = (event) => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { display: \"flex\", ml: 1 }, isSmallScreen ? /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      color: \"primary\",\n      size: \"small\",\n      onClick: onClickHandler,\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\"\n    },\n    /* @__PURE__ */ React.createElement(HelpIcon, null)\n  ) : /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      \"data-testid\": \"support-button\",\n      \"aria-label\": \"Support\",\n      color: \"primary\",\n      onClick: onClickHandler,\n      startIcon: /* @__PURE__ */ React.createElement(HelpIcon, null)\n    },\n    \"Support\"\n  )), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      \"data-testid\": \"support-button-popover\",\n      open: popoverOpen,\n      anchorEl,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"right\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      onClose: popoverCloseHandler\n    },\n    /* @__PURE__ */ React.createElement(List, { className: classes.popoverList }, title && /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\" }, title)), React.Children.map(children, (child, i) => /* @__PURE__ */ React.createElement(ListItem, { alignItems: \"flex-start\", key: `child-${i}` }, child)), (items != null ? items : configItems).map((item, i) => /* @__PURE__ */ React.createElement(SupportListItem, { item, key: `item-${i}` }))),\n    /* @__PURE__ */ React.createElement(DialogActions, null, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        onClick: popoverCloseHandler,\n        \"aria-label\": \"Close\"\n      },\n      \"Close\"\n    ))\n  ));\n}\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\nconst sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56\n};\nconst makeSidebarConfig = (customSidebarConfig) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter: sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2\n});\nconst submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200\n};\nconst makeSidebarSubmenuConfig = (customSubmenuConfig) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig\n});\nconst SIDEBAR_INTRO_LOCAL_STORAGE = \"@backstage/core/sidebar-intro-dismissed\";\nconst SidebarConfigContext = createContext({\n  sidebarConfig,\n  submenuConfig\n});\nconst SidebarItemWithSubmenuContext = createContext({\n  isHoveredOn: false,\n  setIsHoveredOn: () => {\n  }\n});\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {\n  }\n};\nconst LegacySidebarContext = createContext(\n  defaultSidebarOpenStateContext\n);\nconst VersionedSidebarContext = createVersionedContext(\"sidebar-open-state-context\");\nfunction SidebarOpenStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarOpenState = () => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n  if (versionedOpenStateContext === void 0) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return openStateContext;\n};\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {\n  },\n  isMobile: false\n};\nconst LegacySidebarPinStateContext = createContext(defaultSidebarPinStateContext);\nconst VersionedSidebarPinStateContext = createVersionedContext(\"sidebar-pin-state-context\");\nfunction SidebarPinStateProvider(props) {\n  const { children, value } = props;\n  return /* @__PURE__ */ React.createElement(LegacySidebarPinStateContext.Provider, { value }, /* @__PURE__ */ React.createElement(\n    VersionedSidebarPinStateContext.Provider,\n    {\n      value: createVersionedValueMap({ 1: value })\n    },\n    children\n  ));\n}\nconst useSidebarPinState = () => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n  if (versionedPinStateContext === void 0) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return pinStateContext;\n};\n\nconst useStyles$j = makeStyles(\n  (theme) => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color\n    },\n    selected: (props) => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: \"-1px\"\n    }),\n    label: {\n      display: \"none\"\n    }\n  })\n);\nconst MobileSidebarGroup = (props) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$j({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } = useContext(MobileSidebarContext);\n  const onChange = (_, value2) => {\n    if (value2 === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value2);\n    }\n  };\n  const selected = value === selectedMenuItemIndex && selectedMenuItemIndex >= 0 || !(value === selectedMenuItemIndex) && !(selectedMenuItemIndex >= 0) && to === location.pathname;\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    /* @__PURE__ */ React.createElement(\n      BottomNavigationAction,\n      {\n        \"aria-label\": label,\n        label,\n        icon,\n        component: Link,\n        to: to ? to : location.pathname,\n        onChange,\n        value,\n        selected,\n        classes\n      }\n    )\n  );\n};\nconst SidebarGroup = (props) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebarGroup, { to, label, icon, value }) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\n\nconst useStyles$i = makeStyles(\n  (theme) => ({\n    root: {\n      position: \"fixed\",\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: \"1px solid #383838\"\n    },\n    overlay: (props) => ({\n      background: theme.palette.navigation.background,\n      width: \"100%\",\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: \"0 1 auto\",\n      overflow: \"auto\"\n    }),\n    overlayHeader: {\n      display: \"flex\",\n      color: theme.palette.text.primary,\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      padding: theme.spacing(2, 3)\n    },\n    overlayHeaderClose: {\n      color: theme.palette.text.primary\n    },\n    marginMobileSidebar: (props) => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`\n    })\n  })\n);\nconst sortSidebarGroupsForPriority = (children) => orderBy(\n  children,\n  ({ props: { priority } }) => Number.isInteger(priority) ? priority : -1,\n  \"desc\"\n);\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\nconst OverlayMenu = ({\n  children,\n  label = \"Menu\",\n  open,\n  onClose\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$i({ sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    Drawer,\n    {\n      anchor: \"bottom\",\n      open,\n      onClose,\n      ModalProps: {\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } }\n      },\n      classes: {\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay\n      }\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.overlayHeader }, /* @__PURE__ */ React.createElement(Typography, { variant: \"h3\" }, label), /* @__PURE__ */ React.createElement(\n      IconButton,\n      {\n        onClick: onClose,\n        classes: { root: classes.overlayHeaderClose }\n      },\n      /* @__PURE__ */ React.createElement(CloseIcon, null)\n    )),\n    /* @__PURE__ */ React.createElement(Box, { component: \"nav\" }, children)\n  );\n};\nconst MobileSidebarContext = createContext({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {\n  }\n});\nconst MobileSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles$i({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] = useState(-1);\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n  let sidebarGroups = useElementFilter(\n    children,\n    (elements) => elements.getElements().filter((child) => child.type === sidebarGroupType)\n  );\n  if (!children) {\n    return null;\n  } else if (!sidebarGroups.length) {\n    sidebarGroups.push(\n      /* @__PURE__ */ React.createElement(SidebarGroup, { key: \"default_menu\", icon: /* @__PURE__ */ React.createElement(MenuIcon, null) }, children)\n    );\n  } else {\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n  const shouldShowGroupChildren = selectedMenuItemIndex >= 0 && !sidebarGroups[selectedMenuItemIndex].props.to;\n  return /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen: true, setOpen: () => {\n  } } }, /* @__PURE__ */ React.createElement(\n    MobileSidebarContext.Provider,\n    {\n      value: { selectedMenuItemIndex, setSelectedMenuItemIndex }\n    },\n    /* @__PURE__ */ React.createElement(\n      OverlayMenu,\n      {\n        label: sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.label,\n        open: shouldShowGroupChildren,\n        onClose: () => setSelectedMenuItemIndex(-1)\n      },\n      sidebarGroups[selectedMenuItemIndex] && sidebarGroups[selectedMenuItemIndex].props.children\n    ),\n    /* @__PURE__ */ React.createElement(\n      BottomNavigation,\n      {\n        className: classes.root,\n        \"data-testid\": \"mobile-sidebar-root\",\n        component: \"nav\"\n      },\n      sidebarGroups\n    )\n  ));\n};\n\nconst LocalStorage = {\n  getSidebarPinState() {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(\"sidebarPinState\" /* SIDEBAR_PIN_STATE */) || \"true\"\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state) {\n    return window.localStorage.setItem(\n      \"sidebarPinState\" /* SIDEBAR_PIN_STATE */,\n      JSON.stringify(state)\n    );\n  }\n};\n\nconst useStyles$h = makeStyles(\n  (theme) => ({\n    root: {\n      width: \"100%\",\n      transition: \"padding-left 0.1s ease-out\",\n      isolation: \"isolate\",\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: (props) => props.isPinned ? props.sidebarConfig.drawerWidthOpen : props.sidebarConfig.drawerWidthClosed\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: (props) => props.sidebarConfig.mobileSidebarHeight\n      }\n    },\n    content: {\n      zIndex: 0,\n      isolation: \"isolate\",\n      \"&:focus\": {\n        outline: 0\n      }\n    }\n  }),\n  { name: \"BackstageSidebarPage\" }\n);\nconst PageContext = createContext({\n  content: {\n    contentRef: void 0\n  }\n});\nfunction SidebarPage(props) {\n  const [isPinned, setIsPinned] = useState(\n    () => LocalStorage.getSidebarPinState()\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const contentRef = useRef(null);\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef\n      }\n    }),\n    [contentRef]\n  );\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n  const isMobile = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"xs\"),\n    { noSsr: true }\n  );\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n  const classes = useStyles$h({ isPinned, sidebarConfig });\n  return /* @__PURE__ */ React.createElement(\n    SidebarPinStateProvider,\n    {\n      value: {\n        isPinned,\n        toggleSidebarPinState,\n        isMobile\n      }\n    },\n    /* @__PURE__ */ React.createElement(PageContext.Provider, { value: pageContext }, /* @__PURE__ */ React.createElement(Box, { className: classes.root }, props.children))\n  );\n}\nfunction useContent() {\n  const { content } = useContext(PageContext);\n  const focusContent = useCallback(() => {\n    var _a, _b;\n    (_b = (_a = content == null ? void 0 : content.contentRef) == null ? void 0 : _a.current) == null ? void 0 : _b.focus();\n  }, [content]);\n  return { focusContent, contentRef: content == null ? void 0 : content.contentRef };\n}\n\nconst useStyles$g = makeStyles(\n  (theme) => ({\n    drawer: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\",\n      alignItems: \"flex-start\",\n      position: \"fixed\",\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: \"hidden\",\n      msOverflowStyle: \"none\",\n      scrollbarWidth: \"none\",\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest\n      }),\n      \"& > *\": {\n        flexShrink: 0\n      },\n      \"&::-webkit-scrollbar\": {\n        display: \"none\"\n      }\n    },\n    drawerWidth: (props) => ({\n      width: props.sidebarConfig.drawerWidthClosed\n    }),\n    drawerOpen: (props) => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create(\"width\", {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter\n      })\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: \"absolute\",\n      zIndex: 1e3,\n      transform: \"translateY(-200%)\",\n      \"&:focus\": {\n        transform: \"translateY(5px)\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebar\" }\n);\nconst DesktopSidebar = (props) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children\n  } = props;\n  const classes = useStyles$g({ sidebarConfig });\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  const [state, setState] = useState(0 /* Closed */);\n  const hoverTimerRef = useRef();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state !== 2 /* Open */ && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(2 /* Open */);\n      }, openDelayMs);\n      setState(1 /* Idle */);\n    }\n  };\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = void 0;\n    }\n    if (state === 1 /* Idle */) {\n      setState(0 /* Closed */);\n    } else if (state === 2 /* Open */) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = void 0;\n        setState(0 /* Closed */);\n      }, closeDelayMs);\n    }\n  };\n  const isOpen = state === 2 /* Open */ && !isSmallScreen || isPinned;\n  const setOpen = (open) => {\n    if (open) {\n      setState(2 /* Open */);\n      toggleSidebarPinState();\n    } else {\n      setState(0 /* Closed */);\n      toggleSidebarPinState();\n    }\n  };\n  return /* @__PURE__ */ React.createElement(\"nav\", { style: {}, \"aria-label\": \"sidebar nav\" }, /* @__PURE__ */ React.createElement(A11ySkipSidebar, null), /* @__PURE__ */ React.createElement(SidebarOpenStateProvider, { value: { isOpen, setOpen } }, /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classes.root,\n      \"data-testid\": \"sidebar-root\",\n      onMouseEnter: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onFocus: disableExpandOnHover ? () => {\n      } : handleOpen,\n      onMouseLeave: disableExpandOnHover ? () => {\n      } : handleClose,\n      onBlur: disableExpandOnHover ? () => {\n      } : handleClose\n    },\n    /* @__PURE__ */ React.createElement(\n      Box,\n      {\n        className: classNames(classes.drawer, classes.drawerWidth, {\n          [classes.drawerOpen]: isOpen\n        })\n      },\n      children\n    )\n  )));\n};\nconst Sidebar = (props) => {\n  var _a, _b;\n  const sidebarConfig = makeSidebarConfig(\n    (_a = props.sidebarOptions) != null ? _a : {}\n  );\n  const submenuConfig = makeSidebarSubmenuConfig(\n    (_b = props.submenuOptions) != null ? _b : {}\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n  return isMobile ? /* @__PURE__ */ React.createElement(MobileSidebar, null, children) : /* @__PURE__ */ React.createElement(SidebarConfigContext.Provider, { value: { sidebarConfig, submenuConfig } }, /* @__PURE__ */ React.createElement(\n    DesktopSidebar,\n    {\n      openDelayMs,\n      closeDelayMs,\n      disableExpandOnHover\n    },\n    children\n  ));\n};\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles$g({ sidebarConfig });\n  if (!(contentRef == null ? void 0 : contentRef.current)) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      onClick: focusContent,\n      variant: \"contained\",\n      className: classNames(classes.visuallyHidden)\n    },\n    \"Skip to content\"\n  );\n}\n\nfunction isLocationMatch(currentLocation, toLocation) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n  const matching = isEqual(toLocation.pathname, currentLocation.pathname) && isMatch(currentQueryParameters, toQueryParameters);\n  return matching;\n}\n\nconst useStyles$f = makeStyles(\n  (theme) => {\n    var _a, _b;\n    return {\n      item: {\n        height: 48,\n        width: \"100%\",\n        \"&:hover\": {\n          background: ((_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        },\n        display: \"flex\",\n        alignItems: \"center\",\n        color: theme.palette.navigation.color,\n        padding: theme.spacing(2.5),\n        cursor: \"pointer\",\n        position: \"relative\",\n        background: \"none\",\n        border: \"none\"\n      },\n      itemContainer: {\n        width: \"100%\"\n      },\n      selected: {\n        background: \"#6f6f6f\",\n        color: theme.palette.common.white\n      },\n      label: {\n        margin: theme.spacing(1.75),\n        marginLeft: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\",\n        lineHeight: 1\n      },\n      subtitle: {\n        fontSize: 10,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      dropdownArrow: {\n        position: \"absolute\",\n        right: 21\n      },\n      dropdown: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"end\"\n      },\n      dropdownItem: {\n        width: \"100%\",\n        padding: \"10px 0 10px 0\",\n        \"&:hover\": {\n          background: ((_b = theme.palette.navigation.navItem) == null ? void 0 : _b.hoverBackground) || \"#6f6f6f\",\n          color: theme.palette.navigation.selectedColor\n        }\n      },\n      textContent: {\n        color: theme.palette.navigation.color,\n        paddingLeft: theme.spacing(4),\n        paddingRight: theme.spacing(1),\n        fontSize: theme.typography.body2.fontSize,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      }\n    };\n  },\n  { name: \"BackstageSidebarSubmenuItem\" }\n);\nconst SidebarSubmenuItem = (props) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles$f();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath$1(to != null ? to : \"\");\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== void 0) {\n    dropdownItems.some((item) => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        onClick: handleClickDropdown,\n        onTouchStart: (e) => e.stopPropagation(),\n        className: classNames(\n          classes.item,\n          isActive ? classes.selected : void 0\n        )\n      },\n      Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\", className: classes.label }, title, /* @__PURE__ */ React.createElement(\"br\", null), subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", className: classes.subtitle }, subtitle)),\n      showDropDown ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { className: classes.dropdownArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { className: classes.dropdownArrow })\n    )), dropdownItems && showDropDown && /* @__PURE__ */ React.createElement(Box, { className: classes.dropdown }, dropdownItems.map((object, key) => /* @__PURE__ */ React.createElement(\n      Tooltip,\n      {\n        key,\n        title: object.title,\n        enterDelay: 500,\n        enterNextDelay: 500\n      },\n      /* @__PURE__ */ React.createElement(\n        Link,\n        {\n          to: object.to,\n          underline: \"none\",\n          className: classes.dropdownItem,\n          onClick: closeSubmenu,\n          onTouchStart: (e) => e.stopPropagation()\n        },\n        /* @__PURE__ */ React.createElement(Typography, { className: classes.textContent }, object.title)\n      )\n    ))));\n  }\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.itemContainer }, /* @__PURE__ */ React.createElement(Tooltip, { title, enterDelay: 500, enterNextDelay: 500 }, /* @__PURE__ */ React.createElement(\n    Link,\n    {\n      to,\n      underline: \"none\",\n      className: classNames(\n        classes.item,\n        isActive ? classes.selected : void 0\n      ),\n      onClick: closeSubmenu,\n      onTouchStart: (e) => e.stopPropagation()\n    },\n    Icon && /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }),\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle1\", className: classes.label }, title, /* @__PURE__ */ React.createElement(\"br\", null), subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"caption\", className: classes.subtitle }, subtitle))\n  )));\n};\n\nconst useStyles$e = makeStyles(\n  (theme) => ({\n    root: {\n      zIndex: 1e3,\n      position: \"relative\",\n      overflow: \"visible\",\n      width: theme.spacing(7) + 1\n    },\n    drawer: (props) => {\n      var _a, _b;\n      return {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        alignItems: \"flex-start\",\n        position: \"fixed\",\n        [theme.breakpoints.up(\"sm\")]: {\n          marginLeft: props.left,\n          transition: theme.transitions.create(\"margin-left\", {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.shortest\n          })\n        },\n        top: 0,\n        bottom: 0,\n        padding: 0,\n        background: (_b = (_a = theme.palette.navigation.submenu) == null ? void 0 : _a.background) != null ? _b : \"#404040\",\n        overflowX: \"hidden\",\n        msOverflowStyle: \"none\",\n        scrollbarWidth: \"none\",\n        cursor: \"default\",\n        width: props.submenuConfig.drawerWidthClosed,\n        transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n        \"& > *\": {\n          flexShrink: 0\n        },\n        \"&::-webkit-scrollbar\": {\n          display: \"none\"\n        }\n      };\n    },\n    drawerOpen: (props) => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n        position: \"relative\",\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0\n      }\n    }),\n    title: {\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.common.white,\n      padding: theme.spacing(2.5),\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\"\n      }\n    }\n  }),\n  { name: \"BackstageSidebarSubmenu\" }\n);\nconst SidebarSubmenu = (props) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen ? sidebarConfig.drawerWidthOpen : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles$e({ left, submenuConfig });\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n  return /* @__PURE__ */ React.createElement(\n    Box,\n    {\n      className: classNames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen\n      })\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", className: classes.title }, props.title),\n    props.children\n  );\n};\n\nconst useStyles$d = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowLeft = () => {\n  const classes = useStyles$d();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowBackIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst useStyles$c = makeStyles({\n  iconContainer: {\n    display: \"flex\",\n    position: \"relative\",\n    width: \"100%\"\n  },\n  arrow1: {\n    right: \"6px\",\n    position: \"absolute\"\n  }\n});\nconst DoubleArrowRight = () => {\n  const classes = useStyles$c();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.iconContainer }, /* @__PURE__ */ React.createElement(Box, { className: classes.arrow1 }, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })), /* @__PURE__ */ React.createElement(Box, null, /* @__PURE__ */ React.createElement(ArrowForwardIosIcon, { style: { fontSize: \"12px\" } })));\n};\n\nconst makeSidebarStyles = (sidebarConfig) => makeStyles(\n  (theme) => {\n    var _a, _b, _c, _d;\n    return {\n      root: {\n        color: theme.palette.navigation.color,\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        alignItems: \"center\",\n        height: 48,\n        cursor: \"pointer\"\n      },\n      buttonItem: {\n        background: \"none\",\n        border: \"none\",\n        width: \"100%\",\n        margin: 0,\n        padding: 0,\n        textAlign: \"inherit\",\n        font: \"inherit\",\n        textTransform: \"none\"\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: \"center\"\n      },\n      open: {\n        [theme.breakpoints.up(\"sm\")]: {\n          width: sidebarConfig.drawerWidthOpen\n        }\n      },\n      highlightable: {\n        \"&:hover\": {\n          background: (_b = (_a = theme.palette.navigation.navItem) == null ? void 0 : _a.hoverBackground) != null ? _b : \"#404040\"\n        }\n      },\n      highlighted: {\n        background: (_d = (_c = theme.palette.navigation.navItem) == null ? void 0 : _c.hoverBackground) != null ? _d : \"#404040\"\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: \"bold\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"auto\",\n        flex: \"3 1 auto\",\n        width: \"110px\",\n        overflow: \"hidden\",\n        \"text-overflow\": \"ellipsis\"\n      },\n      iconContainer: {\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        lineHeight: \"0\"\n      },\n      searchRoot: {\n        marginBottom: 12\n      },\n      searchField: {\n        color: \"#b5b5b5\",\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: theme.typography.fontSize\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2)\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: \"center\",\n        marginRight: theme.spacing(1)\n      },\n      closedItemIcon: {\n        width: \"100%\",\n        justifyContent: \"center\"\n      },\n      submenuArrow: {\n        display: \"flex\"\n      },\n      expandButton: {\n        background: \"none\",\n        border: \"none\",\n        color: theme.palette.navigation.color,\n        width: \"100%\",\n        cursor: \"pointer\",\n        position: \"relative\",\n        height: 48\n      },\n      arrows: {\n        position: \"absolute\",\n        right: 10\n      },\n      selected: {\n        \"&$root\": {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor\n        },\n        \"&$closed\": {\n          width: sidebarConfig.drawerWidthClosed\n        },\n        \"& $closedItemIcon\": {\n          paddingRight: sidebarConfig.selectedIndicatorWidth\n        },\n        \"& $iconContainer\": {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth\n        }\n      }\n    };\n  },\n  { name: \"BackstageSidebarItem\" }\n);\nfunction useMemoStyles(sidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig]\n  );\n  return useStyles();\n}\nconst useLocationMatch = (submenu, location) => useElementFilter(\n  submenu.props.children,\n  (elements) => {\n    let active = false;\n    elements.getElements().forEach(\n      ({\n        props: { to, dropdownItems }\n      }) => {\n        if (!active) {\n          if (dropdownItems == null ? void 0 : dropdownItems.length) {\n            dropdownItems.forEach(\n              ({ to: _to }) => active = active || isLocationMatch(location, resolvePath(_to))\n            );\n            return;\n          }\n          if (to) {\n            active = isLocationMatch(location, resolvePath(to));\n          }\n        }\n      }\n    );\n    return active;\n  },\n  [location.pathname]\n);\nfunction isButtonItem(props) {\n  return props.to === void 0;\n}\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\nconst WorkaroundNavLink = React.forwardRef(function WorkaroundNavLinkWithRef({\n  to,\n  end,\n  style,\n  className,\n  activeStyle,\n  caseSensitive,\n  activeClassName = \"active\",\n  \"aria-current\": ariaCurrentProp = \"page\",\n  ...rest\n}, ref) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath$1(to);\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase(\"en-US\");\n    toPathname = toPathname.toLocaleLowerCase(\"en-US\");\n  }\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n  const ariaCurrent = isActive ? ariaCurrentProp : void 0;\n  return /* @__PURE__ */ React.createElement(\n    Link$1,\n    {\n      ...rest,\n      to,\n      ref,\n      \"aria-current\": ariaCurrent,\n      style: { ...style, ...isActive ? activeStyle : void 0 },\n      className: classNames([\n        className,\n        isActive ? activeClassName : void 0\n      ])\n    }\n  );\n});\nconst SidebarItemBase = forwardRef((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    noTrack,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen } = useSidebarOpenState();\n  const divStyle = !isOpen && hasSubmenu ? { display: \"flex\", marginLeft: \"20px\" } : { lineHeight: \"0\" };\n  const displayItemIcon = /* @__PURE__ */ React.createElement(Box, { style: divStyle }, /* @__PURE__ */ React.createElement(Icon, { fontSize: \"small\" }), !isOpen && hasSubmenu ? /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\" }) : /* @__PURE__ */ React.createElement(React.Fragment, null));\n  const itemIcon = /* @__PURE__ */ React.createElement(\n    Badge,\n    {\n      color: \"secondary\",\n      variant: \"dot\",\n      overlap: \"circular\",\n      invisible: !hasNotifications,\n      className: classNames({ [classes.closedItemIcon]: !isOpen })\n    },\n    displayItemIcon\n  );\n  const openContent = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { \"data-testid\": \"login-button\", className: classes.iconContainer }, itemIcon), text && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", className: classes.label }, text), /* @__PURE__ */ React.createElement(\"div\", { className: classes.secondaryAction }, children));\n  const content = isOpen ? openContent : itemIcon;\n  const childProps = {\n    onClick,\n    className: classNames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight }\n    )\n  };\n  const analyticsApi = useAnalytics();\n  const { pathname: to } = useResolvedPath$1(\n    !isButtonItem(props) && props.to ? props.to : \"\"\n  );\n  const handleClick = useCallback(\n    (event) => {\n      if (!noTrack) {\n        const action = \"click\";\n        const subject = text != null ? text : \"Sidebar Item\";\n        const options = to ? { attributes: { to } } : void 0;\n        analyticsApi.captureEvent(action, subject, options);\n      }\n      onClick == null ? void 0 : onClick(event);\n    },\n    [analyticsApi, text, to, noTrack, onClick]\n  );\n  if (isButtonItem(props)) {\n    return /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        role: \"button\",\n        \"aria-label\": text,\n        ...childProps,\n        ref,\n        onClick: handleClick\n      },\n      content\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\n    WorkaroundNavLink,\n    {\n      ...childProps,\n      activeClassName: classes.selected,\n      to: props.to ? props.to : \"\",\n      ref,\n      \"aria-label\": text ? text : props.to,\n      ...navLinkProps,\n      onClick: handleClick\n    },\n    content\n  );\n});\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"sm\")\n  );\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? /* @__PURE__ */ React.createElement(ArrowDropUpIcon, { fontSize: \"small\", className: classes.submenuArrow }) : /* @__PURE__ */ React.createElement(ArrowDropDownIcon, { fontSize: \"small\", className: classes.submenuArrow });\n    }\n    return !isHoveredOn && /* @__PURE__ */ React.createElement(ArrowRightIcon, { fontSize: \"small\", className: classes.submenuArrow });\n  };\n  return /* @__PURE__ */ React.createElement(\n    SidebarItemWithSubmenuContext.Provider,\n    {\n      value: {\n        isHoveredOn,\n        setIsHoveredOn\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"div\",\n      {\n        \"data-testid\": \"item-with-submenu\",\n        onMouseLeave: handleMouseLeave,\n        onTouchStart: isHoveredOn ? handleMouseLeave : handleMouseEnter,\n        onMouseEnter: handleMouseEnter,\n        className: classNames(isHoveredOn && classes.highlighted)\n      },\n      /* @__PURE__ */ React.createElement(\n        SidebarItemBase,\n        {\n          hasSubmenu: true,\n          className: isActive ? classes.selected : \"\",\n          ...props\n        },\n        arrowIcon()\n      ),\n      isHoveredOn && children\n    )\n  );\n};\nconst SidebarItem = forwardRef((props, ref) => {\n  const [submenu] = useElementFilter(\n    props.children,\n    (elements) => (\n      // Directly comparing child.type with SidebarSubmenu will not work with in\n      // combination with react-hot-loader\n      //\n      // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n      elements.getElements().filter((child) => child.type === sidebarSubmenuType)\n    )\n  );\n  if (submenu) {\n    return /* @__PURE__ */ React.createElement(SidebarItemWithSubmenu, { ...props }, submenu);\n  }\n  return /* @__PURE__ */ React.createElement(SidebarItemBase, { ...props, ref });\n});\nfunction SidebarSearchField(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState(\"\");\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n  const search = () => {\n    props.onSearch(input);\n    setInput(\"\");\n  };\n  const handleEnter = (ev) => {\n    if (ev.key === \"Enter\") {\n      ev.preventDefault();\n      search();\n    }\n  };\n  const handleInput = (ev) => {\n    setInput(ev.target.value);\n  };\n  const handleInputClick = (ev) => {\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n  const handleItemClick = (ev) => {\n    search();\n    ev.preventDefault();\n  };\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.searchRoot }, /* @__PURE__ */ React.createElement(\n    SidebarItem,\n    {\n      icon: Icon,\n      to: props.to,\n      onClick: handleItemClick,\n      disableHighlight: true\n    },\n    /* @__PURE__ */ React.createElement(\n      TextField,\n      {\n        placeholder: \"Search\",\n        value: input,\n        onClick: handleInputClick,\n        onChange: handleInput,\n        onKeyDown: handleEnter,\n        className: classes.searchContainer,\n        InputProps: {\n          disableUnderline: true,\n          className: classes.searchField\n        },\n        inputProps: {\n          className: classes.searchFieldHTMLInput\n        }\n      }\n    )\n  ));\n}\nconst SidebarSpace = styled(\"div\")(\n  {\n    flex: 1\n  },\n  { name: \"BackstageSidebarSpace\" }\n);\nconst SidebarSpacer = styled(\"div\")(\n  {\n    height: 8\n  },\n  { name: \"BackstageSidebarSpacer\" }\n);\nconst SidebarDivider = styled(\"hr\")(\n  ({ theme }) => ({\n    height: 1,\n    width: \"100%\",\n    background: \"#383838\",\n    border: \"none\",\n    margin: theme.spacing(1.2, 0)\n  }),\n  { name: \"BackstageSidebarDivider\" }\n);\nconst styledScrollbar = (theme) => ({\n  overflowY: \"auto\",\n  \"&::-webkit-scrollbar\": {\n    backgroundColor: theme.palette.background.default,\n    width: \"5px\",\n    borderRadius: \"5px\"\n  },\n  \"&::-webkit-scrollbar-thumb\": {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: \"5px\"\n  }\n});\nconst SidebarScrollWrapper = styled(\"div\")(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: \"0 1 auto\",\n    overflowX: \"hidden\",\n    // 5px space to the right of the scrollbar\n    width: \"calc(100% - 5px)\",\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: \"48px\",\n    overflowY: \"hidden\",\n    \"@media (hover: none)\": scrollbarStyles,\n    \"&:hover\": scrollbarStyles\n  };\n});\nconst SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery(\n    (theme) => theme.breakpoints.down(\"md\"),\n    { noSsr: true }\n  );\n  if (isSmallScreen) {\n    return null;\n  }\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n  return /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      role: \"button\",\n      onClick: handleClick,\n      className: classes.expandButton,\n      \"aria-label\": \"Expand Sidebar\",\n      \"data-testid\": \"sidebar-expand-button\"\n    },\n    /* @__PURE__ */ React.createElement(Box, { className: classes.arrows }, isOpen ? /* @__PURE__ */ React.createElement(DoubleArrowLeft, null) : /* @__PURE__ */ React.createElement(DoubleArrowRight, null))\n  );\n};\n\nconst useStyles$b = makeStyles(\n  (theme) => ({\n    introCard: (props) => ({\n      color: \"#b5b5b5\",\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: theme.spacing(2.25),\n      marginBottom: theme.spacing(1.5),\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding\n    }),\n    introDismiss: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginTop: theme.spacing(1.5)\n    },\n    introDismissLink: {\n      color: \"#dddddd\",\n      display: \"flex\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(0.5),\n      \"&:hover\": {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create(\"color\", {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest\n        })\n      }\n    },\n    introDismissText: {\n      fontSize: \"0.7rem\",\n      fontWeight: \"bold\",\n      textTransform: \"uppercase\",\n      letterSpacing: 1\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: theme.spacing(1.5)\n    }\n  }),\n  { name: \"BackstageSidebarIntro\" }\n);\nfunction IntroCard(props) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles$b({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.introCard }, /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\" }, text), /* @__PURE__ */ React.createElement(Box, { className: classes.introDismiss }, /* @__PURE__ */ React.createElement(IconButton, { onClick: handleClose, className: classes.introDismissLink }, /* @__PURE__ */ React.createElement(CloseIcon, { className: classes.introDismissIcon }), /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.introDismissText }, \"Dismiss\"))));\n}\nconst SidebarIntroCard = (props) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return /* @__PURE__ */ React.createElement(Collapse, { in: !collapsing, onExited: onDismiss }, /* @__PURE__ */ React.createElement(IntroCard, { text, onClose: startDismissing }));\n};\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (\\u2B50) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText = \"And your recently viewed plugins will pop up here!\";\nfunction SidebarIntro(_props) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false\n  };\n  const { value: dismissedIntro, set: setDismissedIntro } = useLocalStorageValue(SIDEBAR_INTRO_LOCAL_STORAGE);\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } = dismissedIntro != null ? dismissedIntro : {};\n  const dismissStarred = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro((state) => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true\n    }));\n  };\n  if (!isOpen) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, !starredItemsDismissed && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: starredIntroText,\n      onDismiss: dismissStarred\n    }\n  ), /* @__PURE__ */ React.createElement(SidebarDivider, null)), !recentlyViewedItemsDismissed && /* @__PURE__ */ React.createElement(\n    SidebarIntroCard,\n    {\n      text: recentlyViewedIntroText,\n      onDismiss: dismissRecentlyViewed\n    }\n  ));\n}\n\nconst useStyles$a = makeStyles(\n  (theme) => ({\n    root: {\n      gridArea: \"pageContent\",\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up(\"sm\")]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3)\n      }\n    },\n    stretch: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      flexGrow: 1\n    },\n    noPadding: {\n      padding: 0\n    }\n  }),\n  { name: \"BackstageContent\" }\n);\nfunction Content(props) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n  const { contentRef } = useContent();\n  const classes = useStyles$a();\n  return /* @__PURE__ */ React.createElement(\n    \"article\",\n    {\n      ref: contentRef,\n      tabIndex: -1,\n      ...restProps,\n      className: classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding\n      })\n    },\n    children\n  );\n}\n\nconst useStyles$9 = makeStyles(\n  (theme) => ({\n    tabsWrapper: {\n      gridArea: \"pageSubheader\",\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: \"uppercase\",\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary\n    },\n    selected: {\n      color: theme.palette.text.primary\n    },\n    tabRoot: {\n      \"&:hover\": {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary\n      }\n    }\n  }),\n  { name: \"BackstageHeaderTabs\" }\n);\nfunction HeaderTabs(props) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState(selectedIndex != null ? selectedIndex : 0);\n  const styles = useStyles$9();\n  const handleChange = useCallback(\n    (_, index) => {\n      if (selectedIndex === void 0) {\n        setSelectedTab(index);\n      }\n      if (onChange && selectedIndex !== index)\n        onChange(index);\n    },\n    [selectedIndex, onChange]\n  );\n  useEffect(() => {\n    if (selectedIndex !== void 0) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n  return /* @__PURE__ */ React.createElement(Box, { className: styles.tabsWrapper }, /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      indicatorColor: \"primary\",\n      textColor: \"inherit\",\n      variant: \"scrollable\",\n      scrollButtons: \"auto\",\n      \"aria-label\": \"tabs\",\n      onChange: handleChange,\n      value: selectedTab\n    },\n    tabs.map((tab, index) => /* @__PURE__ */ React.createElement(\n      TabUI,\n      {\n        ...tab.tabProps,\n        \"data-testid\": `header-tab-${index}`,\n        label: tab.label,\n        key: tab.id,\n        value: index,\n        className: styles.defaultTab,\n        classes: { selected: styles.selected, root: styles.tabRoot }\n      }\n    ))\n  ));\n}\n\nfunction useSelectedSubRoute(subRoutes) {\n  var _a, _b, _c, _d;\n  const params = useParams();\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children\n  }));\n  const sortedRoutes = routes.sort(\n    (a, b) => (\n      // remove \"/*\" symbols from path end before comparing\n      b.path.replace(/\\/\\*$/, \"\").localeCompare(a.path.replace(/\\/\\*$/, \"\"))\n    )\n  );\n  const element = (_a = useRoutes(sortedRoutes)) != null ? _a : subRoutes[0].children;\n  let currentRoute = (_b = params[\"*\"]) != null ? _b : \"\";\n  if (!currentRoute.startsWith(\"/\")) {\n    currentRoute = `/${currentRoute}`;\n  }\n  const [matchedRoute] = (_c = matchRoutes(sortedRoutes, currentRoute)) != null ? _c : [];\n  const foundIndex = matchedRoute ? subRoutes.findIndex((t) => `${t.path}/*` === matchedRoute.route.path) : 0;\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: (_d = subRoutes[foundIndex]) != null ? _d : subRoutes[0]\n  };\n}\nfunction RoutedTabs(props) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () => routes.map((t) => ({\n      id: t.path,\n      label: t.title,\n      tabProps: t.tabProps\n    })),\n    [routes]\n  );\n  const onTabChange = (tabIndex) => {\n    let { path } = routes[tabIndex];\n    path = path.replace(/\\/\\*$/, \"\");\n    path = path.replace(/^\\//, \"\");\n    navigate(path);\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n    HeaderTabs,\n    {\n      tabs: headerTabs,\n      selectedIndex: index,\n      onChange: onTabChange\n    }\n  ), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Helmet, { title: route.title }), element));\n}\n\nconst Route = () => null;\nattachComponentData(Route, \"core.gatherMountPoints\", true);\nfunction createSubRoutesFromChildren(childrenProps) {\n  const routeType = (/* @__PURE__ */ React.createElement(Route, { path: \"\", title: \"\" }, /* @__PURE__ */ React.createElement(\"div\", null))).type;\n  return Children.toArray(childrenProps).flatMap((child) => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n    if (child.type !== routeType) {\n      throw new Error(\"Child of TabbedLayout must be an TabbedLayout.Route\");\n    }\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\nfunction TabbedLayout(props) {\n  const routes = createSubRoutesFromChildren(props.children);\n  return /* @__PURE__ */ React.createElement(RoutedTabs, { routes });\n}\nTabbedLayout.Route = Route;\n\nconst useSubvalueCellStyles = makeStyles(\n  (theme) => ({\n    value: {\n      marginBottom: theme.spacing(0.75)\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: \"normal\"\n    }\n  }),\n  { name: \"BackstageSubvalueCell\" }\n);\nfunction SubvalueCell(props) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, value), /* @__PURE__ */ React.createElement(Box, { className: classes.subvalue }, subvalue));\n}\n\nconst useFilterStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      height: \"100%\",\n      width: \"315px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      marginRight: theme.spacing(3)\n    },\n    value: {\n      fontWeight: \"bold\",\n      fontSize: 18\n    },\n    header: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: theme.spacing(7.5),\n      justifyContent: \"space-between\",\n      borderBottom: `1px solid ${theme.palette.grey[500]}`\n    },\n    filters: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      \"& > *\": {\n        marginTop: theme.spacing(2)\n      }\n    }\n  }),\n  { name: \"BackstageTableFilters\" }\n);\nconst Filters = (props) => {\n  var _a;\n  const classes = useFilterStyles$1();\n  const { onChangeFilters } = props;\n  const [selectedFilters, setSelectedFilters] = useState({\n    ...props.selectedFilters\n  });\n  const [reset, triggerReset] = useState(false);\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset((el) => !el);\n  };\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, /* @__PURE__ */ React.createElement(Box, { className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.value }, \"Filters\"), /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", onClick: handleClick }, \"Clear all\")), /* @__PURE__ */ React.createElement(Box, { className: classes.filters }, ((_a = props.filters) == null ? void 0 : _a.length) && props.filters.map((filter) => /* @__PURE__ */ React.createElement(\n    SelectComponent,\n    {\n      triggerReset: reset,\n      key: filter.element.label,\n      ...filter.element,\n      selected: selectedFilters[filter.element.label],\n      onChange: (el) => setSelectedFilters({\n        ...selectedFilters,\n        [filter.element.label]: el\n      })\n    }\n  ))));\n};\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(AddBox, { ...props, ref })),\n  Check: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Check, { ...props, ref })),\n  Clear: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Delete: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(DeleteOutline, { ...props, ref })),\n  DetailPanel: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  Edit: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Edit, { ...props, ref })),\n  Export: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(SaveAlt, { ...props, ref })),\n  Filter: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  FirstPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FirstPage, { ...props, ref })),\n  LastPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(LastPage, { ...props, ref })),\n  NextPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronRight, { ...props, ref })),\n  PreviousPage: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ChevronLeftIcon, { ...props, ref })),\n  ResetSearch: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Clear, { ...props, ref })),\n  Search: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(FilterList, { ...props, ref })),\n  SortArrow: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ArrowUpward, { ...props, ref })),\n  ThirdStateCheck: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(Remove, { ...props, ref })),\n  ViewColumn: forwardRef((props, ref) => /* @__PURE__ */ React.createElement(ViewColumn, { ...props, ref }))\n};\nfunction extractValueByField(data, field) {\n  const path = field.split(\".\");\n  let value = data[path[0]];\n  for (let i = 1; i < path.length; ++i) {\n    if (value === void 0) {\n      return value;\n    }\n    const f = path[i];\n    value = value[f];\n  }\n  return value;\n}\nconst StyledMTableHeader = withStyles(\n  (theme) => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      fontWeight: theme.typography.fontWeightBold,\n      position: \"static\",\n      wordBreak: \"normal\"\n    }\n  }),\n  { name: \"BackstageTableHeader\" }\n)(MTableHeader);\nconst StyledMTableToolbar = withStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5)\n    },\n    title: {\n      \"& > h6\": {\n        fontWeight: theme.typography.fontWeightBold\n      }\n    },\n    searchField: {\n      paddingRight: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageTableToolbar\" }\n)(MTableToolbar);\nconst useFilterStyles = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\"\n    },\n    title: {\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: 18,\n      whiteSpace: \"nowrap\"\n    }\n  }),\n  { name: \"BackstageTableFiltersContainer\" }\n);\nconst useTableStyles = makeStyles(\n  () => ({\n    root: {\n      display: \"flex\",\n      alignItems: \"start\"\n    }\n  }),\n  { name: \"BackstageTable\" }\n);\nfunction convertColumns(columns, theme) {\n  return columns.map((column) => {\n    var _a;\n    const headerStyle = (_a = column.headerStyle) != null ? _a : {};\n    let cellStyle = column.cellStyle || {};\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n      if (typeof cellStyle === \"object\") {\n        cellStyle.fontWeight = theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n    return {\n      ...column,\n      headerStyle,\n      cellStyle\n    };\n  });\n}\nfunction removeDefaultValues(state, defaultState) {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\nconst defaultInitialState = {\n  search: \"\",\n  filtersOpen: false,\n  filters: {}\n};\nfunction TableToolbar(toolbarProps) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch]\n  );\n  if (hasFilters) {\n    return /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(Box, { className: filtersClasses.root }, /* @__PURE__ */ React.createElement(IconButton, { onClick: toggleFilters, \"aria-label\": \"filter list\" }, /* @__PURE__ */ React.createElement(FilterList, null)), /* @__PURE__ */ React.createElement(Typography, { className: filtersClasses.title }, \"Filters (\", selectedFiltersLength, \")\")), /* @__PURE__ */ React.createElement(\n      StyledMTableToolbar,\n      {\n        ...toolbarProps,\n        ref: toolbarRef,\n        onSearchChanged\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(\n    StyledMTableToolbar,\n    {\n      ...toolbarProps,\n      ref: toolbarRef,\n      onSearchChanged\n    }\n  );\n}\nfunction Table(props) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    components,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n  const theme = useTheme();\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen((v) => !v),\n    [setFiltersOpen]\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters\n  );\n  const MTColumns = convertColumns(columns, theme);\n  const [search, setSearch] = useState(calculatedInitialState.search);\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters\n        },\n        defaultInitialState\n      );\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n  const defaultOptions = {\n    headerStyle: {\n      textTransform: \"uppercase\"\n    }\n  };\n  const getFieldByTitle = useCallback(\n    (titleValue) => {\n      var _a;\n      return (_a = columns.find((el) => el.title === titleValue)) == null ? void 0 : _a.field;\n    },\n    [columns]\n  );\n  useEffect(() => {\n    if (typeof data === \"function\") {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data);\n      return;\n    }\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = data.filter(\n        (el) => !!Object.entries(selectedFilters).filter(([, value]) => !!value.length).every(([key, filterValue]) => {\n          const fieldValue = extractValueByField(\n            el,\n            getFieldByTitle(key)\n          );\n          if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n            return fieldValue.some((v) => filterValue.includes(v));\n          } else if (Array.isArray(fieldValue)) {\n            return fieldValue.includes(filterValue);\n          } else if (Array.isArray(filterValue)) {\n            return filterValue.includes(fieldValue);\n          }\n          return fieldValue === filterValue;\n        })\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n  const constructFilters = (filterConfig, dataValue) => {\n    const extractDistinctValues = (field) => {\n      const distinctValues = /* @__PURE__ */ new Set();\n      const addValue = (value) => {\n        if (value !== void 0 && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n      if (dataValue) {\n        dataValue.forEach((el) => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field)\n          );\n          if (Array.isArray(value)) {\n            value.forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n      return distinctValues;\n    };\n    const constructSelect = (filter) => {\n      return {\n        placeholder: \"All results\",\n        label: filter.column,\n        multiple: filter.type === \"multiple-select\",\n        items: [...extractDistinctValues(filter.column)].sort().map((value) => ({\n          label: value,\n          value\n        }))\n      };\n    };\n    return filterConfig.map((filter) => ({\n      type: filter.type,\n      element: constructSelect(filter)\n    }));\n  };\n  const hasFilters = !!(filters == null ? void 0 : filters.length);\n  const Toolbar = useCallback(\n    (toolbarProps) => {\n      return /* @__PURE__ */ React.createElement(\n        TableToolbar,\n        {\n          setSearch,\n          hasFilters,\n          selectedFiltersLength,\n          toggleFilters,\n          ...toolbarProps\n        }\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch]\n  );\n  const hasNoRows = typeof data !== \"function\" && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    (bodyProps) => {\n      if (emptyContent && hasNoRows) {\n        return /* @__PURE__ */ React.createElement(\"tbody\", null, /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { colSpan: columnCount }, emptyContent)));\n      }\n      return /* @__PURE__ */ React.createElement(MTableBody, { ...bodyProps });\n    },\n    [hasNoRows, emptyContent, columnCount]\n  );\n  return /* @__PURE__ */ React.createElement(Box, { className: tableClasses.root }, filtersOpen && data && typeof data !== \"function\" && (filters == null ? void 0 : filters.length) && /* @__PURE__ */ React.createElement(\n    Filters,\n    {\n      filters: constructFilters(filters, data),\n      selectedFilters,\n      onChangeFilters: setSelectedFilters\n    }\n  ), /* @__PURE__ */ React.createElement(\n    MTable,\n    {\n      components: {\n        Header: StyledMTableHeader,\n        Toolbar,\n        Body,\n        ...components\n      },\n      options: { ...defaultOptions, ...options },\n      columns: MTColumns,\n      icons: tableIcons,\n      title: /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h5\", component: \"h2\" }, title), subtitle && /* @__PURE__ */ React.createElement(Typography, { color: \"textSecondary\", variant: \"body1\" }, subtitle)),\n      data: typeof data === \"function\" ? data : tableData,\n      style: { width: \"100%\" },\n      localization: {\n        toolbar: { searchPlaceholder: \"Filter\", searchTooltip: \"Filter\" }\n      },\n      ...restProps\n    }\n  ));\n}\nTable.icons = Object.freeze(tableIcons);\n\nfunction color(data, theme) {\n  const lastNum = data[data.length - 1];\n  if (!lastNum)\n    return void 0;\n  if (lastNum >= 0.9)\n    return theme.palette.status.ok;\n  if (lastNum >= 0.5)\n    return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\nfunction TrendLine(props) {\n  var _a;\n  const theme = useTheme();\n  if (!props.data)\n    return null;\n  return /* @__PURE__ */ React.createElement(Sparklines, { width: 120, height: 30, min: 0, max: 1, ...props }, props.title && /* @__PURE__ */ React.createElement(\"title\", null, props.title), /* @__PURE__ */ React.createElement(SparklinesLine, { color: (_a = props.color) != null ? _a : color(props.data, theme) }));\n}\n\nconst useStyles$8 = (props) => makeStyles(\n  (theme) => ({\n    container: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"flex-end\",\n      alignItems: \"center\",\n      marginBottom: theme.spacing(2),\n      textAlign: props.textAlign\n    },\n    leftItemsBox: {\n      flex: \"1 1 auto\",\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    rightItemsBox: {\n      flex: \"0 1 auto\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\",\n      marginLeft: theme.spacing(1),\n      minWidth: 0,\n      overflow: \"visible\"\n    },\n    description: {},\n    title: {\n      display: \"inline-flex\",\n      marginBottom: 0\n    }\n  }),\n  { name: \"BackstageContentHeader\" }\n);\nconst ContentHeaderTitle = ({\n  title = \"Unknown page\",\n  className\n}) => /* @__PURE__ */ React.createElement(\n  Typography,\n  {\n    variant: \"h4\",\n    component: \"h2\",\n    className,\n    \"data-testid\": \"header-title\"\n  },\n  title\n);\nfunction ContentHeader(props) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = void 0,\n    children,\n    textAlign = \"left\"\n  } = props;\n  const classes = useStyles$8({ textAlign })();\n  const renderedTitle = TitleComponent ? TitleComponent : /* @__PURE__ */ React.createElement(ContentHeaderTitle, { title, className: classes.title });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { title }), /* @__PURE__ */ React.createElement(Box, { className: classes.container }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, renderedTitle, description && /* @__PURE__ */ React.createElement(Typography, { className: classes.description, variant: \"body2\" }, description)), /* @__PURE__ */ React.createElement(Box, { className: classes.rightItemsBox }, children)));\n}\n\nconst useStyles$7 = makeStyles(\n  (theme) => ({\n    micDrop: {\n      maxWidth: \"60%\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down(\"xs\")]: {\n        maxWidth: \"96%\",\n        bottom: \"unset\",\n        right: \"unset\",\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`\n      }\n    }\n  }),\n  { name: \"BackstageErrorPageMicDrop\" }\n);\nconst MicDrop = () => {\n  const classes = useStyles$7();\n  return /* @__PURE__ */ React.createElement(\n    \"img\",\n    {\n      src: MicDropSvgUrl,\n      className: classes.micDrop,\n      alt: \"Girl dropping mic from her hands\"\n    }\n  );\n};\n\nconst useStyles$6 = makeStyles(\n  (theme) => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down(\"xs\")]: {\n        padding: theme.spacing(2)\n      }\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down(\"xs\")]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize\n      }\n    },\n    subtitle: {\n      color: theme.palette.textSubtle\n    }\n  }),\n  { name: \"BackstageErrorPage\" }\n);\nfunction ErrorPage(props) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles$6();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n  return /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 0, className: classes.container }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 8, md: 4 }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      \"data-testid\": \"error\",\n      variant: \"body1\",\n      className: classes.subtitle\n    },\n    \"ERROR \",\n    status,\n    \": \",\n    statusMessage\n  ), /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", className: classes.subtitle }, additionalInfo), /* @__PURE__ */ React.createElement(Typography, { variant: \"h2\", className: classes.title }, \"Looks like someone dropped the mic!\"), /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\" }, /* @__PURE__ */ React.createElement(Link, { to: \"#\", \"data-testid\": \"go-back-link\", onClick: () => navigate(-1) }, \"Go back\"), \"... or please\", \" \", /* @__PURE__ */ React.createElement(Link, { to: supportUrl || support.url }, \"contact support\"), \" if you think this is a bug.\")), /* @__PURE__ */ React.createElement(MicDrop, null));\n}\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      cursor: \"pointer\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsClickableText\" }\n)(Typography);\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: \"underline\",\n      color: \"inherit\"\n    }\n  },\n  { name: \"BackstageBreadcrumbsStyledBox\" }\n)(Box);\nfunction Breadcrumbs(props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState(\n    null\n  );\n  const childrenArray = React.Children.toArray(children);\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length ? expandablePages.pop() : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(MaterialBreadcrumbs, { \"aria-label\": \"breadcrumb\", ...restProps }, childrenArray.length > 1 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, firstPage), childrenArray.length > 2 && /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, secondPage), hasHiddenBreadcrumbs && /* @__PURE__ */ React.createElement(ClickableText, { onClick: handleClick }, \"...\"), /* @__PURE__ */ React.createElement(Box, { style: { fontStyle: \"italic\" } }, currentPage)), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl,\n      onClose: handleClose,\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      transformOrigin: {\n        vertical: \"top\",\n        horizontal: \"left\"\n      }\n    },\n    /* @__PURE__ */ React.createElement(List, null, expandablePages.map((pageLink, index) => /* @__PURE__ */ React.createElement(ListItem, { key: index, button: true }, /* @__PURE__ */ React.createElement(StyledBox, { clone: true }, pageLink))))\n  ));\n}\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    header: {\n      gridArea: \"pageHeader\",\n      padding: theme.spacing(3),\n      width: \"100%\",\n      boxShadow: theme.shadows[4],\n      position: \"relative\",\n      zIndex: 100,\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: \"center\",\n      backgroundSize: \"cover\",\n      [theme.breakpoints.down(\"sm\")]: {\n        flexWrap: \"wrap\"\n      }\n    },\n    leftItemsBox: {\n      maxWidth: \"100%\",\n      flexGrow: 1\n    },\n    rightItemsBox: {\n      width: \"auto\",\n      alignItems: \"center\"\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: \"break-word\",\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: \"inline-block\",\n      // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: \"75ch\"\n    },\n    type: {\n      textTransform: \"uppercase\",\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor\n    },\n    breadcrumb: {\n      color: theme.page.fontColor\n    },\n    breadcrumbType: {\n      fontSize: \"inherit\",\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    },\n    breadcrumbTitle: {\n      fontSize: \"inherit\",\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageHeader\" }\n);\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle\n}) => {\n  if (!type) {\n    return null;\n  }\n  if (!typeLink) {\n    return /* @__PURE__ */ React.createElement(Typography, { className: classes.type }, type);\n  }\n  return /* @__PURE__ */ React.createElement(Breadcrumbs, { className: classes.breadcrumb }, /* @__PURE__ */ React.createElement(Link, { to: typeLink }, type), /* @__PURE__ */ React.createElement(Typography, null, pageTitle));\n};\nconst TitleFragment = ({ pageTitle, classes, tooltip }) => {\n  const FinalTitle = /* @__PURE__ */ React.createElement(Typography, { className: classes.title, variant: \"h1\" }, pageTitle);\n  if (!tooltip) {\n    return FinalTitle;\n  }\n  return /* @__PURE__ */ React.createElement(Tooltip, { title: tooltip, placement: \"top-start\" }, FinalTitle);\n};\nconst SubtitleFragment = ({ classes, subtitle }) => {\n  if (!subtitle) {\n    return null;\n  }\n  if (typeof subtitle !== \"string\") {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, subtitle);\n  }\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      className: classes.subtitle,\n      variant: \"subtitle2\",\n      component: \"span\"\n    },\n    subtitle\n  );\n};\nfunction Header(props) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink\n  } = props;\n  const classes = useStyles$5();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString(\"app.title\") || \"Backstage\";\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Helmet, { titleTemplate, defaultTitle }), /* @__PURE__ */ React.createElement(\"header\", { style, className: classes.header }, /* @__PURE__ */ React.createElement(Box, { className: classes.leftItemsBox }, /* @__PURE__ */ React.createElement(\n    TypeFragment,\n    {\n      classes,\n      type,\n      typeLink,\n      pageTitle\n    }\n  ), /* @__PURE__ */ React.createElement(\n    TitleFragment,\n    {\n      classes,\n      pageTitle,\n      tooltip\n    }\n  ), /* @__PURE__ */ React.createElement(SubtitleFragment, { classes, subtitle })), /* @__PURE__ */ React.createElement(Grid, { container: true, className: classes.rightItemsBox, spacing: 4 }, children)));\n}\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick\n}) => {\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    ListItem,\n    {\n      \"data-testid\": \"header-action-item\",\n      disabled,\n      button: true,\n      onClick: (event) => {\n        if (onClick) {\n          onClick(event);\n        }\n      }\n    },\n    icon && /* @__PURE__ */ React.createElement(ListItemIcon, null, icon),\n    /* @__PURE__ */ React.createElement(ListItemText, { primary: label, secondary: secondaryLabel })\n  ));\n};\nfunction HeaderActionMenu(props) {\n  const {\n    palette: {\n      common: { white }\n    }\n  } = useTheme();\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n  return /* @__PURE__ */ React.createElement(Fragment, null, /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      onClick: () => setOpen(true),\n      \"data-testid\": \"header-action-menu\",\n      ref: anchorElRef,\n      style: {\n        color: white,\n        height: 56,\n        width: 56,\n        marginRight: -4,\n        padding: 0\n      }\n    },\n    /* @__PURE__ */ React.createElement(MoreVert, null)\n  ), /* @__PURE__ */ React.createElement(\n    Popover,\n    {\n      open,\n      anchorEl: anchorElRef.current,\n      anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n      transformOrigin: { horizontal: \"right\", vertical: \"top\" },\n      onClose: () => setOpen(false)\n    },\n    /* @__PURE__ */ React.createElement(List, null, actionItems.map((actionItem, i) => {\n      return /* @__PURE__ */ React.createElement(ActionItem, { key: `header-action-menu-${i}`, ...actionItem });\n    }))\n  ));\n}\n\nconst useStyles$4 = makeStyles(\n  (theme) => ({\n    root: {\n      textAlign: \"left\"\n    },\n    label: {\n      color: theme.page.fontColor,\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1\n    },\n    value: {\n      color: alpha(theme.page.fontColor, 0.8),\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1\n    }\n  }),\n  { name: \"BackstageHeaderLabel\" }\n);\nconst HeaderLabelContent = ({ value, className }) => {\n  return /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: typeof value === \"string\" ? \"p\" : \"span\",\n      className\n    },\n    value\n  );\n};\nfunction HeaderLabel(props) {\n  const { label, value, url } = props;\n  const classes = useStyles$4();\n  const content = /* @__PURE__ */ React.createElement(\n    HeaderLabelContent,\n    {\n      className: classes.value,\n      value: value || \"<Unknown>\"\n    }\n  );\n  return /* @__PURE__ */ React.createElement(Grid, { item: true }, /* @__PURE__ */ React.createElement(Typography, { component: \"span\", className: classes.root }, /* @__PURE__ */ React.createElement(Typography, { className: classes.label }, label), url ? /* @__PURE__ */ React.createElement(Link, { to: url }, content) : content));\n}\n\nconst styles$1 = (theme) => createStyles({\n  root: {\n    color: theme.palette.common.white,\n    padding: theme.spacing(2, 2, 3),\n    backgroundImage: theme.getPageTheme({ themeId: \"card\" }).backgroundImage,\n    backgroundPosition: 0,\n    backgroundSize: \"inherit\"\n  }\n});\nconst useStyles$3 = makeStyles(styles$1, { name: \"BackstageItemCardHeader\" });\nfunction ItemCardHeader(props) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles$3(props);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root }, subtitle && /* @__PURE__ */ React.createElement(Typography, { variant: \"subtitle2\", component: \"h3\" }, subtitle), title && /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", component: \"h4\" }, title), children);\n}\n\nfunction ItemCard(props) {\n  const { description, tags, title, type, subtitle, label, onClick, href } = props;\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(ItemCardHeader, { title, subtitle: subtitle || type })), /* @__PURE__ */ React.createElement(CardContent, null, (tags == null ? void 0 : tags.length) ? /* @__PURE__ */ React.createElement(Box, null, tags.map((tag, i) => /* @__PURE__ */ React.createElement(Chip, { size: \"small\", label: tag, key: i }))) : null, description), /* @__PURE__ */ React.createElement(CardActions, null, !href && /* @__PURE__ */ React.createElement(LinkButton, { to: \"#\", onClick, color: \"primary\" }, label), href && /* @__PURE__ */ React.createElement(LinkButton, { to: href, color: \"primary\" }, label)));\n}\n\nconst styles = (theme) => createStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(22em, 1fr))\",\n    gridAutoRows: \"1fr\",\n    gridGap: theme.spacing(2)\n  }\n});\nconst useStyles$2 = makeStyles(styles, { name: \"BackstageItemCardGrid\" });\nfunction ItemCardGrid(props) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles$2(otherProps);\n  return /* @__PURE__ */ React.createElement(Box, { className: classes.root, ...otherProps }, children);\n}\n\nconst useStyles$1 = makeStyles(\n  (theme) => ({\n    root: {\n      display: \"grid\",\n      gridTemplateAreas: \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: \"max-content auto 1fr\",\n      gridTemplateColumns: \"auto 1fr auto\",\n      overflowY: \"auto\",\n      height: \"100vh\",\n      [theme.breakpoints.down(\"xs\")]: {\n        height: \"100%\"\n      }\n    }\n  }),\n  { name: \"BackstagePage\" }\n);\nfunction Page(props) {\n  const { themeId, children } = props;\n  const classes = useStyles$1();\n  return /* @__PURE__ */ React.createElement(\n    ThemeProvider,\n    {\n      theme: (baseTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId })\n      })\n    },\n    /* @__PURE__ */ React.createElement(\"main\", { className: classes.root }, children)\n  );\n}\n\nfunction PageWithHeader(props) {\n  const { themeId, children, ...restProps } = props;\n  return /* @__PURE__ */ React.createElement(Page, { themeId }, /* @__PURE__ */ React.createElement(Header, { ...restProps }), children);\n}\n\nconst proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional()\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal(\"user\"),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string())\n    })\n  })\n});\n\nconst DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1e3,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1e3\n};\nfunction tokenToExpiry(jwtToken) {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n  const [_header, rawPayload, _signature] = jwtToken.split(\".\");\n  const payload = JSON.parse(window.atob(rawPayload));\n  if (typeof payload.exp !== \"number\") {\n    return fallback;\n  }\n  return new Date(payload.exp * 1e3 - DEFAULTS.tokenExpiryMarginMillis);\n}\nclass ProxiedSignInIdentity {\n  constructor(options) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: \"empty\" };\n  }\n  async start() {\n    await this.getSessionAsync();\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token\n    };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    this.abortController.abort();\n  }\n  getSessionSync() {\n    if (this.state.type === \"active\") {\n      return this.state.session;\n    } else if (this.state.type === \"fetching\" && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error(\"No session available. Try reloading your browser page.\");\n  }\n  async getSessionAsync() {\n    if (this.state.type === \"fetching\") {\n      return this.state.promise;\n    } else if (this.state.type === \"active\" && /* @__PURE__ */ new Date() < this.state.expiresAt) {\n      return this.state.session;\n    }\n    const previous = this.state.type === \"active\" ? this.state.session : void 0;\n    const promise = this.fetchSession().then(\n      (session) => {\n        this.state = {\n          type: \"active\",\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token)\n        };\n        return session;\n      },\n      (error) => {\n        this.state = {\n          type: \"failed\",\n          error\n        };\n        throw error;\n      }\n    );\n    this.state = {\n      type: \"fetching\",\n      promise,\n      previous\n    };\n    return promise;\n  }\n  async fetchSession() {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl(\"auth\");\n    const headers = typeof this.options.headers === \"function\" ? await this.options.headers() : this.options.headers;\n    const mergedHeaders = new Headers(headers);\n    mergedHeaders.set(\"X-Requested-With\", \"XMLHttpRequest\");\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: mergedHeaders,\n        credentials: \"include\"\n      }\n    );\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n\nconst ProxiedSignInPage = (props) => {\n  const discoveryApi = useApi(discoveryApiRef);\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n      headers: props.headers\n    });\n    await identity.start();\n    props.onSignInSuccess(identity);\n  });\n  useMountEffect(execute);\n  if (status === \"loading\") {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  } else if (error) {\n    return /* @__PURE__ */ React.createElement(\n      ErrorPanel,\n      {\n        title: \"You do not appear to be signed in. Please try reloading the browser page.\",\n        error\n      }\n    );\n  }\n  return null;\n};\n\nclass GuestUserIdentity {\n  getUserId() {\n    return \"guest\";\n  }\n  async getIdToken() {\n    return void 0;\n  }\n  getProfile() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getProfileInfo() {\n    return {\n      email: \"guest@example.com\",\n      displayName: \"Guest\"\n    };\n  }\n  async getBackstageIdentity() {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: \"user\",\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef]\n    };\n  }\n  async getCredentials() {\n    return {};\n  }\n  async signOut() {\n  }\n}\n\nfunction parseJwtPayload(token) {\n  const [_header, payload, _signature] = token.split(\".\");\n  return JSON.parse(window.atob(payload));\n}\nclass LegacyUserIdentity {\n  constructor(result) {\n    this.result = result;\n  }\n  getUserId() {\n    return this.result.userId;\n  }\n  static fromResult(result) {\n    return new LegacyUserIdentity(result);\n  }\n  async getIdToken() {\n    var _a, _b;\n    return (_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a);\n  }\n  getProfile() {\n    return this.result.profile;\n  }\n  async getProfileInfo() {\n    return this.result.profile;\n  }\n  async getBackstageIdentity() {\n    const token = await this.getIdToken();\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: \"user\",\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef]\n      };\n    }\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: \"user\",\n      userEntityRef: sub,\n      ownershipEntityRefs: ent != null ? ent : []\n    };\n  }\n  async getCredentials() {\n    var _a, _b;\n    const token = await ((_b = (_a = this.result).getIdToken) == null ? void 0 : _b.call(_a));\n    return { token };\n  }\n  async signOut() {\n    var _a, _b;\n    return (_b = (_a = this.result).signOut) == null ? void 0 : _b.call(_a);\n  }\n}\n\nclass UserIdentity {\n  constructor(identity, authApi, profile) {\n    this.identity = identity;\n    this.authApi = authApi;\n    this.profile = profile;\n  }\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest() {\n    return new GuestUserIdentity();\n  }\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result) {\n    return LegacyUserIdentity.fromResult(result);\n  }\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options) {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId() {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n    return match[3];\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity.token;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile() {\n    if (!this.profile) {\n      throw new Error(\n        \"The identity API does not implement synchronous profile fetching, use getProfileInfo() instead\"\n      );\n    }\n    return this.profile;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo() {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n    try {\n      this.profilePromise = this.authApi.getProfile();\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = void 0;\n      throw ex;\n    }\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity() {\n    return this.identity;\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials() {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity.token };\n  }\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut() {\n    return this.authApi.signOut();\n  }\n}\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: \"none\"\n    },\n    item: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      width: \"100%\",\n      maxWidth: \"400px\",\n      margin: 0,\n      padding: 0\n    }\n  },\n  { name: \"BackstageSignInPage\" }\n);\nconst GridItem = ({ children }) => {\n  const classes = useStyles();\n  return /* @__PURE__ */ React.createElement(Grid, { component: \"li\", item: true, classes }, children);\n};\n\nconst Component$2 = ({\n  config,\n  onSignInStarted,\n  onSignInSuccess,\n  onSignInFailure\n}) => {\n  const { apiRef, title, message } = config;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n  const handleLogin = async () => {\n    try {\n      onSignInStarted();\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true\n      });\n      if (!identityResponse) {\n        onSignInFailure();\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`\n        );\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi\n        })\n      );\n    } catch (error) {\n      onSignInFailure();\n      errorApi.post(new ForwardedError(\"Login failed\", error));\n    }\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n    InfoCard,\n    {\n      variant: \"fullHeight\",\n      title,\n      actions: /* @__PURE__ */ React.createElement(Button$1, { color: \"primary\", variant: \"outlined\", onClick: handleLogin }, \"Sign In\")\n    },\n    /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, message)\n  ));\n};\nconst loader$2 = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef);\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true\n  });\n  if (!identityResponse) {\n    return void 0;\n  }\n  const profile = await authApi.getProfile();\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi\n  });\n};\nconst commonProvider = { Component: Component$2, loader: loader$2 };\n\nconst Component$1 = ({ onSignInStarted, onSignInSuccess }) => /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n  InfoCard,\n  {\n    title: \"Guest\",\n    variant: \"fullHeight\",\n    actions: /* @__PURE__ */ React.createElement(\n      Button$1,\n      {\n        color: \"primary\",\n        variant: \"outlined\",\n        onClick: () => {\n          onSignInStarted();\n          onSignInSuccess(new GuestUserIdentity());\n        }\n      },\n      \"Enter\"\n    )\n  },\n  /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter as a Guest User.\", /* @__PURE__ */ React.createElement(\"br\", null), \"You will not have a verified identity,\", /* @__PURE__ */ React.createElement(\"br\", null), \"meaning some features might be unavailable.\")\n));\nconst loader$1 = async () => {\n  return new GuestUserIdentity();\n};\nconst guestProvider = { Component: Component$1, loader: loader$1 };\n\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\nconst useFormStyles = makeStyles(\n  (theme) => ({\n    form: {\n      display: \"flex\",\n      flexFlow: \"column nowrap\"\n    },\n    button: {\n      alignSelf: \"center\",\n      marginTop: theme.spacing(2)\n    }\n  }),\n  { name: \"BackstageCustomProvider\" }\n);\nconst asInputRef = (renderResult) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest\n  };\n};\nconst Component = ({ onSignInStarted, onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm({\n    mode: \"onChange\"\n  });\n  const { errors } = formState;\n  const handleResult = ({ userId, idToken }) => {\n    onSignInStarted();\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        getIdToken: idToken !== void 0 ? async () => idToken : void 0,\n        profile: {\n          email: `${userId}@example.com`\n        }\n      })\n    );\n  };\n  return /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(InfoCard, { title: \"Custom User\", variant: \"fullHeight\" }, /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, \"Enter your own User ID and credentials.\", /* @__PURE__ */ React.createElement(\"br\", null), \"This selection will not be stored.\"), /* @__PURE__ */ React.createElement(\"form\", { className: classes.form, onSubmit: handleSubmit(handleResult) }, /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(register(\"userId\", { required: true })),\n      label: \"User ID\",\n      margin: \"normal\",\n      error: Boolean(errors.userId)\n    }\n  ), errors.userId && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.userId.message)), /* @__PURE__ */ React.createElement(FormControl, null, /* @__PURE__ */ React.createElement(\n    TextField,\n    {\n      ...asInputRef(\n        register(\"idToken\", {\n          required: false,\n          validate: (token) => !token || ID_TOKEN_REGEX.test(token) || \"Token is not a valid OpenID Connect JWT Token\"\n        })\n      ),\n      label: \"ID Token (optional)\",\n      margin: \"normal\",\n      autoComplete: \"off\",\n      error: Boolean(errors.idToken)\n    }\n  ), errors.idToken && /* @__PURE__ */ React.createElement(FormHelperText, { error: true }, errors.idToken.message)), /* @__PURE__ */ React.createElement(\n    Button$1,\n    {\n      type: \"submit\",\n      color: \"primary\",\n      variant: \"outlined\",\n      className: classes.button,\n      disabled: !(formState == null ? void 0 : formState.isDirty) || !isEmpty(errors)\n    },\n    \"Continue\"\n  ))));\n};\nconst loader = async () => void 0;\nconst customProvider = { Component, loader };\n\nclass IdentityApiSignOutProxy {\n  constructor(config) {\n    this.config = config;\n  }\n  static from(config) {\n    return new IdentityApiSignOutProxy(config);\n  }\n  getUserId() {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n  getIdToken() {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n  getProfile() {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n  getProfileInfo() {\n    return this.config.identityApi.getProfileInfo();\n  }\n  getBackstageIdentity() {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n  getCredentials() {\n    return this.config.identityApi.getCredentials();\n  }\n  signOut() {\n    return this.config.signOut();\n  }\n}\n\nconst PROVIDER_STORAGE_KEY = \"@backstage/core:SignInPage:provider\";\nconst signInProviders = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider\n};\nfunction validateIDs(id, providers) {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`\n    );\n}\nfunction getSignInProviders(identityProviders) {\n  const providers = identityProviders.reduce(\n    (acc, config) => {\n      if (typeof config === \"string\") {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n        return acc;\n      }\n      const { id } = config;\n      validateIDs(id, acc);\n      acc[id] = { components: signInProviders.common, id, config };\n      return acc;\n    },\n    {}\n  );\n  return providers;\n}\nconst useSignInProviders = (providers, onSignInSuccess) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n  const handleWrappedResult = useCallback(\n    (identityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            var _a;\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await ((_a = identityApi.signOut) == null ? void 0 : _a.call(identityApi));\n          }\n        })\n      );\n    },\n    [onSignInSuccess]\n  );\n  useLayoutEffect(() => {\n    var _a;\n    if (!loading) {\n      return void 0;\n    }\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY\n    );\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return void 0;\n    }\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return void 0;\n    }\n    let didCancel = false;\n    provider.components.loader(apiHolder, (_a = provider.config) == null ? void 0 : _a.apiRef).then((result) => {\n      if (didCancel) {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        return;\n      }\n      if (result) {\n        handleWrappedResult(result);\n      } else {\n        setLoading(false);\n      }\n    }).catch((error) => {\n      localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      if (didCancel) {\n        return;\n      }\n      errorApi.post(error);\n      setLoading(false);\n    });\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult\n  ]);\n  const elements = useMemo(\n    () => Object.keys(providers).map((key) => {\n      const provider = providers[key];\n      const { Component } = provider.components;\n      const handleSignInSuccess = (result) => {\n        handleWrappedResult(result);\n      };\n      const handleSignInStarted = () => {\n        var _a;\n        localStorage.setItem(\n          PROVIDER_STORAGE_KEY,\n          ((_a = provider == null ? void 0 : provider.config) == null ? void 0 : _a.id) || provider.id\n        );\n      };\n      const handleSignInFailure = () => {\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n      };\n      return /* @__PURE__ */ React.createElement(\n        Component,\n        {\n          key: provider.id,\n          config: provider.config,\n          onSignInStarted: handleSignInStarted,\n          onSignInSuccess: handleSignInSuccess,\n          onSignInFailure: handleSignInFailure\n        }\n      );\n    }),\n    [providers, handleWrappedResult]\n  );\n  return [loading, elements];\n};\n\nconst MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = \"left\"\n}) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess\n  );\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(Progress, null);\n  }\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, title && /* @__PURE__ */ React.createElement(ContentHeader, { title, textAlign: align }), /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: align === \"center\" ? align : \"flex-start\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    providerElements\n  )));\n};\nconst SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess\n}) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n  const [error, setError] = useState();\n  const [showLoginPage, setShowLoginPage] = useState(false);\n  const login = async ({ checkExisting, showPopup }) => {\n    try {\n      let identityResponse;\n      if (checkExisting) {\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true\n        });\n      }\n      if (!identityResponse && (showPopup || auto)) {\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`\n          );\n        }\n      }\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile\n        })\n      );\n    } catch (err) {\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n  useMountEffect(() => login({ checkExisting: true }));\n  return showLoginPage ? /* @__PURE__ */ React.createElement(Page, { themeId: \"home\" }, /* @__PURE__ */ React.createElement(Header, { title: configApi.getString(\"app.title\") }), /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n    Grid,\n    {\n      container: true,\n      justifyContent: \"center\",\n      spacing: 2,\n      component: \"ul\",\n      classes\n    },\n    /* @__PURE__ */ React.createElement(GridItem, null, /* @__PURE__ */ React.createElement(\n      InfoCard,\n      {\n        variant: \"fullHeight\",\n        title: provider.title,\n        actions: /* @__PURE__ */ React.createElement(\n          Button$1,\n          {\n            color: \"primary\",\n            variant: \"outlined\",\n            onClick: () => {\n              login({ showPopup: true });\n            }\n          },\n          \"Sign In\"\n        )\n      },\n      /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\" }, provider.message),\n      error && error.name !== \"PopupRejectedError\" && /* @__PURE__ */ React.createElement(Typography, { variant: \"body1\", color: \"error\" }, error.message)\n    ))\n  ))) : /* @__PURE__ */ React.createElement(Progress, null);\n};\nfunction SignInPage(props) {\n  if (\"provider\" in props) {\n    return /* @__PURE__ */ React.createElement(SingleSignInPage, { ...props });\n  }\n  return /* @__PURE__ */ React.createElement(MultiSignInPage, { ...props });\n}\n\nconst useTabsStyles = makeStyles(\n  (theme) => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3)\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3)\n    }\n  }),\n  { name: \"BackstageTabbedCard\" }\n);\nconst BoldHeader = withStyles(\n  (theme) => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: \"inline-block\" },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) }\n  }),\n  { name: \"BackstageTabbedCardBoldHeader\" }\n)(CardHeader);\nfunction TabbedCard(props) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n  const handleChange = onChange ? onChange : (_ev, newSelectedIndex) => selectIndex(newSelectedIndex);\n  let selectedTabContent;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child == null ? void 0 : child.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, (child) => {\n      var _a;\n      if (React.isValidElement(child) && (child == null ? void 0 : child.props.value) === value) {\n        selectedTabContent = (_a = child == null ? void 0 : child.props) == null ? void 0 : _a.children;\n      }\n    });\n  }\n  const errProps = errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n  return /* @__PURE__ */ React.createElement(Card, null, /* @__PURE__ */ React.createElement(ErrorBoundary, { ...errProps }, title && /* @__PURE__ */ React.createElement(BoldHeader, { title }), /* @__PURE__ */ React.createElement(\n    Tabs,\n    {\n      selectionFollowsFocus: true,\n      classes: tabsClasses,\n      value: value || selectedIndex,\n      onChange: handleChange\n    },\n    children\n  ), /* @__PURE__ */ React.createElement(Divider, null), /* @__PURE__ */ React.createElement(CardContent, null, selectedTabContent), deepLink && /* @__PURE__ */ React.createElement(BottomLink, { ...deepLink })));\n}\nconst useCardTabStyles = makeStyles(\n  (theme) => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: \"none\",\n      \"&:hover\": {\n        opacity: 1,\n        backgroundColor: \"transparent\",\n        color: theme.palette.text.primary\n      }\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold\n    }\n  }),\n  { name: \"BackstageCardTab\" }\n);\nfunction CardTab(props) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n  return /* @__PURE__ */ React.createElement(TabUI, { disableRipple: true, classes, ...restProps });\n}\n\nexport { AlertDisplay, Avatar, BottomLink, Breadcrumbs, BrokenImageIcon, Button, CardTab, CatalogIcon, ChatIcon, CodeSnippet, Content, ContentHeader, CopyTextButton, CreateButton, DashboardIcon, DependencyGraph, DependencyGraphTypes, DismissableBanner, DocsIcon, EmailIcon, EmptyState, ErrorBoundary, ErrorPage, ErrorPanel, FeatureCalloutCircular, Gauge, GaugeCard, GitHubIcon, GroupIcon, Header, HeaderActionMenu, HeaderIconLinkRow, HeaderLabel, HeaderTabs, HelpIcon, HorizontalScrollGrid, InfoCard, IntroCard, ItemCard, ItemCardGrid, ItemCardHeader, Lifecycle, LinearGauge, Link, LinkButton, LogViewer, MarkdownContent, MissingAnnotationEmptyState, MobileSidebar, OAuthRequestDialog, OverflowTooltip, Page, PageWithHeader, Progress, ProxiedSignInPage, ResponseErrorPanel, RoutedTabs, SIDEBAR_INTRO_LOCAL_STORAGE, SelectComponent as Select, Sidebar, LegacySidebarContext as SidebarContext, SidebarDivider, SidebarExpandButton, SidebarGroup, SidebarIntro, SidebarItem, SidebarOpenStateProvider, SidebarPage, LegacySidebarPinStateContext as SidebarPinStateContext, SidebarPinStateProvider, SidebarScrollWrapper, SidebarSearchField, SidebarSpace, SidebarSpacer, SidebarSubmenu, SidebarSubmenuItem, SignInPage, SimpleStepper, SimpleStepperStep, StatusAborted, StatusError, StatusOK, StatusPending, StatusRunning, StatusWarning, StructuredMetadataTable, SubvalueCell, SupportButton, TabbedCard, TabbedLayout, Table, TrendLine, UserIcon, UserIdentity, WarningIcon, WarningPanel, sidebarConfig, useContent, useQueryParamState, useSidebarOpenState, useSidebarPinState, useSupportConfig };\n//# sourceMappingURL=index.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext } from '@backstage/version-bridge';\nimport React from 'react';\n\nconst contextKey = \"plugin-context\";\nconst PluginProvider = (props) => {\n  const { children, plugin } = props;\n  const { Provider } = createVersionedContext(contextKey);\n  return /* @__PURE__ */ React.createElement(\n    Provider,\n    {\n      value: createVersionedValueMap({\n        1: {\n          plugin\n        }\n      })\n    },\n    children\n  );\n};\nfunction usePluginOptions() {\n  const versionedHolder = useVersionedContext(\n    contextKey\n  );\n  if (!versionedHolder) {\n    throw new Error(\"Plugin Options context is not available\");\n  }\n  const value = versionedHolder.atVersion(1);\n  if (!value) {\n    throw new Error(\"Plugin Options v1 is not available\");\n  }\n  return value.plugin.getPluginOptions();\n}\n\nexport { PluginProvider as P, usePluginOptions as u };\n//# sourceMappingURL=usePluginOptions-68e31f9f.esm.js.map\n","import { createVersionedContext, createVersionedValueMap, useVersionedContext, getOrCreateGlobalSingleton } from '@backstage/version-bridge';\nimport React, { useContext, useRef, useMemo, lazy, Suspense, Children, isValidElement, Fragment } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { P as PluginProvider } from './esm/usePluginOptions-68e31f9f.esm.js';\n\nconst AnalyticsReactContext = createVersionedContext(\"analytics-context\");\nconst useAnalyticsContext = () => {\n  const theContext = useContext(AnalyticsReactContext);\n  if (theContext === void 0) {\n    return {\n      routeRef: \"unknown\",\n      pluginId: \"root\",\n      extension: \"App\"\n    };\n  }\n  const theValue = theContext.atVersion(1);\n  if (theValue === void 0) {\n    throw new Error(\"No context found for version 1.\");\n  }\n  return theValue;\n};\nconst AnalyticsContext = (options) => {\n  const { attributes, children } = options;\n  const parentValues = useAnalyticsContext();\n  const combinedValue = {\n    ...parentValues,\n    ...attributes\n  };\n  const versionedCombinedValue = createVersionedValueMap({ 1: combinedValue });\n  return /* @__PURE__ */ React.createElement(AnalyticsReactContext.Provider, { value: versionedCombinedValue }, children);\n};\n\nfunction useApiHolder() {\n  const versionedHolder = useVersionedContext(\"api-context\");\n  if (!versionedHolder) {\n    throw new Error(\"API context is not available\");\n  }\n  const apiHolder = versionedHolder.atVersion(1);\n  if (!apiHolder) {\n    throw new Error(\"ApiContext v1 not available\");\n  }\n  return apiHolder;\n}\nfunction useApi(apiRef) {\n  const apiHolder = useApiHolder();\n  const api = apiHolder.get(apiRef);\n  if (!api) {\n    throw new Error(`No implementation available for ${apiRef}`);\n  }\n  return api;\n}\nfunction withApis(apis) {\n  return function withApisWrapper(WrappedComponent) {\n    const Hoc = (props) => {\n      const apiHolder = useApiHolder();\n      const impls = {};\n      for (const key in apis) {\n        if (apis.hasOwnProperty(key)) {\n          const ref = apis[key];\n          const api = apiHolder.get(ref);\n          if (!api) {\n            throw new Error(`No implementation available for ${ref}`);\n          }\n          impls[key] = api;\n        }\n      }\n      return /* @__PURE__ */ React.createElement(WrappedComponent, { ...props, ...impls });\n    };\n    const displayName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    Hoc.displayName = `withApis(${displayName})`;\n    return Hoc;\n  };\n}\n\nclass ApiRefImpl {\n  constructor(config) {\n    this.config = config;\n    const valid = config.id.split(\".\").flatMap((part) => part.split(\"-\")).every((part) => part.match(/^[a-z][a-z0-9]*$/));\n    if (!valid) {\n      throw new Error(\n        `API id must only contain period separated lowercase alphanum tokens with dashes, got '${config.id}'`\n      );\n    }\n  }\n  get id() {\n    return this.config.id;\n  }\n  // Utility for getting type of an api, using `typeof apiRef.T`\n  get T() {\n    throw new Error(`tried to read ApiRef.T of ${this}`);\n  }\n  toString() {\n    return `apiRef{${this.config.id}}`;\n  }\n}\nfunction createApiRef(config) {\n  return new ApiRefImpl(config);\n}\n\nfunction createApiFactory(factory, instance) {\n  if (\"id\" in factory) {\n    return {\n      api: factory,\n      deps: {},\n      factory: () => instance\n    };\n  }\n  return factory;\n}\n\nvar SessionState = /* @__PURE__ */ ((SessionState2) => {\n  SessionState2[\"SignedIn\"] = \"SignedIn\";\n  SessionState2[\"SignedOut\"] = \"SignedOut\";\n  return SessionState2;\n})(SessionState || {});\nconst googleAuthApiRef = createApiRef({\n  id: \"core.auth.google\"\n});\nconst githubAuthApiRef = createApiRef({\n  id: \"core.auth.github\"\n});\nconst oktaAuthApiRef = createApiRef({\n  id: \"core.auth.okta\"\n});\nconst gitlabAuthApiRef = createApiRef({\n  id: \"core.auth.gitlab\"\n});\nconst microsoftAuthApiRef = createApiRef({\n  id: \"core.auth.microsoft\"\n});\nconst oneloginAuthApiRef = createApiRef({\n  id: \"core.auth.onelogin\"\n});\nconst bitbucketAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket\"\n});\nconst bitbucketServerAuthApiRef = createApiRef({\n  id: \"core.auth.bitbucket-server\"\n});\nconst atlassianAuthApiRef = createApiRef({\n  id: \"core.auth.atlassian\"\n});\n\nconst alertApiRef = createApiRef({\n  id: \"core.alert\"\n});\n\nconst analyticsApiRef = createApiRef({\n  id: \"core.analytics\"\n});\n\nconst appThemeApiRef = createApiRef({\n  id: \"core.apptheme\"\n});\n\nconst configApiRef = createApiRef({\n  id: \"core.config\"\n});\n\nconst discoveryApiRef = createApiRef({\n  id: \"core.discovery\"\n});\n\nconst errorApiRef = createApiRef({\n  id: \"core.error\"\n});\n\nvar FeatureFlagState = /* @__PURE__ */ ((FeatureFlagState2) => {\n  FeatureFlagState2[FeatureFlagState2[\"None\"] = 0] = \"None\";\n  FeatureFlagState2[FeatureFlagState2[\"Active\"] = 1] = \"Active\";\n  return FeatureFlagState2;\n})(FeatureFlagState || {});\nconst featureFlagsApiRef = createApiRef({\n  id: \"core.featureflags\"\n});\n\nconst fetchApiRef = createApiRef({\n  id: \"core.fetch\"\n});\n\nconst identityApiRef = createApiRef({\n  id: \"core.identity\"\n});\n\nconst oauthRequestApiRef = createApiRef({\n  id: \"core.oauthrequest\"\n});\n\nconst storageApiRef = createApiRef({\n  id: \"core.storage\"\n});\n\nclass Tracker {\n  constructor(analyticsApi, context = {\n    routeRef: \"unknown\",\n    pluginId: \"root\",\n    extension: \"App\"\n  }) {\n    this.analyticsApi = analyticsApi;\n    this.context = context;\n  }\n  setContext(context) {\n    this.context = context;\n  }\n  captureEvent(action, subject, {\n    value,\n    attributes\n  } = {}) {\n    try {\n      this.analyticsApi.captureEvent({\n        action,\n        subject,\n        value,\n        attributes,\n        context: this.context\n      });\n    } catch (e) {\n      console.warn(\"Error during analytics event capture. %o\", e);\n    }\n  }\n}\n\nfunction useAnalyticsApi() {\n  try {\n    return useApi(analyticsApiRef);\n  } catch {\n    return { captureEvent: () => {\n    } };\n  }\n}\nfunction useAnalytics() {\n  const trackerRef = useRef(null);\n  const context = useAnalyticsContext();\n  const analyticsApi = useAnalyticsApi();\n  function getTracker() {\n    if (trackerRef.current === null) {\n      trackerRef.current = new Tracker(analyticsApi);\n    }\n    return trackerRef.current;\n  }\n  const tracker = getTracker();\n  tracker.setContext(context);\n  return tracker;\n}\n\nconst useApp = () => {\n  const versionedContext = useVersionedContext(\n    \"app-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"App context is not available\");\n  }\n  const appContext = versionedContext.atVersion(1);\n  if (!appContext) {\n    throw new Error(\"AppContext v1 not available\");\n  }\n  return appContext;\n};\n\nconst globalStore = getOrCreateGlobalSingleton(\n  \"component-data-store\",\n  () => /* @__PURE__ */ new WeakMap()\n);\nconst componentDataKey = \"__backstage_data\";\nfunction attachComponentData(component, type, data) {\n  var _a;\n  const dataComponent = component;\n  let container = (_a = dataComponent[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    container = { map: /* @__PURE__ */ new Map() };\n    Object.defineProperty(dataComponent, componentDataKey, {\n      enumerable: false,\n      configurable: true,\n      writable: false,\n      value: container\n    });\n    globalStore.set(component, container);\n  }\n  if (container.map.has(type)) {\n    const name = component.displayName || component.name;\n    throw new Error(\n      `Attempted to attach duplicate data \"${type}\" to component \"${name}\"`\n    );\n  }\n  container.map.set(type, data);\n}\nfunction getComponentData(node, type) {\n  var _a;\n  if (!node) {\n    return void 0;\n  }\n  const component = node.type;\n  if (!component) {\n    return void 0;\n  }\n  const container = (_a = component[componentDataKey]) != null ? _a : globalStore.get(component);\n  if (!container) {\n    return void 0;\n  }\n  return container.map.get(type);\n}\n\nconst routeRefType = getOrCreateGlobalSingleton(\n  \"route-ref-type\",\n  () => Symbol(\"route-ref-type\")\n);\n\nvar _a$2;\nclass RouteRefImpl {\n  constructor(id, params) {\n    this.id = id;\n    this.params = params;\n    this[_a$2] = \"absolute\";\n  }\n  get title() {\n    return this.id;\n  }\n  toString() {\n    return `routeRef{type=absolute,id=${this.id}}`;\n  }\n}\n_a$2 = routeRefType;\nfunction createRouteRef(config) {\n  var _a2;\n  return new RouteRefImpl(\n    config.id,\n    (_a2 = config.params) != null ? _a2 : []\n  );\n}\n\nvar _a$1;\nconst PARAM_PATTERN = /^\\w+$/;\nclass SubRouteRefImpl {\n  constructor(id, path, parent, params) {\n    this.id = id;\n    this.path = path;\n    this.parent = parent;\n    this.params = params;\n    this[_a$1] = \"sub\";\n  }\n  toString() {\n    return `routeRef{type=sub,id=${this.id}}`;\n  }\n}\n_a$1 = routeRefType;\nfunction createSubRouteRef(config) {\n  const { id, path, parent } = config;\n  const pathParams = path.split(\"/\").filter((p) => p.startsWith(\":\")).map((p) => p.substring(1));\n  const params = [...parent.params, ...pathParams];\n  if (parent.params.some((p) => pathParams.includes(p))) {\n    throw new Error(\n      \"SubRouteRef may not have params that overlap with its parent\"\n    );\n  }\n  if (!path.startsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must start with '/', got '${path}'`);\n  }\n  if (path.endsWith(\"/\")) {\n    throw new Error(`SubRouteRef path must not end with '/', got '${path}'`);\n  }\n  for (const param of pathParams) {\n    if (!PARAM_PATTERN.test(param)) {\n      throw new Error(`SubRouteRef path has invalid param, got '${param}'`);\n    }\n  }\n  const subRouteRef = new SubRouteRefImpl(\n    id,\n    path,\n    parent,\n    params\n  );\n  return subRouteRef;\n}\n\nvar _a;\nclass ExternalRouteRefImpl {\n  constructor(id, params, optional) {\n    this.id = id;\n    this.params = params;\n    this.optional = optional;\n    this[_a] = \"external\";\n  }\n  toString() {\n    return `routeRef{type=external,id=${this.id}}`;\n  }\n}\n_a = routeRefType;\nfunction createExternalRouteRef(options) {\n  var _a2;\n  return new ExternalRouteRefImpl(\n    options.id,\n    (_a2 = options.params) != null ? _a2 : [],\n    Boolean(options.optional)\n  );\n}\n\nfunction useRouteRef(routeRef) {\n  const { pathname } = useLocation();\n  const versionedContext = useVersionedContext(\n    \"routing-context\"\n  );\n  if (!versionedContext) {\n    throw new Error(\"Routing context is not available\");\n  }\n  const resolver = versionedContext.atVersion(1);\n  const routeFunc = useMemo(\n    () => resolver && resolver.resolve(routeRef, { pathname }),\n    [resolver, routeRef, pathname]\n  );\n  if (!versionedContext) {\n    throw new Error(\"useRouteRef used outside of routing context\");\n  }\n  if (!resolver) {\n    throw new Error(\"RoutingContext v1 not available\");\n  }\n  const isOptional = \"optional\" in routeRef && routeRef.optional;\n  if (!routeFunc && !isOptional) {\n    throw new Error(`No path for ${routeRef}`);\n  }\n  return routeFunc;\n}\n\nfunction useRouteRefParams(_routeRef) {\n  return useParams();\n}\n\nclass PluginErrorBoundary extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = { error: void 0 };\n    this.handleErrorReset = () => {\n      this.setState({ error: void 0 });\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n  render() {\n    const { error } = this.state;\n    const { app, plugin } = this.props;\n    const { ErrorBoundaryFallback } = app.getComponents();\n    if (error) {\n      return /* @__PURE__ */ React.createElement(\n        ErrorBoundaryFallback,\n        {\n          error,\n          resetError: this.handleErrorReset,\n          plugin\n        }\n      );\n    }\n    return this.props.children;\n  }\n}\n\nfunction createRoutableExtension(options) {\n  const { component, mountPoint, name } = options;\n  return createReactExtension({\n    component: {\n      lazy: () => component().then(\n        (InnerComponent) => {\n          const RoutableExtensionWrapper = (props) => {\n            try {\n              useRouteRef(mountPoint);\n            } catch (error) {\n              if (typeof error === \"object\" && error !== null) {\n                const { message } = error;\n                if (typeof message === \"string\" && message.startsWith(\"No path for \")) {\n                  throw new Error(\n                    `Routable extension component with mount point ${mountPoint} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`\n                  );\n                }\n              }\n              throw error;\n            }\n            return /* @__PURE__ */ React.createElement(InnerComponent, { ...props });\n          };\n          const componentName = name || InnerComponent.displayName || InnerComponent.name || \"LazyComponent\";\n          RoutableExtensionWrapper.displayName = `RoutableExtension(${componentName})`;\n          return RoutableExtensionWrapper;\n        },\n        (error) => {\n          const RoutableExtensionWrapper = (_) => {\n            const app = useApp();\n            const { BootErrorPage } = app.getComponents();\n            return /* @__PURE__ */ React.createElement(BootErrorPage, { step: \"load-chunk\", error });\n          };\n          return RoutableExtensionWrapper;\n        }\n      )\n    },\n    data: {\n      \"core.mountPoint\": mountPoint\n    },\n    name\n  });\n}\nfunction createComponentExtension(options) {\n  const { component, name } = options;\n  return createReactExtension({ component, name });\n}\nfunction createReactExtension(options) {\n  const { data = {}, name } = options;\n  if (!name) {\n    console.warn(\n      \"Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.\"\n    );\n  }\n  let Component;\n  if (\"lazy\" in options.component) {\n    const lazyLoader = options.component.lazy;\n    Component = lazy(\n      () => lazyLoader().then((component) => ({ default: component }))\n    );\n  } else {\n    Component = options.component.sync;\n  }\n  const componentName = name || Component.displayName || Component.name || \"Component\";\n  return {\n    expose(plugin) {\n      const Result = (props) => {\n        const app = useApp();\n        const { Progress } = app.getComponents();\n        const mountPoint = data == null ? void 0 : data[\"core.mountPoint\"];\n        return /* @__PURE__ */ React.createElement(Suspense, { fallback: /* @__PURE__ */ React.createElement(Progress, null) }, /* @__PURE__ */ React.createElement(PluginErrorBoundary, { app, plugin }, /* @__PURE__ */ React.createElement(\n          AnalyticsContext,\n          {\n            attributes: {\n              pluginId: plugin.getId(),\n              ...name && { extension: name },\n              ...mountPoint && { routeRef: mountPoint.id }\n            }\n          },\n          /* @__PURE__ */ React.createElement(PluginProvider, { plugin }, /* @__PURE__ */ React.createElement(Component, { ...props }))\n        )));\n      };\n      attachComponentData(Result, \"core.plugin\", plugin);\n      attachComponentData(Result, \"core.extensionName\", name);\n      for (const [key, value] of Object.entries(data)) {\n        attachComponentData(Result, key, value);\n      }\n      Result.displayName = `Extension(${componentName})`;\n      return Result;\n    }\n  };\n}\n\nfunction selectChildren(rootNode, featureFlagsApi, selector, strictError) {\n  return Children.toArray(rootNode).flatMap((node) => {\n    if (!isValidElement(node)) {\n      return [];\n    }\n    if (node.type === Fragment) {\n      return selectChildren(\n        node.props.children,\n        featureFlagsApi,\n        selector,\n        strictError\n      );\n    }\n    if (getComponentData(node, \"core.featureFlagged\")) {\n      const props = node.props;\n      const isEnabled = \"with\" in props ? featureFlagsApi.isActive(props.with) : !featureFlagsApi.isActive(props.without);\n      if (isEnabled) {\n        return selectChildren(\n          node.props.children,\n          featureFlagsApi,\n          selector,\n          strictError\n        );\n      }\n      return [];\n    }\n    if (selector === void 0 || selector(node)) {\n      return [node];\n    }\n    if (strictError) {\n      throw new Error(strictError);\n    }\n    return selectChildren(\n      node.props.children,\n      featureFlagsApi,\n      selector,\n      strictError\n    );\n  });\n}\nclass Collection {\n  constructor(node, featureFlagsApi) {\n    this.node = node;\n    this.featureFlagsApi = featureFlagsApi;\n  }\n  selectByComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0,\n      query.withStrictError\n    );\n    return new Collection(selection, this.featureFlagsApi);\n  }\n  findComponentData(query) {\n    const selection = selectChildren(\n      this.node,\n      this.featureFlagsApi,\n      (node) => getComponentData(node, query.key) !== void 0\n    );\n    return selection.map((node) => getComponentData(node, query.key)).filter((data) => data !== void 0);\n  }\n  getElements() {\n    return selectChildren(this.node, this.featureFlagsApi);\n  }\n}\nfunction useElementFilter(node, filterFn, dependencies = []) {\n  const featureFlagsApi = useApi(featureFlagsApiRef);\n  const elements = new Collection(node, featureFlagsApi);\n  return useMemo(() => filterFn(elements), [node, ...dependencies]);\n}\n\nclass PluginImpl {\n  constructor(config) {\n    this.config = config;\n    this.options = void 0;\n  }\n  getId() {\n    return this.config.id;\n  }\n  getApis() {\n    var _a;\n    return (_a = this.config.apis) != null ? _a : [];\n  }\n  getFeatureFlags() {\n    var _a, _b;\n    return (_b = (_a = this.config.featureFlags) == null ? void 0 : _a.slice()) != null ? _b : [];\n  }\n  get routes() {\n    var _a;\n    return (_a = this.config.routes) != null ? _a : {};\n  }\n  get externalRoutes() {\n    var _a;\n    return (_a = this.config.externalRoutes) != null ? _a : {};\n  }\n  provide(extension) {\n    return extension.expose(this);\n  }\n  __experimentalReconfigure(options) {\n    if (this.config.__experimentalConfigure) {\n      this.options = this.config.__experimentalConfigure(options);\n    }\n  }\n  getPluginOptions() {\n    var _a;\n    if (this.config.__experimentalConfigure && !this.options) {\n      this.options = this.config.__experimentalConfigure();\n    }\n    return (_a = this.options) != null ? _a : {};\n  }\n  toString() {\n    return `plugin{${this.config.id}}`;\n  }\n}\nfunction createPlugin(config) {\n  return new PluginImpl(config);\n}\n\nexport { AnalyticsContext, FeatureFlagState, SessionState, alertApiRef, analyticsApiRef, appThemeApiRef, atlassianAuthApiRef, attachComponentData, bitbucketAuthApiRef, bitbucketServerAuthApiRef, configApiRef, createApiFactory, createApiRef, createComponentExtension, createExternalRouteRef, createPlugin, createReactExtension, createRoutableExtension, createRouteRef, createSubRouteRef, discoveryApiRef, errorApiRef, featureFlagsApiRef, fetchApiRef, getComponentData, githubAuthApiRef, gitlabAuthApiRef, googleAuthApiRef, identityApiRef, microsoftAuthApiRef, oauthRequestApiRef, oktaAuthApiRef, oneloginAuthApiRef, storageApiRef, useAnalytics, useApi, useApiHolder, useApp, useElementFilter, useRouteRef, useRouteRefParams, withApis };\n//# sourceMappingURL=index.esm.js.map\n","import { serializeError as serializeError$1, deserializeError as deserializeError$1 } from 'serialize-error';\n\nfunction isError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    return false;\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    return false;\n  }\n  if (typeof maybe.message !== \"string\") {\n    return false;\n  }\n  return true;\n}\nfunction assertError(value) {\n  if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n    throw new Error(`Encountered invalid error, not an object, got '${value}'`);\n  }\n  const maybe = value;\n  if (typeof maybe.name !== \"string\" || maybe.name === \"\") {\n    throw new Error(`Encountered error object without a name, got '${value}'`);\n  }\n  if (typeof maybe.message !== \"string\") {\n    throw new Error(\n      `Encountered error object without a message, got '${value}'`\n    );\n  }\n}\n\nfunction serializeError(error, options) {\n  const serialized = serializeError$1(error);\n  const result = {\n    name: \"Unknown\",\n    message: \"<no reason given>\",\n    ...serialized\n  };\n  if (!(options == null ? void 0 : options.includeStack)) {\n    delete result.stack;\n  }\n  return result;\n}\nfunction deserializeError(data) {\n  const result = deserializeError$1(data);\n  if (!data.stack) {\n    result.stack = void 0;\n  }\n  return result;\n}\nfunction stringifyError(error) {\n  if (isError(error)) {\n    const str = String(error);\n    return str !== \"[object Object]\" ? str : `${error.name}: ${error.message}`;\n  }\n  return `unknown error '${error}'`;\n}\n\nclass CustomErrorBase extends Error {\n  constructor(message, cause) {\n    var _a;\n    let fullMessage = message;\n    if (cause !== void 0) {\n      const causeStr = stringifyError(cause);\n      if (fullMessage) {\n        fullMessage += `; caused by ${causeStr}`;\n      } else {\n        fullMessage = `caused by ${causeStr}`;\n      }\n    }\n    super(fullMessage);\n    (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, this.constructor);\n    this.name = this.constructor.name;\n    this.cause = isError(cause) ? cause : void 0;\n  }\n}\n\nclass InputError extends CustomErrorBase {\n}\nclass AuthenticationError extends CustomErrorBase {\n}\nclass NotAllowedError extends CustomErrorBase {\n}\nclass NotFoundError extends CustomErrorBase {\n}\nclass ConflictError extends CustomErrorBase {\n}\nclass NotModifiedError extends CustomErrorBase {\n}\nclass NotImplementedError extends CustomErrorBase {\n}\nclass ForwardedError extends CustomErrorBase {\n  constructor(message, cause) {\n    super(message, cause);\n    this.name = isError(cause) ? cause.name : \"Error\";\n  }\n}\n\nasync function parseErrorResponseBody(response) {\n  var _a;\n  try {\n    const text = await response.text();\n    if (text) {\n      if ((_a = response.headers.get(\"content-type\")) == null ? void 0 : _a.startsWith(\"application/json\")) {\n        try {\n          const body = JSON.parse(text);\n          if (body.error && body.response) {\n            return body;\n          }\n        } catch {\n        }\n      }\n      return {\n        error: {\n          name: \"Error\",\n          message: `Request failed with status ${response.status} ${response.statusText}, ${text}`\n        },\n        response: {\n          statusCode: response.status\n        }\n      };\n    }\n  } catch {\n  }\n  return {\n    error: {\n      name: \"Error\",\n      message: `Request failed with status ${response.status} ${response.statusText}`\n    },\n    response: {\n      statusCode: response.status\n    }\n  };\n}\n\nclass ResponseError extends Error {\n  constructor(props) {\n    super(props.message);\n    this.name = \"ResponseError\";\n    this.response = props.response;\n    this.body = props.data;\n    this.cause = props.cause;\n  }\n  /**\n   * Constructs a ResponseError based on a failed response.\n   *\n   * Assumes that the response has already been checked to be not ok. This\n   * function consumes the body of the response, and assumes that it hasn't\n   * been consumed before.\n   */\n  static async fromResponse(response) {\n    const data = await parseErrorResponseBody(response);\n    const status = data.response.statusCode || response.status;\n    const statusText = data.error.name || response.statusText;\n    const message = `Request failed with ${status} ${statusText}`;\n    const cause = deserializeError(data.error);\n    return new ResponseError({\n      message,\n      response,\n      data,\n      cause\n    });\n  }\n}\n\nexport { AuthenticationError, ConflictError, CustomErrorBase, ForwardedError, InputError, NotAllowedError, NotFoundError, NotImplementedError, NotModifiedError, ResponseError, assertError, deserializeError, isError, parseErrorResponseBody, serializeError, stringifyError };\n//# sourceMappingURL=index.esm.js.map\n","import { Link, MarkdownContent, Progress, Page, Header, Content, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { createApiRef, useApi, errorApiRef, createRouteRef, createPlugin, createApiFactory, createRoutableExtension } from '@backstage/core-plugin-api';\nimport React, { useRef, useLayoutEffect, useState, useMemo, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles, DialogContent, DialogActions, Button, Input, Grid } from '@material-ui/core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport AdjustIcon from '@material-ui/icons/Adjust';\nimport Typography$1 from '@material-ui/core/Typography/Typography';\nimport color from 'color';\nimport { forceSimulation, forceCollide } from 'd3-force';\n\nconst techRadarApiRef = createApiRef(\n  {\n    id: \"plugin.techradar.service\"\n  }\n);\nvar MovedState = /* @__PURE__ */ ((MovedState2) => {\n  MovedState2[MovedState2[\"Down\"] = -1] = \"Down\";\n  MovedState2[MovedState2[\"NoChange\"] = 0] = \"NoChange\";\n  MovedState2[MovedState2[\"Up\"] = 1] = \"Up\";\n  return MovedState2;\n})(MovedState || {});\n\nconst useStyles$5 = makeStyles(\n  (theme) => ({\n    ring: {\n      fill: \"none\",\n      stroke: \"#bbb\",\n      strokeWidth: \"1px\"\n    },\n    axis: {\n      fill: \"none\",\n      stroke: \"#bbb\",\n      strokeWidth: \"1px\"\n    },\n    text: {\n      pointerEvents: \"none\",\n      userSelect: \"none\",\n      fill: theme.palette.text.primary,\n      fontSize: \"25px\",\n      fontWeight: 800,\n      opacity: 0.7\n    }\n  }),\n  { name: \"PluginTechRadarGrid\" }\n);\nconst RadarGrid = (props) => {\n  const { radius, rings } = props;\n  const classes = useStyles$5(props);\n  const makeRingNode = (ringIndex, ringRadius) => [\n    /* @__PURE__ */ React.createElement(\n      \"circle\",\n      {\n        key: `c${ringIndex}`,\n        cx: 0,\n        cy: 0,\n        r: ringRadius,\n        className: classes.ring\n      }\n    ),\n    /* @__PURE__ */ React.createElement(\n      \"text\",\n      {\n        key: `t${ringIndex}`,\n        y: ringRadius !== void 0 ? -ringRadius + 42 : void 0,\n        textAnchor: \"middle\",\n        className: classes.text,\n        style: { fill: rings[ringIndex].color },\n        \"data-testid\": \"radar-ring-heading\"\n      },\n      rings[ringIndex].name\n    )\n  ];\n  const axisNodes = [\n    // X axis\n    /* @__PURE__ */ React.createElement(\n      \"line\",\n      {\n        key: \"x\",\n        x1: 0,\n        y1: -radius,\n        x2: 0,\n        y2: radius,\n        className: classes.axis,\n        \"data-testid\": \"radar-grid-x-line\"\n      }\n    ),\n    // Y axis\n    /* @__PURE__ */ React.createElement(\n      \"line\",\n      {\n        key: \"y\",\n        x1: -radius,\n        y1: 0,\n        x2: radius,\n        y2: 0,\n        className: classes.axis,\n        \"data-testid\": \"radar-grid-y-line\"\n      }\n    )\n  ];\n  const ringNodes = rings.map((r) => r.outerRadius).map((ringRadius, ringIndex) => makeRingNode(ringIndex, ringRadius));\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, axisNodes.concat(...ringNodes));\n};\n\nfunction isValidUrl(url) {\n  return Boolean(url && url !== \"#\" && url.length > 0);\n}\nconst WithLink = ({\n  url,\n  className,\n  children\n}) => isValidUrl(url) ? /* @__PURE__ */ React.createElement(Link, { className, to: url }, children) : /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n\nconst RadarTimeline = (props) => {\n  const { timeline } = props;\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(Typography, { variant: \"h6\", gutterBottom: true }, \"History\"), /* @__PURE__ */ React.createElement(TableContainer, { component: Paper }, /* @__PURE__ */ React.createElement(Table, { \"aria-label\": \"simple table\" }, /* @__PURE__ */ React.createElement(TableHead, null, /* @__PURE__ */ React.createElement(TableRow, null, /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved in direction\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved to ring\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Moved on date\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, \"Description\"))), /* @__PURE__ */ React.createElement(TableBody, null, (timeline == null ? void 0 : timeline.length) === 0 && /* @__PURE__ */ React.createElement(TableRow, { key: \"no-timeline\" }, /* @__PURE__ */ React.createElement(TableCell, { component: \"th\", scope: \"row\" }, \"No Timeline\")), timeline == null ? void 0 : timeline.map((timeEntry) => /* @__PURE__ */ React.createElement(TableRow, { key: timeEntry.description }, /* @__PURE__ */ React.createElement(TableCell, { component: \"th\", scope: \"row\" }, timeEntry.moved === MovedState.Up ? /* @__PURE__ */ React.createElement(ArrowUpwardIcon, null) : \"\", timeEntry.moved === MovedState.Down ? /* @__PURE__ */ React.createElement(ArrowDownwardIcon, null) : \"\", timeEntry.moved === MovedState.NoChange ? /* @__PURE__ */ React.createElement(AdjustIcon, null) : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.ring.name ? timeEntry.ring.name : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.date.toLocaleDateString() ? timeEntry.date.toLocaleDateString() : \"\"), /* @__PURE__ */ React.createElement(TableCell, { align: \"left\" }, timeEntry.description ? timeEntry.description : \"\")))))));\n};\n\nconst RadarDescription = (props) => {\n  function showDialogActions(url2, links2) {\n    return isValidUrl(url2) || Boolean(links2 && links2.length > 0);\n  }\n  const { open, onClose, title, description, timeline, url, links } = props;\n  return /* @__PURE__ */ React.createElement(Dialog, { \"data-testid\": \"radar-description\", open, onClose }, /* @__PURE__ */ React.createElement(DialogTitle, { \"data-testid\": \"radar-description-dialog-title\" }, title), /* @__PURE__ */ React.createElement(DialogContent, { dividers: true }, /* @__PURE__ */ React.createElement(MarkdownContent, { content: description }), /* @__PURE__ */ React.createElement(RadarTimeline, { timeline })), showDialogActions(url, links) && /* @__PURE__ */ React.createElement(DialogActions, null, links == null ? void 0 : links.map((link) => /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      component: Link,\n      to: link.url,\n      onClick: onClose,\n      color: \"primary\",\n      startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null),\n      key: link.url\n    },\n    link.title\n  )), isValidUrl(url) && /* @__PURE__ */ React.createElement(\n    Button,\n    {\n      component: Link,\n      to: url,\n      onClick: onClose,\n      color: \"primary\",\n      startIcon: /* @__PURE__ */ React.createElement(LinkIcon, null),\n      key: url\n    },\n    \"LEARN MORE\"\n  )));\n};\n\nconst useStyles$4 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"9px\",\n    fill: theme.palette.common.white,\n    textAnchor: \"middle\"\n  },\n  link: {\n    cursor: \"pointer\"\n  }\n}));\nconst makeBlip = (color, moved) => {\n  const style = { fill: color };\n  let blip = /* @__PURE__ */ React.createElement(\"circle\", { r: 9, style });\n  if (moved && moved > 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", { d: \"M -11,5 11,5 0,-13 z\", style });\n  } else if (moved && moved < 0) {\n    blip = /* @__PURE__ */ React.createElement(\"path\", { d: \"M -11,-5 11,-5 0,13 z\", style });\n  }\n  return blip;\n};\nconst RadarEntry = (props) => {\n  const classes = useStyles$4(props);\n  const [open, setOpen] = React.useState(false);\n  const {\n    moved,\n    description,\n    timeline,\n    title,\n    color,\n    url,\n    links,\n    value,\n    x,\n    y,\n    onMouseEnter,\n    onMouseLeave,\n    onClick\n  } = props;\n  const blip = makeBlip(color, moved);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      transform: `translate(${x}, ${y})`,\n      onMouseEnter,\n      onMouseLeave,\n      onClick,\n      \"data-testid\": \"radar-entry\"\n    },\n    \" \",\n    open && /* @__PURE__ */ React.createElement(\n      RadarDescription,\n      {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        description: description ? description : \"no description\",\n        timeline: timeline ? timeline : [],\n        url,\n        links\n      }\n    ),\n    description ? (\n      // eslint-disable-next-line jsx-a11y/anchor-is-valid\n      /* @__PURE__ */ React.createElement(\n        \"a\",\n        {\n          className: classes.link,\n          onClick: handleClickOpen,\n          role: \"button\",\n          href: \"#\",\n          tabIndex: 0,\n          onKeyPress: toggle\n        },\n        blip\n      )\n    ) : /* @__PURE__ */ React.createElement(WithLink, { url, className: classes.link }, blip),\n    /* @__PURE__ */ React.createElement(\"text\", { y: 3, className: classes.text }, value)\n  );\n};\n\nconst useStyles$3 = makeStyles((theme) => ({\n  bubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0\n  },\n  visibleBubble: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    opacity: 0.8\n  },\n  background: {\n    fill: \"#333\"\n  },\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.common.white\n  }\n}));\nconst RadarBubble = (props) => {\n  const classes = useStyles$3(props);\n  const { visible, text } = props;\n  const textElem = useRef(null);\n  const svgElem = useRef(null);\n  const rectElem = useRef(null);\n  const pathElem = useRef(null);\n  const updatePosition = () => {\n    if (textElem.current) {\n      const { x, y } = props;\n      const bbox = textElem.current.getBBox();\n      const marginX = 5;\n      const marginY = 4;\n      if (svgElem.current) {\n        svgElem.current.setAttribute(\n          \"transform\",\n          `translate(${x - bbox.width / 2}, ${y - bbox.height - marginY})`\n        );\n      }\n      if (rectElem.current) {\n        rectElem.current.setAttribute(\"x\", String(-marginX));\n        rectElem.current.setAttribute(\"y\", String(-bbox.height));\n        rectElem.current.setAttribute(\n          \"width\",\n          String(bbox.width + 2 * marginX)\n        );\n        rectElem.current.setAttribute(\"height\", String(bbox.height + marginY));\n      }\n      if (pathElem.current) {\n        pathElem.current.setAttribute(\n          \"transform\",\n          `translate(${bbox.width / 2 - marginX}, ${marginY - 1})`\n        );\n      }\n    }\n  };\n  useLayoutEffect(() => {\n    updatePosition();\n  });\n  return /* @__PURE__ */ React.createElement(\n    \"g\",\n    {\n      ref: svgElem,\n      x: 0,\n      y: 0,\n      className: visible ? classes.visibleBubble : classes.bubble,\n      \"data-testid\": \"radar-bubble\"\n    },\n    /* @__PURE__ */ React.createElement(\"rect\", { ref: rectElem, rx: 4, ry: 4, className: classes.background }),\n    /* @__PURE__ */ React.createElement(\"text\", { ref: textElem, className: classes.text }, text),\n    /* @__PURE__ */ React.createElement(\n      \"path\",\n      {\n        ref: pathElem,\n        d: \"M 0,0 10,0 5,8 z\",\n        className: classes.background\n      }\n    )\n  );\n};\n\nconst useStyles$2 = makeStyles((theme) => ({\n  text: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    fontSize: \"10px\",\n    fill: theme.palette.text.secondary\n  }\n}));\nconst RadarFooter = (props) => {\n  const { x, y } = props;\n  const classes = useStyles$2(props);\n  return /* @__PURE__ */ React.createElement(\n    \"text\",\n    {\n      \"data-testid\": \"radar-footer\",\n      transform: `translate(${x}, ${y})`,\n      className: classes.text\n    },\n    \"\\u25B2 moved up\\xA0\\xA0\\xA0\\xA0\\xA0\\u25BC moved down\"\n  );\n};\n\nconst RadarLegendLink = ({\n  url,\n  description,\n  title,\n  classes,\n  active,\n  links,\n  timeline\n}) => {\n  const [open, setOpen] = React.useState(false);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const toggle = () => {\n    setOpen(!open);\n  };\n  if (description) {\n    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\n      Typography,\n      {\n        component: \"span\",\n        className: classes.entryLink,\n        onClick: handleClickOpen,\n        role: \"button\",\n        tabIndex: 0,\n        onKeyPress: toggle\n      },\n      /* @__PURE__ */ React.createElement(\n        Typography,\n        {\n          component: \"span\",\n          className: active ? classes.activeEntry : classes.entry\n        },\n        title\n      )\n    ), open && /* @__PURE__ */ React.createElement(\n      RadarDescription,\n      {\n        open,\n        onClose: handleClose,\n        title: title ? title : \"no title\",\n        url,\n        description,\n        timeline: timeline ? timeline : [],\n        links\n      }\n    ));\n  }\n  return /* @__PURE__ */ React.createElement(WithLink, { url, className: classes.entryLink }, /* @__PURE__ */ React.createElement(\n    Typography,\n    {\n      component: \"span\",\n      className: active ? classes.activeEntry : classes.entry\n    },\n    title\n  ));\n};\n\nconst RadarLegendRing = ({\n  ring,\n  entries,\n  classes,\n  onEntryMouseEnter,\n  onEntryMouseLeave\n}) => {\n  return /* @__PURE__ */ React.createElement(\"div\", { \"data-testid\": \"radar-ring\", key: ring.id, className: classes.ring }, /* @__PURE__ */ React.createElement(\n    \"h3\",\n    {\n      className: classes.ringHeading,\n      style: { color: ring.color },\n      \"data-testid\": \"radar-legend-heading\"\n    },\n    ring.name\n  ), entries.length === 0 ? /* @__PURE__ */ React.createElement(Typography$1, { paragraph: true, className: classes.ringEmpty }, \"(empty)\") : /* @__PURE__ */ React.createElement(\"ol\", { className: classes.ringList }, entries.map((entry) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(\n      \"li\",\n      {\n        key: entry.id,\n        value: (entry.index || 0) + 1,\n        onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n        onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n      },\n      /* @__PURE__ */ React.createElement(\n        RadarLegendLink,\n        {\n          classes,\n          url: entry.url,\n          title: entry.title,\n          description: entry.description,\n          active: entry.active,\n          links: (_a = entry.links) != null ? _a : [],\n          timeline: (_b = entry.timeline) != null ? _b : []\n        }\n      )\n    );\n  })));\n};\n\nconst setupSegments = (entries) => {\n  const segments = {};\n  for (const entry of entries) {\n    const quadrantIndex = entry.quadrant.index;\n    const ringIndex = entry.ring.index;\n    let quadrantData = {};\n    if (quadrantIndex !== void 0) {\n      if (segments[quadrantIndex] === void 0) {\n        segments[quadrantIndex] = {};\n      }\n      quadrantData = segments[quadrantIndex];\n    }\n    let ringData = [];\n    if (ringIndex !== void 0) {\n      if (quadrantData[ringIndex] === void 0) {\n        quadrantData[ringIndex] = [];\n      }\n      ringData = quadrantData[ringIndex];\n    }\n    ringData.push(entry);\n  }\n  return segments;\n};\nconst getSegment = (segmented, quadrant, ring, ringOffset = 0) => {\n  const quadrantIndex = quadrant.index;\n  const ringIndex = ring.index;\n  const segmentedData = quadrantIndex === void 0 ? {} : segmented[quadrantIndex] || {};\n  return ringIndex === void 0 ? [] : segmentedData[ringIndex + ringOffset] || [];\n};\n\nconst RadarLegendQuadrant = ({\n  segments,\n  quadrant,\n  rings,\n  classes,\n  onEntryMouseEnter,\n  onEntryMouseLeave\n}) => {\n  return /* @__PURE__ */ React.createElement(\n    \"foreignObject\",\n    {\n      key: quadrant.id,\n      x: quadrant.legendX,\n      y: quadrant.legendY,\n      width: quadrant.legendWidth,\n      height: quadrant.legendHeight,\n      \"data-testid\": \"radar-quadrant\"\n    },\n    /* @__PURE__ */ React.createElement(\"div\", { className: classes.quadrant }, /* @__PURE__ */ React.createElement(\"h2\", { className: classes.quadrantHeading }, quadrant.name), /* @__PURE__ */ React.createElement(\"div\", { className: classes.rings }, rings.map((ring) => /* @__PURE__ */ React.createElement(\n      RadarLegendRing,\n      {\n        key: ring.id,\n        ring,\n        classes,\n        entries: getSegment(segments, quadrant, ring),\n        onEntryMouseEnter,\n        onEntryMouseLeave\n      }\n    ))))\n  );\n};\n\nconst useStyles$1 = makeStyles((theme) => ({\n  quadrant: {\n    height: \"100%\",\n    width: \"100%\",\n    overflowY: \"auto\",\n    scrollbarWidth: \"thin\"\n  },\n  quadrantHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(2),\n    fontSize: \"18px\"\n  },\n  rings: {\n    columns: 3\n  },\n  ring: {\n    breakInside: \"avoid-column\",\n    pageBreakInside: \"avoid\",\n    \"-webkit-column-break-inside\": \"avoid\",\n    fontSize: \"12px\",\n    marginBottom: theme.spacing(2)\n  },\n  ringEmpty: {\n    color: theme.palette.text.secondary,\n    fontSize: \"12px\"\n  },\n  ringHeading: {\n    pointerEvents: \"none\",\n    userSelect: \"none\",\n    marginTop: 0,\n    marginBottom: theme.spacing(1),\n    fontSize: \"12px\",\n    fontWeight: 800\n  },\n  ringList: {\n    listStylePosition: \"inside\",\n    marginTop: 0,\n    paddingLeft: 0,\n    fontVariantNumeric: \"proportional-nums\",\n    \"-moz-font-feature-settings\": \"pnum\",\n    \"-webkit-font-feature-settings\": \"pnum\",\n    \"font-feature-settings\": \"pnum\"\n  },\n  entry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\"\n  },\n  activeEntry: {\n    pointerEvents: \"visiblePainted\",\n    userSelect: \"none\",\n    fontSize: \"11px\",\n    background: \"#6f6f6f\",\n    color: theme.palette.common.white\n  },\n  entryLink: {\n    pointerEvents: \"visiblePainted\",\n    cursor: \"pointer\"\n  }\n}));\nconst RadarLegend = ({\n  quadrants,\n  rings,\n  entries,\n  onEntryMouseEnter,\n  onEntryMouseLeave,\n  ...props\n}) => {\n  const classes = useStyles$1(props);\n  return /* @__PURE__ */ React.createElement(\"g\", { \"data-testid\": \"radar-legend\" }, quadrants.map((quadrant) => /* @__PURE__ */ React.createElement(\n    RadarLegendQuadrant,\n    {\n      key: quadrant.id,\n      segments: setupSegments(entries),\n      quadrant,\n      rings,\n      classes,\n      onEntryMouseEnter,\n      onEntryMouseLeave\n    }\n  )));\n};\n\nconst RadarPlot = (props) => {\n  const {\n    width,\n    height,\n    radius,\n    quadrants,\n    rings,\n    entries,\n    activeEntry,\n    onEntryMouseEnter,\n    onEntryMouseLeave\n  } = props;\n  return /* @__PURE__ */ React.createElement(\"g\", { \"data-testid\": \"radar-plot\" }, /* @__PURE__ */ React.createElement(\n    RadarLegend,\n    {\n      quadrants,\n      rings,\n      entries,\n      onEntryMouseEnter: onEntryMouseEnter && ((entry) => onEntryMouseEnter(entry)),\n      onEntryMouseLeave: onEntryMouseLeave && ((entry) => onEntryMouseLeave(entry))\n    }\n  ), /* @__PURE__ */ React.createElement(\"g\", { transform: `translate(${width / 2}, ${height / 2})` }, /* @__PURE__ */ React.createElement(RadarGrid, { radius, rings }), /* @__PURE__ */ React.createElement(RadarFooter, { x: -0.5 * width, y: 0.5 * height }), entries.map((entry) => /* @__PURE__ */ React.createElement(\n    RadarEntry,\n    {\n      key: entry.id,\n      x: entry.x || 0,\n      y: entry.y || 0,\n      color: entry.color || \"\",\n      value: ((entry == null ? void 0 : entry.index) || 0) + 1,\n      url: entry.url,\n      links: entry.links,\n      description: entry.description,\n      moved: entry.moved,\n      title: entry.title,\n      timeline: entry.timeline,\n      onMouseEnter: onEntryMouseEnter && (() => onEntryMouseEnter(entry)),\n      onMouseLeave: onEntryMouseLeave && (() => onEntryMouseLeave(entry))\n    }\n  )), /* @__PURE__ */ React.createElement(\n    RadarBubble,\n    {\n      visible: !!activeEntry,\n      text: (activeEntry == null ? void 0 : activeEntry.title) || \"\",\n      x: (activeEntry == null ? void 0 : activeEntry.x) || 0,\n      y: (activeEntry == null ? void 0 : activeEntry.y) || 0\n    }\n  )));\n};\n\nclass Segment {\n  constructor(quadrant, ring, radius, nextSeed) {\n    this.nextSeed = nextSeed;\n    this.polarMin = {\n      t: quadrant.radialMin,\n      r: ring.innerRadius\n    };\n    this.polarMax = {\n      t: quadrant.radialMax,\n      r: ring.outerRadius\n    };\n    this.cartesianMin = {\n      x: 15 * quadrant.offsetX,\n      y: 15 * quadrant.offsetY\n    };\n    this.cartesianMax = {\n      x: radius * quadrant.offsetX,\n      y: radius * quadrant.offsetY\n    };\n  }\n  clipx(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.x = cartesian(p).x;\n    return d.x;\n  }\n  clipy(d) {\n    const c = boundedBox(d, this.cartesianMin, this.cartesianMax);\n    const p = boundedRing(polar(c), this.polarMin.r + 15, this.polarMax.r - 15);\n    d.y = cartesian(p).y;\n    return d.y;\n  }\n  random() {\n    return cartesian({\n      t: this._randomBetween(this.polarMin.t, this.polarMax.t),\n      r: this._normalBetween(this.polarMin.r, this.polarMax.r)\n    });\n  }\n  // custom random number generator, to make random sequence reproducible\n  // source: https://stackoverflow.com/questions/521295\n  _random() {\n    const x = Math.sin(this.nextSeed()) * 1e4;\n    return x - Math.floor(x);\n  }\n  _randomBetween(min, max) {\n    return min + this._random() * (max - min);\n  }\n  _normalBetween(min, max) {\n    return min + (this._random() + this._random()) * 0.5 * (max - min);\n  }\n}\nfunction polar({ x, y }) {\n  return {\n    t: Math.atan2(y, x),\n    r: Math.sqrt(x * x + y * y)\n  };\n}\nfunction cartesian({ r, t }) {\n  return {\n    x: r * Math.cos(t),\n    y: r * Math.sin(t)\n  };\n}\nfunction boundedInterval(value, min, max) {\n  const low = Math.min(min, max);\n  const high = Math.max(min, max);\n  return Math.min(Math.max(value, low), high);\n}\nfunction boundedRing(polarValue, rMin, rMax) {\n  return {\n    t: polarValue.t,\n    r: boundedInterval(polarValue.r, rMin, rMax)\n  };\n}\nfunction boundedBox(point, min, max) {\n  return {\n    x: boundedInterval(point.x, min.x, max.x),\n    y: boundedInterval(point.y, min.y, max.y)\n  };\n}\n\nconst adjustQuadrants = (quadrants, radius, width, height) => {\n  const margin = 16;\n  const xStops = [\n    margin,\n    width / 2 - radius - margin,\n    width / 2 + radius + margin,\n    width - margin\n  ];\n  const yStops = [margin, height / 2 - margin, height / 2, height - margin];\n  const legendParams = [\n    {\n      x: xStops[2],\n      y: yStops[2],\n      width: xStops[3] - xStops[2],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[2],\n      width: xStops[1] - xStops[0],\n      height: yStops[3] - yStops[2]\n    },\n    {\n      x: xStops[0],\n      y: yStops[0],\n      width: xStops[1] - xStops[0],\n      height: yStops[1] - yStops[0]\n    },\n    {\n      x: xStops[2],\n      y: yStops[0],\n      width: xStops[3] - xStops[2],\n      height: yStops[1] - yStops[0]\n    }\n  ];\n  return quadrants.map((quadrant, index) => {\n    const legendParam = legendParams[index % 4];\n    return {\n      ...quadrant,\n      index,\n      radialMin: index * Math.PI / 2,\n      radialMax: (index + 1) * Math.PI / 2,\n      offsetX: index % 4 === 0 || index % 4 === 3 ? 1 : -1,\n      offsetY: index % 4 === 0 || index % 4 === 1 ? 1 : -1,\n      legendX: legendParam.x,\n      legendY: legendParam.y,\n      legendWidth: legendParam.width,\n      legendHeight: legendParam.height\n    };\n  });\n};\nconst adjustEntries = (entries, quadrants, rings, radius, activeEntry) => {\n  let seed = 42;\n  const adjustedEntries = entries.map((entry, index) => {\n    const quadrant = quadrants.find((q) => {\n      const match = typeof entry.quadrant === \"object\" ? entry.quadrant.id : entry.quadrant;\n      return q.id === match;\n    });\n    const ring = rings.find((r) => {\n      const match = typeof entry.ring === \"object\" ? entry.ring.id : entry.ring;\n      return r.id === match;\n    });\n    if (!quadrant) {\n      throw new Error(\n        `Unknown quadrant ${entry.quadrant} for entry ${entry.id}!`\n      );\n    }\n    if (!ring) {\n      throw new Error(`Unknown ring ${entry.ring} for entry ${entry.id}!`);\n    }\n    const segment = new Segment(quadrant, ring, radius, () => seed++);\n    const point = segment == null ? void 0 : segment.random();\n    return {\n      ...entry,\n      index,\n      quadrant,\n      ring,\n      segment,\n      x: point.x,\n      y: point.y,\n      color: activeEntry && entry.id === (activeEntry == null ? void 0 : activeEntry.id) ? entry.ring.color : color(entry.ring.color).desaturate(0.5).lighten(0.1).string(),\n      active: activeEntry && entry.id === (activeEntry == null ? void 0 : activeEntry.id) ? true : false\n    };\n  });\n  const simulation = forceSimulation().nodes(adjustedEntries).velocityDecay(0.19).force(\"collision\", forceCollide().radius(12).strength(0.85)).stop();\n  for (let i = 0, n = Math.ceil(\n    Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay())\n  ); i < n; ++i) {\n    simulation.tick();\n    for (const entry of adjustedEntries) {\n      if (entry.segment) {\n        entry.x = entry.segment.clipx(entry);\n        entry.y = entry.segment.clipy(entry);\n      }\n    }\n  }\n  return adjustedEntries;\n};\nconst adjustRings = (rings, radius) => rings.map((ring, index) => ({\n  ...ring,\n  index,\n  outerRadius: (index + 2) / (rings.length + 1) * radius,\n  innerRadius: (index === 0 ? 0 : index + 1) / (rings.length + 1) * radius\n}));\n\nconst Radar = ({\n  width,\n  height,\n  quadrants,\n  rings,\n  entries,\n  ...props\n}) => {\n  const radius = Math.min(width, height) / 2;\n  const [activeEntry, setActiveEntry] = useState();\n  const node = useRef(null);\n  const adjustedQuadrants = useMemo(\n    () => adjustQuadrants(quadrants, radius, width, height),\n    [quadrants, radius, width, height]\n  );\n  const adjustedRings = useMemo(\n    () => adjustRings(rings, radius),\n    [radius, rings]\n  );\n  const adjustedEntries = useMemo(\n    () => adjustEntries(\n      entries,\n      adjustedQuadrants,\n      adjustedRings,\n      radius,\n      activeEntry\n    ),\n    [entries, adjustedQuadrants, adjustedRings, radius, activeEntry]\n  );\n  return /* @__PURE__ */ React.createElement(\"svg\", { ref: node, width, height, ...props.svgProps }, /* @__PURE__ */ React.createElement(\n    RadarPlot,\n    {\n      width,\n      height,\n      radius,\n      entries: adjustedEntries,\n      quadrants: adjustedQuadrants,\n      rings: adjustedRings,\n      activeEntry,\n      onEntryMouseEnter: (entry) => setActiveEntry(entry),\n      onEntryMouseLeave: () => setActiveEntry(void 0)\n    }\n  ));\n};\n\nconst useTechRadarLoader = (id) => {\n  const errorApi = useApi(errorApiRef);\n  const techRadarApi = useApi(techRadarApiRef);\n  const { error, value, loading } = useAsync(\n    async () => techRadarApi.load(id),\n    [techRadarApi, id]\n  );\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n  return { loading, value, error };\n};\nfunction matchFilter(filter) {\n  const terms = filter == null ? void 0 : filter.toLocaleLowerCase(\"en-US\").split(/\\s/).map((e) => e.trim()).filter(Boolean);\n  if (!(terms == null ? void 0 : terms.length)) {\n    return () => true;\n  }\n  return (entry) => {\n    var _a;\n    const text = `${entry.title} ${((_a = entry.timeline[0]) == null ? void 0 : _a.description) || \"\"}`.toLocaleLowerCase(\"en-US\");\n    return terms.every((term) => text.includes(term));\n  };\n}\nfunction RadarComponent(props) {\n  const { loading, error, value: data } = useTechRadarLoader(props.id);\n  const mapToEntries = (loaderResponse) => {\n    return loaderResponse.entries.filter(matchFilter(props.searchText)).map((entry) => ({\n      id: entry.key,\n      quadrant: loaderResponse.quadrants.find((q) => q.id === entry.quadrant),\n      title: entry.title,\n      ring: loaderResponse.rings.find(\n        (r) => r.id === entry.timeline[0].ringId\n      ),\n      timeline: entry.timeline.map((e) => {\n        return {\n          date: e.date,\n          ring: loaderResponse.rings.find((a) => a.id === e.ringId),\n          description: e.description,\n          moved: e.moved\n        };\n      }),\n      moved: entry.timeline[0].moved,\n      description: entry.description || entry.timeline[0].description,\n      url: entry.url,\n      links: entry.links\n    }));\n  };\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, loading && /* @__PURE__ */ React.createElement(Progress, null), !loading && !error && data && /* @__PURE__ */ React.createElement(\n    Radar,\n    {\n      ...props,\n      rings: data.rings,\n      quadrants: data.quadrants,\n      entries: mapToEntries(data)\n    }\n  ));\n}\n\nconst useStyles = makeStyles(() => ({\n  overflowXScroll: {\n    overflowX: \"scroll\"\n  }\n}));\nfunction RadarPage(props) {\n  const {\n    title = \"Tech Radar\",\n    subtitle = \"Pick the recommended technologies for your projects\",\n    pageTitle = \"Company Radar\",\n    ...componentProps\n  } = props;\n  const classes = useStyles();\n  const [searchText, setSearchText] = React.useState(\"\");\n  return /* @__PURE__ */ React.createElement(Page, { themeId: \"tool\" }, /* @__PURE__ */ React.createElement(Header, { title, subtitle }), /* @__PURE__ */ React.createElement(Content, { className: classes.overflowXScroll }, /* @__PURE__ */ React.createElement(ContentHeader, { title: pageTitle }, /* @__PURE__ */ React.createElement(\n    Input,\n    {\n      id: \"tech-radar-filter\",\n      type: \"search\",\n      placeholder: \"Filter\",\n      onChange: (e) => setSearchText(e.target.value)\n    }\n  ), /* @__PURE__ */ React.createElement(SupportButton, null, /* @__PURE__ */ React.createElement(Typography, { paragraph: true }, \"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at\", \" \", /* @__PURE__ */ React.createElement(Link, { to: \"https://opensource.zalando.com/tech-radar/\" }, \"Zalando Tech Radar\"), \".\"))), /* @__PURE__ */ React.createElement(Grid, { container: true, spacing: 3, direction: \"row\" }, /* @__PURE__ */ React.createElement(Grid, { item: true, xs: 12, sm: 6, md: 4 }, /* @__PURE__ */ React.createElement(RadarComponent, { searchText, ...componentProps })))));\n}\n\nvar RadarPage$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  RadarPage: RadarPage\n});\n\nconst rings = new Array();\nrings.push({ id: \"adopt\", name: \"ADOPT\", color: \"#5BA300\" });\nrings.push({ id: \"trial\", name: \"TRIAL\", color: \"#009EB0\" });\nrings.push({ id: \"assess\", name: \"ASSESS\", color: \"#C7BA00\" });\nrings.push({ id: \"hold\", name: \"HOLD\", color: \"#E09B96\" });\nconst quadrants = new Array();\nquadrants.push({ id: \"infrastructure\", name: \"Infrastructure\" });\nquadrants.push({ id: \"frameworks\", name: \"Frameworks\" });\nquadrants.push({ id: \"languages\", name: \"Languages\" });\nquadrants.push({ id: \"process\", name: \"Process\" });\nconst entries = new Array();\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\"\n    }\n  ],\n  key: \"javascript\",\n  id: \"javascript\",\n  title: \"JavaScript\",\n  quadrant: \"languages\",\n  links: [\n    {\n      url: \"https://www.javascript.com/\",\n      title: \"Learn more\"\n    },\n    {\n      url: \"https://www.typescriptlang.org/\",\n      title: \"TypeScript\"\n    }\n  ],\n  description: 'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\\n\\n```ts\\nconst x = \"3\";\\n```\\n'\n});\nentries.push({\n  timeline: [\n    {\n      moved: -1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat\"\n    }\n  ],\n  key: \"typescript\",\n  id: \"typescript\",\n  title: \"TypeScript\",\n  quadrant: \"languages\",\n  description: \"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 1,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://webpack.js.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"webpack\",\n  id: \"webpack\",\n  title: \"Webpack\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  links: [\n    {\n      url: \"https://reactjs.org/\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"react\",\n  id: \"react\",\n  title: \"React\",\n  quadrant: \"frameworks\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"code-reviews\",\n  id: \"code-reviews\",\n  title: \"Code Reviews\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"assess\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"mob-programming\",\n  id: \"mob-programming\",\n  title: \"Mob Programming\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      moved: 0,\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"docs-like-code\",\n  id: \"docs-like-code\",\n  title: \"Docs-like-code\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"hold\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\")\n    }\n  ],\n  key: \"force-push\",\n  id: \"force-push\",\n  title: \"Force push to master\",\n  quadrant: \"process\"\n});\nentries.push({\n  timeline: [\n    {\n      ringId: \"adopt\",\n      date: /* @__PURE__ */ new Date(\"2020-08-06\"),\n      description: \"long description\"\n    },\n    {\n      ringId: \"trial\",\n      date: /* @__PURE__ */ new Date(\"2020-07-05\"),\n      description: \"long description\"\n    }\n  ],\n  links: [\n    {\n      url: \"https://github.com\",\n      title: \"Learn more\"\n    }\n  ],\n  key: \"github-actions\",\n  id: \"github-actions\",\n  title: \"GitHub Actions\",\n  quadrant: \"infrastructure\"\n});\nconst mock = {\n  entries,\n  quadrants,\n  rings\n};\nclass SampleTechRadarApi {\n  async load() {\n    return mock;\n  }\n}\n\nconst rootRouteRef = createRouteRef({\n  id: \"tech-radar\"\n});\nconst techRadarPlugin = createPlugin({\n  id: \"tech-radar\",\n  routes: {\n    root: rootRouteRef\n  },\n  apis: [createApiFactory(techRadarApiRef, new SampleTechRadarApi())]\n});\nconst TechRadarPage = techRadarPlugin.provide(\n  createRoutableExtension({\n    name: \"TechRadarPage\",\n    component: () => Promise.resolve().then(function () { return RadarPage$1; }).then((m) => m.RadarPage),\n    mountPoint: rootRouteRef\n  })\n);\n\nconst Router = RadarPage;\n\nexport { MovedState, RadarPage, Router, RadarComponent as TechRadarComponent, TechRadarPage, techRadarPlugin as plugin, techRadarApiRef, techRadarPlugin };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext, useContext } from 'react';\n\nfunction getGlobalObject() {\n  if (typeof window !== \"undefined\" && window.Math === Math) {\n    return window;\n  }\n  if (typeof self !== \"undefined\" && self.Math === Math) {\n    return self;\n  }\n  return Function(\"return this\")();\n}\nconst globalObject = getGlobalObject();\nconst makeKey = (id) => `__@backstage/${id}__`;\nfunction getOrCreateGlobalSingleton(id, supplier) {\n  const key = makeKey(id);\n  let value = globalObject[key];\n  if (value) {\n    return value;\n  }\n  value = supplier();\n  globalObject[key] = value;\n  return value;\n}\n\nfunction createVersionedValueMap(versions) {\n  Object.freeze(versions);\n  const versionedValue = {\n    atVersion(version) {\n      return versions[version];\n    }\n  };\n  Object.defineProperty(versionedValue, \"$map\", {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return versions;\n    }\n  });\n  return versionedValue;\n}\n\nfunction createVersionedContext(key) {\n  return getOrCreateGlobalSingleton(\n    key,\n    () => createContext(void 0)\n  );\n}\nfunction useVersionedContext(key) {\n  return useContext(createVersionedContext(key));\n}\nfunction createVersionedContextForTesting(key) {\n  return {\n    set(versions) {\n      globalThis[`__@backstage/${key}__`] = createContext(\n        createVersionedValueMap(versions)\n      );\n    },\n    reset() {\n      delete globalThis[`__@backstage/${key}__`];\n    }\n  };\n}\n\nexport { createVersionedContext, createVersionedContextForTesting, createVersionedValueMap, getOrCreateGlobalSingleton, useVersionedContext };\n//# sourceMappingURL=index.esm.js.map\n"],"names":["AuthorizeResult2","isPermission","permission","comparedPermission","resourceType","isCreatePermission","isReadPermission","isUpdatePermission","isDeletePermission","toPermissionEvaluator","permissionAuthorizer","requests","options","parsedRequests","createPermission","name","attributes","permissionCriteriaSchema","authorizePermissionResponseSchema","queryPermissionResponseSchema","responseSchema","itemSchema","ids","items","id","PermissionClient","_a","queries","_","request","query","permissionApi","response","responseBody","responsesById","acc","r","token","permissionApiRef","IdentityPermissionApi","permissionClient","identityApi","config","discovery","identity","usePermission","input","data","error","args","result","PermissionedRoute","props","resourceRef","errorComponent","otherProps","permissionResult","app","NotFoundErrorPage","shownElement","RequirePermission","shapes","colorVariants","genPageTheme","colors","shape","gradient","backgroundImage","fontColor","pageTheme","DEFAULT_HTML_FONT_SIZE","DEFAULT_FONT_FAMILY","createThemeOptions","palette","htmlFontSize","fontFamily","defaultPageTheme","pageTheme$1","themeId","createThemeOverrides","theme","themeOptions","baseTheme","createTheme","overrides","lightTheme","yellow","darkTheme","apis","configApi","alertApi","errorApi","discoveryApi","oauthRequestApi","OptionallyWrapInRouter","children","DefaultNotFoundPage","DefaultBootErrorPage","step","message","DefaultErrorBoundaryFallback","resetError","plugin","Button","components","icons","themes","ThemeProvider","CssBaseline","createApp","_b","_c","_d","CONFIG_KEY_PART_PATTERN","isObject","value","typeOf","type","errors","key","context","typeName","expected","ConfigReader","fallback","prefix","configs","previousReader","filteredKeys","deprecatedKeys","reader","description","localKeys","fallbackKeys","fallbackValue","into","from","fallbackConfig","values","index","obj","val","number","valueString","validate","keyName","theValue","parts","part","badKey","ApiAggregator","holders","apiRef","holder","api","ApiContext","ApiProvider","parentHolder","ApiResolver","factories","heap","allDeps","factory","dep","ref","loading","impl","deps","dependent","impls","ScopePriority","ScopePriority2","ApiFactoryRegistry","scope","priority","existing","tuple","refs","showLoginPopup","resolve","reject","width","height","left","top","popup","targetOrigin","messageListener","event","authResult","done","intervalId","errMessage","warned$1","defaultJoinScopes","scopes","DefaultAuthConnector","environment","provider","joinScopes","sessionTransform","res","authInfo","popupUrl","payload","path","baseUrl","queryString","DirectAuthConnector","hasScopes$1","searched","searchFor","SessionScopeHelper","session","sessionScopes","newScope","PublishSubject","subscriber","onNext","onError","onComplete","observer","BehaviorSubject","SessionStateTracker","isSignedIn","RefreshingAuthSessionManager","connector","defaultScopes","sessionShouldRefresh","refreshedSession","currentScopes","refreshedScopes","newSession","StaticAuthSessionManager","AuthSessionStore","manager","storageKey","schema","sessionJson","_key","e","DEFAULT_PROVIDER$a","OAuth2","scopeTransform","x","sessionManager","normalizedScopes","scopeList","DEFAULT_PROVIDER$9","GithubAuth","DEFAULT_PROVIDER$8","GitlabAuth","DEFAULT_PROVIDER$7","SCOPE_PREFIX$1","GoogleAuth","DEFAULT_PROVIDER$6","OKTA_OIDC_SCOPES","OKTA_SCOPE_PREFIX","OktaAuth","samlSessionSchema","DEFAULT_PROVIDER$5","SamlAuth","authSessionStore","DEFAULT_PROVIDER$4","_MicrosoftAuth","audiences","aud","audience","groups","resourceURI","MicrosoftAuth","DEFAULT_PROVIDER$3","OIDC_SCOPES","SCOPE_PREFIX","OneLoginAuth","DEFAULT_PROVIDER$2","BitbucketAuth","DEFAULT_PROVIDER$1","BitbucketServerAuth","DEFAULT_PROVIDER","AtlassianAuth","AlertApiForwarder","alert","MultipleAnalyticsApi","actualApis","analyticsApi","NoOpAnalyticsApi","_event","STORAGE_KEY","AppThemeSelector","selector","initialThemeId","_a2","ERROR_PREFIX","UrlPatternDiscovery","pattern","urlStr","url","pluginId","FrontendHostDiscovery","endpoints","defaultEndpoint","target","endpoint","ErrorAlerter","ErrorApiForwarder","UnhandledErrorForwarder","errorContext","validateFlagName","LocalStorageFeatureFlags","flag","state","enabled","jsonStr","json","entries","createFetchApi","middleware","m","IdentityAuthInjectorFetchMiddleware","allowUrl","headerName","headerValue","matcher","buildMatcher","next","init","buildPrefixMatcher","prefixes","trimmedPrefixes","join","right","PluginProtocolResolverFetchMiddleware","hostname","pathname","search","hash","username","password","base","authority","isUrl","a","FetchMiddlewares","hasScopes","moreScopess","moreScopes","OAuthPendingRequests","current","reason","OAuthRequestManager","handler","scopeRequest","newRequests","buckets","_WebStorage","namespace","bucketPath","webStorage","presence","item","messageKey","eventKey","trimmedKey","snapshot","subscription","WebStorage","InternalAppContext","isReactRouterBeta","getExtensionContext","routes","matches","routeMatch","match","routeObject","routeRef","params","TrackNavigation","analytics","RouteTracker","routeObjects","getBasePath","readBasePath","SignInPageWrapper","Component","appIdentityProxy","setIdentityApi","basePath","AppRouter","RouterComponent","SignInPageComponent","mountPath","internalAppContext","traverseElementTree","collectors","queue","node","parent","contexts","element","nextContexts","collector","discoverer","c","createCollector","accumulatorFactory","visit","childDiscoverer","routeElementDiscoverer","pluginCollector","FeatureFlagged","featureFlagApi","isEnabled","MATCH_ALL_ROUTE","stringifyNode","anyNode","collectSubTree","routingV2Collector","ctx","_e","_f","pathProp","mountPoint","parentChildren","elementProp","newObj","extension","others","routingV1Collector","currentObj","currentParentRouteRef","sticky","caseSensitive","currentCtxPath","routePath","featureFlagCollector","routeRefType","isRouteRef","isSubRouteRef","isExternalRouteRef","joinPaths","paths","normalized","resolveTargetRef","anyRouteRef","routePaths","routeBindings","targetRef","subRoutePath","resolvedRoute","resolvedPath","targetPath","resolveBasePath","sourceLocation","routeParents","refDiffList","matchIndex","targetSearchRef","parentPath","diffPaths","RouteResolver","appBasePath","relativeSourceLocation","RoutingContext","RoutingProvider","resolver","versionedValue","validateRouteParameters","notLeafRoutes","route","currentRouteRef","fullPath","j","i","validateRouteBindings","plugins","externalRouteRef","AppContext","AppContextProvider","appContext","mkError","thing","logDeprecation","AppIdentityProxy","targetOptions","resolveTheme","shouldPreferDark","selectedTheme","useShouldPreferDarkTheme","mediaQuery","setPrefersDark","listener","AppThemeProvider","appThemeApi","useObservable","appTheme","defaultConfigLoader","runtimeConfigJson","appConfig","windowAppConfig","ApiRegistryBuilder","ApiRegistry","resolveRouteBindings","bindRoutes","externalRoutes","targetRoutes","externalRoute","__accessCheck","member","msg","__privateGet","getter","__privateAdd","__privateSet","setter","_getProviderCalled","createLocalBaseUrl","fullUrl","useConfigLoader","configLoader","hasConfig","useAsync","noConfigNode","Progress","BootErrorPage","configReader","urlConfigReader","appBaseUrl","backendBaseUrl","relativeResolverConfig","appOrigin","backendOrigin","newBackendBaseUrl","newAppBaseUrl","AppContextImpl","AppManager","AppProvider","routesHaveBeenValidated","needsFeatureFlagRegistrationRef","routing","featureFlags","loadedConfig","hasConfigApi","featureFlagsApi","output","registeredFlags","flagNames","f","pluginIds","createSpecializedApp","warned","FlatRoutes","isBeta","withNotFound","elements","child","b","AlertDisplay","messages","setMessages","anchorOrigin","transientTimeoutMs","timeoutMs","msgs","firstMessage","timeout","newMsgs","handleClose","stringToColor","str","color","extractInitials","useStyles$O","Avatar","displayName","picture","customStyles","classes","styles","fontStyles","useStyles$N","isExternalUri","uri","scriptProtocolPattern","originalWindowOpen","newOpen","useBaseUrl","useBasePath","useResolvedPath","external","startsWithBasePath","getNodeText","Link","onClick","noTrack","to","linkText","newWindow","handleClick","LinkWrapper","LinkButton","CopyTextButton","text","tooltipDelay","tooltipText","ariaLabel","open","setOpen","copyToClipboard","handleCopyClick","CodeSnippet","language","showLineNumbers","highlightedNumbers","customStyle","showCopyCodeButton","mode","highlightColor","lineNumber","CreateButton","title","isXSScreen","DependencyGraphTypes","DependencyGraphTypes2","Direction2","Alignment2","Ranker2","LabelPosition2","useStyles$M","DefaultNode","setWidth","setHeight","idRef","renderedHeight","renderedWidth","padding","paddedWidth","paddedHeight","ARROW_MARKER_ID","NODE_TEST_ID","EDGE_TEST_ID","LABEL_TEST_ID","useStyles$L","renderDefault$1","Node","render","setNode","y","nodeProps","nodeRef","useStyles$K","DefaultLabel","label","useStyles$J","renderDefault","Edge","setEdge","edge","curve","points","labelProps","labelRef","createPath","d","finitePoints","point","WORKSPACE_ID","DependencyGraph","edges","nodes","renderNode","direction","align","nodeMargin","edgeMargin","rankMargin","paddingX","paddingY","acyclicer","ranker","labelPosition","labelOffset","edgeRanks","edgeWeight","renderLabel","defs","zoom","fit","svgProps","containerWidth","setContainerWidth","containerHeight","setContainerHeight","graph","graphWidth","setGraphWidth","graphHeight","setGraphHeight","graphNodes","setGraphNodes","graphEdges","setGraphEdges","maxWidth","maxHeight","minHeight","scalableHeight","containerRef","container","workspace","enableZoom","newContainerWidth","newContainerHeight","setNodesAndEdges","currentGraphNodes","currentGraphEdges","nodeId","existingNode","updateGraph","newHeight","newWidth","useStyles$I","DismissableBanner","variant","fixed","notificationsStore","rawDismissedBanners","dismissedBanners","setDismissedBanners","observedItems","currentValue","useStyles$H","EmptyStateImage","missing","useStyles$G","EmptyState","action","COMPONENT_YAML_TEMPLATE","ANNOTATION_REGEXP","ANNOTATION_YAML","ANNOTATION_LINE","line","useStyles$F","generateLineNumbers","lineCount","generateComponentYaml","annotations","annotationYaml","ann","generateDescription","isSingular","prev","curr","MissingAnnotationEmptyState","annotation","readMoreUrl","getWarningTextColor","severity","getWarningBackgroundColor","useErrorOutlineStyles","ErrorOutlineStyled","ExpandMoreIconStyled","useStyles$E","capitalize","s","WarningPanel","defaultExpanded","subTitle","useStyles$D","ErrorList","stack","ErrorPanel","useStyles$C","ResponseErrorPanel","body","cause","errorString","requestString","messageString","stackString","jsonString","createRootElement","rootContainer","addRootElement","rootElem","usePortal","rootElemRef","existingParent","parentElem","getRootElem","STATES_LOCAL_STORAGE_KEY","useCalloutStates","states","setStates","raw","setState","newStates","useCalloutHasBeenSeen","featureId","markSeen","useShowCallout","seen","useStyles$B","FeatureCalloutCircular","show","hide","portalElement","wrapperRef","placement","setPlacement","update","wrapperBounds","longest","borderWidth","dotLeft","dotTop","dotSize","textWidth","textLeft","textTop","useIconStyles","IconLinkVertical","disabled","href","icon","useStyles$A","HeaderIconLinkRow","links","link","generateGradientStops","themeType","luminance","fadeSize","fadePadding","useStyles$z","useScrollDistance","scrollLeft","scrollRight","setScroll","el","handleUpdate","useSmoothScroll","speed","minDistance","scrollTarget","setScrollTarget","startTime","frameTime","frameDuration","scrollDistance","scrollAmount","newScrollTarget","HorizontalScrollGrid","scrollStep","scrollSpeed","minScrollDistance","handleScrollClick","forwards","useStyles$y","Lifecycle","shorthand","alpha","RealLogViewer","LogViewer","useStyles$x","flatten","headingRenderer","level","slug","inline","className","MarkdownContent","content","dialect","linkTarget","transformLinkUri","transformImageUri","useItemStyles","LoginRequestListItem","busy","setBusy","setError","handleContinue","IconComponent","useStyles$w","OAuthRequestDialog","_props","authRedirect","handleRejectAll","useStyles$v","OverflowTooltip","hover","setHover","isMounted","handleToggled","truncated","isVisible","setIsVisible","handle","useStyles$u","BottomLink","SlackLink","slackChannel","ErrorBoundary","errorInfo","useStyles$t","CardActionsTopRight","VARIANT_STYLES","InfoCard","subheader","divider","deepLink","errorBoundaryProps","headerStyle","headerProps","actionsClassName","actions","cardClassName","actionsTopRight","noPadding","titleTypographyProps","calculatedStyle","calculatedCardStyle","cardSubTitle","errProps","useStyles$s","defaultGaugeProps","getProgressColor","inverse","max","actualMax","actualValue","Gauge","hoverRef","setHoverRef","getColor","fractional","unit","asPercentage","asActual","isHovering","setIsHovering","handleMouseOver","handleMouseOut","useStyles$r","GaugeCard","progress","gaugeProps","LinearGauge","percent","strokeColor","useStyles$q","ClosedDropdown","useStyles$p","OpenedDropdown","BootstrapInput","useStyles$o","SelectComponent","multiple","placeholder","selected","onChange","triggerReset","native","margin","setValue","isOpen","handleChange","handleOpen","previous","handleDelete","selectedValue","newValue","chip","noop","VerticalStepperContext","SimpleStepper","elevated","onStepChange","activeStep","stepIndex","setStepIndex","stepHistory","setStepHistory","steps","endStep","useStyles$n","RestartBtn","NextBtn","last","SkipBtn","BackBtn","SimpleStepperFooter","stepperLength","newIndex","callback","handleNext","handleBack","handleRestart","useStyles$m","SimpleStepperStep","end","muiProps","useStyles$l","StatusOK","StatusWarning","StatusError","StatusPending","StatusRunning","StatusAborted","tableTitleCellStyles","tableContentCellStyles","listStyles","listItemStyles","TitleCell","ContentCell","MetadataTable","dense","MetadataTableItem","rest","MetadataList","MetadataListItem","listStyle","nestedListStyle","StyledList","StyledNestedList","renderList","list","nested","toValue","renderMap","map","fmtKey","ItemValue","TableItem","mapToItems","info","StructuredMetadataTable","metadata","metadataItems","stringify","queryParams","parse","extractState","stateName","joinQueryString","useQueryParamState","debounceTime","searchParams","setSearchParams","searchParamsString","queryParamState","setQueryParamState","newState","oldState","DEFAULT_SUPPORT_CONFIG","useSupportConfig","supportConfig","itemConf","linkConf","useSystemIcon","Icon","BrokenImageIcon","CatalogIcon","ChatIcon","DashboardIcon","DocsIcon","EmailIcon","GitHubIcon","GroupIcon","HelpIcon","UserIcon","WarningIcon","useStyles$k","SupportIcon","SupportLink","SupportListItem","idx","SupportButton","configItems","popoverOpen","setPopoverOpen","anchorEl","setAnchorEl","isSmallScreen","onClickHandler","popoverCloseHandler","drawerWidthClosed","iconPadding","userBadgePadding","sidebarConfig","makeSidebarConfig","customSidebarConfig","submenuConfig","makeSidebarSubmenuConfig","customSubmenuConfig","SIDEBAR_INTRO_LOCAL_STORAGE","SidebarConfigContext","SidebarItemWithSubmenuContext","defaultSidebarOpenStateContext","LegacySidebarContext","VersionedSidebarContext","SidebarOpenStateProvider","useSidebarOpenState","versionedOpenStateContext","legacyOpenStateContext","openStateContext","defaultSidebarPinStateContext","LegacySidebarPinStateContext","VersionedSidebarPinStateContext","SidebarPinStateProvider","useSidebarPinState","versionedPinStateContext","legacyPinStateContext","pinStateContext","useStyles$j","MobileSidebarGroup","location","selectedMenuItemIndex","setSelectedMenuItemIndex","MobileSidebarContext","value2","SidebarGroup","isMobile","useStyles$i","sortSidebarGroupsForPriority","sidebarGroupType","OverlayMenu","onClose","MobileSidebar","sidebarGroups","shouldShowGroupChildren","LocalStorage","useStyles$h","PageContext","SidebarPage","isPinned","setIsPinned","contentRef","pageContext","toggleSidebarPinState","useContent","useStyles$g","DesktopSidebar","openDelayMs","closeDelayMs","disableExpandOnHover","hoverTimerRef","A11ySkipSidebar","Sidebar","focusContent","isLocationMatch","currentLocation","toLocation","toDecodedSearch","toQueryParameters","currentDecodedSearch","currentQueryParameters","useStyles$f","SidebarSubmenuItem","subtitle","dropdownItems","setIsHoveredOn","closeSubmenu","isActive","showDropDown","setShowDropDown","handleClickDropdown","object","useStyles$e","SidebarSubmenu","isHoveredOn","isSubmenuOpen","setIsSubmenuOpen","useStyles$d","DoubleArrowLeft","useStyles$c","DoubleArrowRight","makeSidebarStyles","useMemoStyles","useLocationMatch","submenu","active","_to","isButtonItem","sidebarSubmenuType","WorkaroundNavLink","style","activeStyle","activeClassName","ariaCurrentProp","locationPathname","toPathname","ariaCurrent","SidebarItemBase","hasNotifications","hasSubmenu","disableHighlight","navLinkProps","divStyle","displayItemIcon","itemIcon","openContent","childProps","subject","SidebarItemWithSubmenu","handleMouseEnter","handleMouseLeave","arrowIcon","SidebarItem","SidebarSearchField","setInput","handleEnter","ev","handleInput","handleInputClick","handleItemClick","SidebarSpace","SidebarSpacer","SidebarDivider","styledScrollbar","SidebarScrollWrapper","scrollbarStyles","SidebarExpandButton","useStyles$b","IntroCard","SidebarIntroCard","onDismiss","collapsing","setCollapsing","startDismissing","starredIntroText","recentlyViewedIntroText","SidebarIntro","defaultValue","dismissedIntro","setDismissedIntro","starredItemsDismissed","recentlyViewedItemsDismissed","dismissStarred","dismissRecentlyViewed","useStyles$a","Content","stretch","restProps","useStyles$9","HeaderTabs","tabs","selectedIndex","selectedTab","setSelectedTab","tab","useSelectedSubRoute","subRoutes","sortedRoutes","currentRoute","matchedRoute","foundIndex","t","RoutedTabs","navigate","headerTabs","onTabChange","tabIndex","Route","createSubRoutesFromChildren","childrenProps","routeType","tabProps","TabbedLayout","useSubvalueCellStyles","SubvalueCell","subvalue","useFilterStyles$1","Filters","onChangeFilters","selectedFilters","setSelectedFilters","reset","filter","tableIcons","extractValueByField","field","StyledMTableHeader","StyledMTableToolbar","useFilterStyles","useTableStyles","convertColumns","columns","column","cellStyle","cellStyleFn","rowData","rowColumn","removeDefaultValues","defaultState","defaultInitialState","TableToolbar","toolbarProps","toolbarRef","setSearch","hasFilters","selectedFiltersLength","toggleFilters","filtersClasses","onSearchChanged","searchText","Table","filters","initialState","emptyContent","onStateChange","tableClasses","calculatedInitialState","filtersOpen","setFiltersOpen","v","setSelectedFiltersLength","tableData","setTableData","MTColumns","defaultOptions","getFieldByTitle","titleValue","selectedFiltersArray","newData","filterValue","fieldValue","constructFilters","filterConfig","dataValue","extractDistinctValues","distinctValues","addValue","constructSelect","Toolbar","hasNoRows","columnCount","Body","bodyProps","lastNum","TrendLine","useStyles$8","ContentHeaderTitle","ContentHeader","TitleComponent","textAlign","renderedTitle","useStyles$7","MicDrop","useStyles$6","ErrorPage","status","statusMessage","additionalInfo","supportUrl","support","ClickableText","StyledBox","Breadcrumbs","childrenArray","firstPage","secondPage","expandablePages","currentPage","hasHiddenBreadcrumbs","pageLink","useStyles$5","TypeFragment","typeLink","pageTitle","TitleFragment","tooltip","FinalTitle","SubtitleFragment","Header","pageTitleOverride","appTitle","documentTitle","titleTemplate","defaultTitle","ActionItem","secondaryLabel","HeaderActionMenu","white","actionItems","anchorElRef","actionItem","useStyles$4","HeaderLabelContent","HeaderLabel","styles$1","useStyles$3","ItemCardHeader","ItemCard","tags","tag","useStyles$2","ItemCardGrid","useStyles$1","Page","PageWithHeader","proxiedSessionSchema","DEFAULTS","tokenToExpiry","jwtToken","_header","rawPayload","_signature","ProxiedSignInIdentity","backstageIdentity","promise","headers","mergedHeaders","ProxiedSignInPage","execute","GuestUserIdentity","userEntityRef","parseJwtPayload","LegacyUserIdentity","sub","ent","UserIdentity","authApi","profile","ex","useStyles","GridItem","commonProvider","onSignInStarted","onSignInSuccess","onSignInFailure","handleLogin","identityResponse","guestProvider","ID_TOKEN_REGEX","useFormStyles","asInputRef","renderResult","customProvider","register","handleSubmit","formState","handleResult","userId","idToken","IdentityApiSignOutProxy","PROVIDER_STORAGE_KEY","signInProviders","validateIDs","providers","getSignInProviders","identityProviders","useSignInProviders","apiHolder","setLoading","handleWrappedResult","selectedProviderId","didCancel","handleSignInSuccess","handleSignInStarted","handleSignInFailure","MultiSignInPage","providerElements","SingleSignInPage","auto","showLoginPage","setShowLoginPage","login","checkExisting","showPopup","err","SignInPage","useTabsStyles","BoldHeader","TabbedCard","tabsClasses","selectIndex","_ev","newSelectedIndex","selectedTabContent","useCardTabStyles","CardTab","contextKey","PluginProvider","Provider","usePluginOptions","versionedHolder","AnalyticsReactContext","useAnalyticsContext","theContext","AnalyticsContext","combinedValue","versionedCombinedValue","useApiHolder","useApi","withApis","WrappedComponent","Hoc","ApiRefImpl","createApiRef","createApiFactory","instance","SessionState","SessionState2","googleAuthApiRef","githubAuthApiRef","oktaAuthApiRef","gitlabAuthApiRef","microsoftAuthApiRef","oneloginAuthApiRef","bitbucketAuthApiRef","bitbucketServerAuthApiRef","atlassianAuthApiRef","alertApiRef","analyticsApiRef","appThemeApiRef","configApiRef","discoveryApiRef","errorApiRef","FeatureFlagState","FeatureFlagState2","featureFlagsApiRef","fetchApiRef","identityApiRef","oauthRequestApiRef","storageApiRef","Tracker","useAnalyticsApi","useAnalytics","trackerRef","getTracker","tracker","useApp","versionedContext","globalStore","componentDataKey","attachComponentData","component","dataComponent","getComponentData","_a$2","RouteRefImpl","createRouteRef","_a$1","PARAM_PATTERN","SubRouteRefImpl","createSubRouteRef","pathParams","p","param","ExternalRouteRefImpl","optional","createExternalRouteRef","useRouteRef","routeFunc","isOptional","useRouteRefParams","_routeRef","PluginErrorBoundary","ErrorBoundaryFallback","createRoutableExtension","createReactExtension","InnerComponent","RoutableExtensionWrapper","componentName","createComponentExtension","lazyLoader","Result","selectChildren","rootNode","strictError","Collection","selection","useElementFilter","filterFn","dependencies","PluginImpl","createPlugin","isError","maybe","assertError","serializeError","deserializeError","stringifyError","CustomErrorBase","fullMessage","causeStr","InputError","AuthenticationError","NotAllowedError","NotFoundError","ConflictError","NotModifiedError","NotImplementedError","ForwardedError","parseErrorResponseBody","ResponseError","statusText","techRadarApiRef","MovedState","MovedState2","RadarGrid","radius","rings","makeRingNode","ringIndex","ringRadius","axisNodes","ringNodes","isValidUrl","WithLink","RadarTimeline","timeline","timeEntry","RadarDescription","showDialogActions","url2","links2","makeBlip","moved","blip","RadarEntry","onMouseEnter","onMouseLeave","handleClickOpen","toggle","RadarBubble","visible","textElem","svgElem","rectElem","pathElem","updatePosition","bbox","marginX","marginY","RadarFooter","RadarLegendLink","RadarLegendRing","ring","onEntryMouseEnter","onEntryMouseLeave","entry","setupSegments","segments","quadrantIndex","quadrantData","ringData","getSegment","segmented","quadrant","ringOffset","segmentedData","RadarLegendQuadrant","RadarLegend","quadrants","RadarPlot","activeEntry","Segment","nextSeed","boundedBox","boundedRing","polar","cartesian","min","boundedInterval","low","high","polarValue","rMin","rMax","adjustQuadrants","xStops","yStops","legendParams","legendParam","adjustEntries","seed","adjustedEntries","q","segment","simulation","n","adjustRings","Radar","setActiveEntry","adjustedQuadrants","adjustedRings","useTechRadarLoader","techRadarApi","matchFilter","terms","term","RadarComponent","mapToEntries","loaderResponse","RadarPage","componentProps","setSearchText","RadarPage$1","mock","SampleTechRadarApi","rootRouteRef","TechRadarPage","Router","getGlobalObject","globalObject","makeKey","getOrCreateGlobalSingleton","supplier","createVersionedValueMap","versions","version","createVersionedContext","useVersionedContext","createVersionedContextForTesting"],"sourceRoot":""}